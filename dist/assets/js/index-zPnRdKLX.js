import{r as ST,g as wT,R as Vx,L as Mx,a as IT,P as em,X as Gr,M as RT,b as Cr,Z as CT,S as Ux,H as jT,c as re,C as DT,d as OT,e as VT,F as MT,f as Cc,D as UT,h as LT,B as xo,i as tm,j as Lx,T as nm,k as sm,l as On,m as zx,n as zT,o as PT,W as kT,U as am,p as BT,q as HT,s as jc,I as Ec,G as GT,t as mf,u as FT,v as im,w as qT,x as Px,y as YT,z as KT,A as QT,E as gf,J as pf,K as XT,N as to,O as JT,Q as ZT,V as $T,Y as yf,_ as kx,$ as WT,a0 as fy,a1 as eA,a2 as tA,a3 as nA,a4 as sA,a5 as aA,a6 as iA,a7 as rA,a8 as br,a9 as jf,aa as my,ab as lA,ac as _f,ad as oA,ae as uA,af as gy,ag as cA,ah as hA,ai as dA,aj as fA}from"./vendor-ui-Bicmd_Vr.js";import{r as mA}from"./vendor-react-QrwG4kYs.js";import{L as gA,_ as pA,g as Ys,F as yA,a as qs,b as _A,c as xA,d as vA,i as Bx,p as bA,u as EA,e as TA,f as AA,h as NA,j as SA,k as wA,C as IA,r as py,S as RA,l as CA,m as jA,G as DA,s as OA,n as VA,o as MA,q as UA}from"./vendor-firebase-CGlU0fHW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();var xf={exports:{}},no={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function LA(){if(yy)return no;yy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,o,d){var m=null;if(d!==void 0&&(m=""+d),o.key!==void 0&&(m=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:a,type:r,key:m,ref:o!==void 0?o:null,props:d}}return no.Fragment=t,no.jsx=s,no.jsxs=s,no}var _y;function zA(){return _y||(_y=1,xf.exports=LA()),xf.exports}var c=zA(),vf={exports:{}},so={},bf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function PA(){return xy||(xy=1,(function(a){function t(Q,q){var H=Q.length;Q.push(q);e:for(;0<H;){var te=H-1>>>1,ge=Q[te];if(0<o(ge,q))Q[te]=q,Q[H]=ge,H=te;else break e}}function s(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var q=Q[0],H=Q.pop();if(H!==q){Q[0]=H;e:for(var te=0,ge=Q.length,Ye=ge>>>1;te<Ye;){var be=2*(te+1)-1,Re=Q[be],tt=be+1,Zt=Q[tt];if(0>o(Re,H))tt<ge&&0>o(Zt,Re)?(Q[te]=Zt,Q[tt]=H,te=tt):(Q[te]=Re,Q[be]=H,te=be);else if(tt<ge&&0>o(Zt,H))Q[te]=Zt,Q[tt]=H,te=tt;else break e}}return q}function o(Q,q){var H=Q.sortIndex-q.sortIndex;return H!==0?H:Q.id-q.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var m=Date,p=m.now();a.unstable_now=function(){return m.now()-p}}var x=[],v=[],E=1,T=null,w=3,j=!1,F=!1,W=!1,k=!1,ne=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function xe(Q){for(var q=s(v);q!==null;){if(q.callback===null)r(v);else if(q.startTime<=Q)r(v),q.sortIndex=q.expirationTime,t(x,q);else break;q=s(v)}}function Ue(Q){if(W=!1,xe(Q),!F)if(s(x)!==null)F=!0,Ee||(Ee=!0,U());else{var q=s(v);q!==null&&$e(Ue,q.startTime-Q)}}var Ee=!1,D=-1,S=5,N=-1;function V(){return k?!0:!(a.unstable_now()-N<S)}function C(){if(k=!1,Ee){var Q=a.unstable_now();N=Q;var q=!0;try{e:{F=!1,W&&(W=!1,ce(D),D=-1),j=!0;var H=w;try{t:{for(xe(Q),T=s(x);T!==null&&!(T.expirationTime>Q&&V());){var te=T.callback;if(typeof te=="function"){T.callback=null,w=T.priorityLevel;var ge=te(T.expirationTime<=Q);if(Q=a.unstable_now(),typeof ge=="function"){T.callback=ge,xe(Q),q=!0;break t}T===s(x)&&r(x),xe(Q)}else r(x);T=s(x)}if(T!==null)q=!0;else{var Ye=s(v);Ye!==null&&$e(Ue,Ye.startTime-Q),q=!1}}break e}finally{T=null,w=H,j=!1}q=void 0}}finally{q?U():Ee=!1}}}var U;if(typeof he=="function")U=function(){he(C)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ze=I.port2;I.port1.onmessage=C,U=function(){Ze.postMessage(null)}}else U=function(){ne(C,0)};function $e(Q,q){D=ne(function(){Q(a.unstable_now())},q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Q){Q.callback=null},a.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},a.unstable_getCurrentPriorityLevel=function(){return w},a.unstable_next=function(Q){switch(w){case 1:case 2:case 3:var q=3;break;default:q=w}var H=w;w=q;try{return Q()}finally{w=H}},a.unstable_requestPaint=function(){k=!0},a.unstable_runWithPriority=function(Q,q){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var H=w;w=Q;try{return q()}finally{w=H}},a.unstable_scheduleCallback=function(Q,q,H){var te=a.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?te+H:te):H=te,Q){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=H+ge,Q={id:E++,callback:q,priorityLevel:Q,startTime:H,expirationTime:ge,sortIndex:-1},H>te?(Q.sortIndex=H,t(v,Q),s(x)===null&&Q===s(v)&&(W?(ce(D),D=-1):W=!0,$e(Ue,H-te))):(Q.sortIndex=ge,t(x,Q),F||j||(F=!0,Ee||(Ee=!0,U()))),Q},a.unstable_shouldYield=V,a.unstable_wrapCallback=function(Q){var q=w;return function(){var H=w;w=q;try{return Q.apply(this,arguments)}finally{w=H}}}})(Ef)),Ef}var vy;function kA(){return vy||(vy=1,bf.exports=PA()),bf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function BA(){if(by)return so;by=1;var a=kA(),t=ST(),s=mA();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x(e){if(d(e)!==e)throw Error(r(188))}function v(e){var n=e.alternate;if(!n){if(n=d(e),n===null)throw Error(r(188));return n!==e?null:e}for(var i=e,l=n;;){var h=i.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){i=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===i)return x(h),e;if(f===l)return x(h),n;f=f.sibling}throw Error(r(188))}if(i.return!==l.return)i=h,l=f;else{for(var y=!1,b=h.child;b;){if(b===i){y=!0,i=h,l=f;break}if(b===l){y=!0,l=h,i=f;break}b=b.sibling}if(!y){for(b=f.child;b;){if(b===i){y=!0,i=f,l=h;break}if(b===l){y=!0,l=f,i=h;break}b=b.sibling}if(!y)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:n}function E(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=E(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),he=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=C&&e[C]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Ze(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case ne:return"Profiler";case k:return"StrictMode";case Ue:return"Suspense";case Ee:return"SuspenseList";case N:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case he:return e.displayName||"Context";case ce:return(e._context.displayName||"Context")+".Consumer";case xe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return n=e.displayName||null,n!==null?n:Ze(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return Ze(e(n))}catch{}}return null}var $e=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},te=[],ge=-1;function Ye(e){return{current:e}}function be(e){0>ge||(e.current=te[ge],te[ge]=null,ge--)}function Re(e,n){ge++,te[ge]=e.current,e.current=n}var tt=Ye(null),Zt=Ye(null),_n=Ye(null),Zs=Ye(null);function $s(e,n){switch(Re(_n,n),Re(Zt,e),Re(tt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?U0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=U0(n),e=L0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}be(tt),Re(tt,e)}function Ns(){be(tt),be(Zt),be(_n)}function Jr(e){e.memoizedState!==null&&Re(Zs,e);var n=tt.current,i=L0(n,e.type);n!==i&&(Re(Zt,e),Re(tt,i))}function ji(e){Zt.current===e&&(be(tt),be(Zt)),Zs.current===e&&(be(Zs),Zl._currentValue=H)}var Di,Oi;function $n(e){if(Di===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Di=n&&n[1]||"",Oi=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Di+e+Oi}var Zr=!1;function qa(e,n){if(!e||Zr)return"";Zr=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(Y){var B=Y}Reflect.construct(e,[],J)}else{try{J.call()}catch(Y){B=Y}e.call(J.prototype)}}else{try{throw Error()}catch(Y){B=Y}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(Y){if(Y&&B&&typeof Y.stack=="string")return[Y.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),y=f[0],b=f[1];if(y&&b){var R=y.split(`
`),P=b.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===P.length)for(l=R.length-1,h=P.length-1;1<=l&&0<=h&&R[l]!==P[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==P[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==P[h]){var K=`
`+R[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=h);break}}}finally{Zr=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?$n(i):""}function $r(e,n){switch(e.tag){case 26:case 27:case 5:return $n(e.type);case 16:return $n("Lazy");case 13:return e.child!==n&&n!==null?$n("Suspense Fallback"):$n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return qa(e.type,!1);case 11:return qa(e.type.render,!1);case 1:return qa(e.type,!0);case 31:return $n("Activity");default:return""}}function Wr(e){try{var n="",i=null;do n+=$r(e,i),i=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ht=Object.prototype.hasOwnProperty,At=a.unstable_scheduleCallback,Ws=a.unstable_cancelCallback,gh=a.unstable_shouldYield,Uo=a.unstable_requestPaint,Yt=a.unstable_now,Ya=a.unstable_getCurrentPriorityLevel,el=a.unstable_ImmediatePriority,tl=a.unstable_UserBlockingPriority,ea=a.unstable_NormalPriority,ph=a.unstable_LowPriority,Lo=a.unstable_IdlePriority,zo=a.log,Po=a.unstable_setDisableYieldValue,Un=null,Dt=null;function xn(e){if(typeof zo=="function"&&Po(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Un,e)}catch{}}var rt=Math.clz32?Math.clz32:Bo,ko=Math.log,Vi=Math.LN2;function Bo(e){return e>>>=0,e===0?32:31-(ko(e)/Vi|0)|0}var Wn=256,Ka=262144,dt=4194304;function es(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ts(e,n,i){var l=e.pendingLanes;if(l===0)return 0;var h=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~f,l!==0?h=es(l):(y&=b,y!==0?h=es(y):i||(i=b&~e,i!==0&&(h=es(i))))):(b=l&~f,b!==0?h=es(b):y!==0?h=es(y):i||(i=l&~e,i!==0&&(h=es(i)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:h}function Ln(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function yh(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ho(){var e=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),e}function ns(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Qa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _h(e,n,i,l,h,f){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var b=e.entanglements,R=e.expirationTimes,P=e.hiddenUpdates;for(i=y&~i;0<i;){var K=31-rt(i),J=1<<K;b[K]=0,R[K]=-1;var B=P[K];if(B!==null)for(P[K]=null,K=0;K<B.length;K++){var Y=B[K];Y!==null&&(Y.lane&=-536870913)}i&=~J}l!==0&&Xa(e,l,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~n))}function Xa(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-rt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function nl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-rt(i),h=1<<l;h&n|e[l]&n&&(e[l]|=n),i&=~h}}function sl(e,n){var i=n&-n;return i=(i&42)!==0?1:Ja(i),(i&(e.suspendedLanes|n))!==0?0:i}function Ja(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ss(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Go(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:ry(e.type))}function zn(e,n){var i=q.p;try{return q.p=e,n()}finally{q.p=i}}var Pn=Math.random().toString(36).slice(2),ft="__reactFiber$"+Pn,It="__reactProps$"+Pn,ss="__reactContainer$"+Pn,Mi="__reactEvents$"+Pn,xh="__reactListeners$"+Pn,Fo="__reactHandles$"+Pn,qo="__reactResources$"+Pn,as="__reactMarker$"+Pn;function Ui(e){delete e[ft],delete e[It],delete e[Mi],delete e[xh],delete e[Fo]}function is(e){var n=e[ft];if(n)return n;for(var i=e.parentNode;i;){if(n=i[ss]||i[ft]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=F0(e);e!==null;){if(i=e[ft])return i;e=F0(e)}return n}e=i,i=e.parentNode}return null}function vn(e){if(e=e[ft]||e[ss]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function on(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function rs(e){var n=e[qo];return n||(n=e[qo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function mt(e){e[as]=!0}var al=new Set,il={};function ls(e,n){os(e,n),os(e+"Capture",n)}function os(e,n){for(il[e]=n,e=0;e<n.length;e++)al.add(n[e])}var rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ll={},ol={};function Yo(e){return ht.call(ol,e)?!0:ht.call(ll,e)?!1:rl.test(e)?ol[e]=!0:(ll[e]=!0,!1)}function Li(e,n,i){if(Yo(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function un(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function gt(e,n,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+l)}}function Rt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ta(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ul(e,n,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(y){i=""+y,f.call(this,y)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ze(e){if(!e._valueTracker){var n=ta(e)?"checked":"value";e._valueTracker=ul(e,n,""+e[n])}}function Za(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=ta(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function us(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $a=/[\n"\\]/g;function $t(e){return e.replace($a,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function zi(e,n,i,l,h,f,y,b){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Rt(n)):e.value!==""+Rt(n)&&(e.value=""+Rt(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?cl(e,y,Rt(n)):i!=null?cl(e,y,Rt(i)):l!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Rt(b):e.removeAttribute("name")}function Ko(e,n,i,l,h,f,y,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){ze(e);return}i=i!=null?""+Rt(i):"",n=n!=null?""+Rt(n):i,b||n===e.value||(e.value=n),e.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),ze(e)}function cl(e,n,i){n==="number"&&us(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function na(e,n,i,l){if(e=e.options,n){n={};for(var h=0;h<i.length;h++)n["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=n.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Rt(i),n=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Qo(e,n,i){if(n!=null&&(n=""+Rt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Rt(i):""}function sa(e,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(r(92));if($e(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=Rt(n),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),ze(e)}function Wt(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Xo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hl(e,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,i):typeof i!="number"||i===0||Xo.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function dl(e,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&i[h]!==l&&hl(e,h,l)}else for(var f in n)n.hasOwnProperty(f)&&hl(e,f,n[f])}function Pi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ki(e){return aa.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kn(){}var fl=null;function bn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ia=null,cs=null;function Wa(e){var n=vn(e);if(n&&(e=n.stateNode)){var i=e[It]||null;e:switch(e=n.stateNode,n.type){case"input":if(zi(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+$t(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var h=l[It]||null;if(!h)throw Error(r(90));zi(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===e.form&&Za(l)}break e;case"textarea":Qo(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&na(e,!!i.multiple,n,!1)}}}var Bi=!1;function ra(e,n,i){if(Bi)return e(n,i);Bi=!0;try{var l=e(n);return l}finally{if(Bi=!1,(ia!==null||cs!==null)&&(Gu(),ia&&(n=ia,e=cs,cs=ia=null,Wa(n),e)))for(n=0;n<e.length;n++)Wa(e[n])}}function Bn(e,n){var i=e.stateNode;if(i===null)return null;var l=i[It]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(En)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){ei=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch{ei=!1}var hs=null,ml=null,ti=null;function gl(){if(ti)return ti;var e,n=ml,i=n.length,l,h="value"in hs?hs.value:hs.textContent,f=h.length;for(e=0;e<i&&n[e]===h[e];e++);var y=i-e;for(l=1;l<=y&&n[i-l]===h[f-l];l++);return ti=h.slice(e,1<l?1-l:void 0)}function ni(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ws(){return!0}function Hn(){return!1}function Ot(e){function n(i,l,h,f,y){this._reactName=i,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(i=e[b],this[b]=i?i(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ws:Hn,this.isPropagationStopped=Hn,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),n}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ds=Ot(Is),la=T({},Is,{view:0,detail:0}),pl=Ot(la),oa,Hi,fs,Gi=T({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fs&&(fs&&e.type==="mousemove"?(oa=e.screenX-fs.screenX,Hi=e.screenY-fs.screenY):Hi=oa=0,fs=e),oa)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),yl=Ot(Gi),si=T({},Gi,{dataTransfer:0}),Zo=Ot(si),$o=T({},la,{relatedTarget:0}),ai=Ot($o),_l=T({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),Wo=Ot(_l),Fi=T({},Is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eu=Ot(Fi),tu=T({},Is,{data:0}),ms=Ot(tu),nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=au[e])?!!n[e]:!1}function ua(){return iu}var Kt=T({},la,{key:function(e){if(e.key){var n=nu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?su[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ru=Ot(Kt),lu=T({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rs=Ot(lu),u=T({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),g=Ot(u),_=T({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Ot(_),L=T({},Gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Ot(L),ee=T({},Is,{newState:0,oldState:0}),ye=Ot(ee),lt=[9,13,27,32],Ve=En&&"CompositionEvent"in window,We=null;En&&"documentMode"in document&&(We=document.documentMode);var Tn=En&&"TextEvent"in window&&!We,gs=En&&(!Ve||We&&8<We&&11>=We),Gn=" ",Fn=!1;function ii(e,n){switch(e){case"keyup":return lt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yi=!1;function Jb(e,n){switch(e){case"compositionend":return qi(n);case"keypress":return n.which!==32?null:(Fn=!0,Gn);case"textInput":return e=n.data,e===Gn&&Fn?null:e;default:return null}}function Zb(e,n){if(Yi)return e==="compositionend"||!Ve&&ii(e,n)?(e=gl(),ti=ml=hs=null,Yi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return gs&&n.locale!=="ko"?null:n.data;default:return null}}var $b={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Km(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!$b[e.type]:n==="textarea"}function Qm(e,n,i,l){ia?cs?cs.push(l):cs=[l]:ia=l,n=Ju(n,"onChange"),0<n.length&&(i=new ds("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var xl=null,vl=null;function Wb(e){C0(e,0)}function ou(e){var n=on(e);if(Za(n))return e}function Xm(e,n){if(e==="change")return n}var Jm=!1;if(En){var vh;if(En){var bh="oninput"in document;if(!bh){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),bh=typeof Zm.oninput=="function"}vh=bh}else vh=!1;Jm=vh&&(!document.documentMode||9<document.documentMode)}function $m(){xl&&(xl.detachEvent("onpropertychange",Wm),vl=xl=null)}function Wm(e){if(e.propertyName==="value"&&ou(vl)){var n=[];Qm(n,vl,e,bn(e)),ra(Wb,n)}}function eE(e,n,i){e==="focusin"?($m(),xl=n,vl=i,xl.attachEvent("onpropertychange",Wm)):e==="focusout"&&$m()}function tE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ou(vl)}function nE(e,n){if(e==="click")return ou(n)}function sE(e,n){if(e==="input"||e==="change")return ou(n)}function aE(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var cn=typeof Object.is=="function"?Object.is:aE;function bl(e,n){if(cn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var h=i[l];if(!ht.call(n,h)||!cn(e[h],n[h]))return!1}return!0}function eg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tg(e,n){var i=eg(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=eg(i)}}function ng(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ng(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function sg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=us(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=us(e.document)}return n}function Eh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var iE=En&&"documentMode"in document&&11>=document.documentMode,Ki=null,Th=null,El=null,Ah=!1;function ag(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ah||Ki==null||Ki!==us(l)||(l=Ki,"selectionStart"in l&&Eh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),El&&bl(El,l)||(El=l,l=Ju(Th,"onSelect"),0<l.length&&(n=new ds("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=Ki)))}function ri(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Qi={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionrun:ri("Transition","TransitionRun"),transitionstart:ri("Transition","TransitionStart"),transitioncancel:ri("Transition","TransitionCancel"),transitionend:ri("Transition","TransitionEnd")},Nh={},ig={};En&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function li(e){if(Nh[e])return Nh[e];if(!Qi[e])return e;var n=Qi[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in ig)return Nh[e]=n[i];return e}var rg=li("animationend"),lg=li("animationiteration"),og=li("animationstart"),rE=li("transitionrun"),lE=li("transitionstart"),oE=li("transitioncancel"),ug=li("transitionend"),cg=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function qn(e,n){cg.set(e,n),ls(n,[e])}var uu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},An=[],Xi=0,wh=0;function cu(){for(var e=Xi,n=wh=Xi=0;n<e;){var i=An[n];An[n++]=null;var l=An[n];An[n++]=null;var h=An[n];An[n++]=null;var f=An[n];if(An[n++]=null,l!==null&&h!==null){var y=l.pending;y===null?h.next=h:(h.next=y.next,y.next=h),l.pending=h}f!==0&&hg(i,h,f)}}function hu(e,n,i,l){An[Xi++]=e,An[Xi++]=n,An[Xi++]=i,An[Xi++]=l,wh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ih(e,n,i,l){return hu(e,n,i,l),du(e)}function oi(e,n){return hu(e,null,null,n),du(e)}function hg(e,n,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var h=!1,f=e.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-rt(i),e=f.hiddenUpdates,l=e[h],l===null?e[h]=[n]:l.push(n),n.lane=i|536870912),f):null}function du(e){if(50<Fl)throw Fl=0,Ld=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ji={};function uE(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,n,i,l){return new uE(e,n,i,l)}function Rh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cs(e,n){var i=e.alternate;return i===null?(i=hn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function dg(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function fu(e,n,i,l,h,f){var y=0;if(l=e,typeof e=="function")Rh(e)&&(y=1);else if(typeof e=="string")y=mT(e,i,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case N:return e=hn(31,i,n,h),e.elementType=N,e.lanes=f,e;case W:return ui(i.children,h,f,n);case k:y=8,h|=24;break;case ne:return e=hn(12,i,n,h|2),e.elementType=ne,e.lanes=f,e;case Ue:return e=hn(13,i,n,h),e.elementType=Ue,e.lanes=f,e;case Ee:return e=hn(19,i,n,h),e.elementType=Ee,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case he:y=10;break e;case ce:y=9;break e;case xe:y=11;break e;case D:y=14;break e;case S:y=16,l=null;break e}y=29,i=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=hn(y,i,n,h),n.elementType=e,n.type=l,n.lanes=f,n}function ui(e,n,i,l){return e=hn(7,e,l,n),e.lanes=i,e}function Ch(e,n,i){return e=hn(6,e,null,n),e.lanes=i,e}function fg(e){var n=hn(18,null,null,0);return n.stateNode=e,n}function jh(e,n,i){return n=hn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var mg=new WeakMap;function Nn(e,n){if(typeof e=="object"&&e!==null){var i=mg.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Wr(n)},mg.set(e,n),n)}return{value:e,source:n,stack:Wr(n)}}var Zi=[],$i=0,mu=null,Tl=0,Sn=[],wn=0,ca=null,ps=1,ys="";function js(e,n){Zi[$i++]=Tl,Zi[$i++]=mu,mu=e,Tl=n}function gg(e,n,i){Sn[wn++]=ps,Sn[wn++]=ys,Sn[wn++]=ca,ca=e;var l=ps;e=ys;var h=32-rt(l)-1;l&=~(1<<h),i+=1;var f=32-rt(n)+h;if(30<f){var y=h-h%5;f=(l&(1<<y)-1).toString(32),l>>=y,h-=y,ps=1<<32-rt(n)+h|i<<h|l,ys=f+e}else ps=1<<f|i<<h|l,ys=e}function Dh(e){e.return!==null&&(js(e,1),gg(e,1,0))}function Oh(e){for(;e===mu;)mu=Zi[--$i],Zi[$i]=null,Tl=Zi[--$i],Zi[$i]=null;for(;e===ca;)ca=Sn[--wn],Sn[wn]=null,ys=Sn[--wn],Sn[wn]=null,ps=Sn[--wn],Sn[wn]=null}function pg(e,n){Sn[wn++]=ps,Sn[wn++]=ys,Sn[wn++]=ca,ps=n.id,ys=n.overflow,ca=e}var Vt=null,Qe=null,Ce=!1,ha=null,In=!1,Vh=Error(r(519));function da(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Al(Nn(n,e)),Vh}function yg(e){var n=e.stateNode,i=e.type,l=e.memoizedProps;switch(n[ft]=e,n[It]=l,i){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(i=0;i<Yl.length;i++)Ae(Yl[i],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":Ae("invalid",n),Ko(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ae("invalid",n);break;case"textarea":Ae("invalid",n),sa(n,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||V0(n.textContent,i)?(l.popover!=null&&(Ae("beforetoggle",n),Ae("toggle",n)),l.onScroll!=null&&Ae("scroll",n),l.onScrollEnd!=null&&Ae("scrollend",n),l.onClick!=null&&(n.onclick=kn),n=!0):n=!1,n||da(e,!0)}function _g(e){for(Vt=e.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Vt=Vt.return}}function Wi(e){if(e!==Vt)return!1;if(!Ce)return _g(e),Ce=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||$d(e.type,e.memoizedProps)),i=!i),i&&Qe&&da(e),_g(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Qe=G0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Qe=G0(e)}else n===27?(n=Qe,Sa(e.type)?(e=sf,sf=null,Qe=e):Qe=n):Qe=Vt?Cn(e.stateNode.nextSibling):null;return!0}function ci(){Qe=Vt=null,Ce=!1}function Mh(){var e=ha;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),ha=null),e}function Al(e){ha===null?ha=[e]:ha.push(e)}var Uh=Ye(null),hi=null,Ds=null;function fa(e,n,i){Re(Uh,n._currentValue),n._currentValue=i}function Os(e){e._currentValue=Uh.current,be(Uh)}function Lh(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function zh(e,n,i,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var y=h.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=h;for(var R=0;R<n.length;R++)if(b.context===n[R]){f.lanes|=i,b=f.alternate,b!==null&&(b.lanes|=i),Lh(f.return,i,e),l||(y=null);break e}f=b.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(r(341));y.lanes|=i,f=y.alternate,f!==null&&(f.lanes|=i),Lh(y,i,e),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===e){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function er(e,n,i,l){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var b=h.type;cn(h.pendingProps.value,y.value)||(e!==null?e.push(b):e=[b])}}else if(h===Zs.current){if(y=h.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Zl):e=[Zl])}h=h.return}e!==null&&zh(n,e,i,l),n.flags|=262144}function gu(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function di(e){hi=e,Ds=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mt(e){return xg(hi,e)}function pu(e,n){return hi===null&&di(e),xg(e,n)}function xg(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Ds===null){if(e===null)throw Error(r(308));Ds=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ds=Ds.next=n;return i}var cE=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},hE=a.unstable_scheduleCallback,dE=a.unstable_NormalPriority,pt={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new cE,data:new Map,refCount:0}}function Nl(e){e.refCount--,e.refCount===0&&hE(dE,function(){e.controller.abort()})}var Sl=null,kh=0,tr=0,nr=null;function fE(e,n){if(Sl===null){var i=Sl=[];kh=0,tr=Gd(),nr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return kh++,n.then(vg,vg),n}function vg(){if(--kh===0&&Sl!==null){nr!==null&&(nr.status="fulfilled");var e=Sl;Sl=null,tr=0,nr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function mE(e,n){var i=[],l={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<i.length;h++)(0,i[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),l}var bg=Q.S;Q.S=function(e,n){a0=Yt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&fE(e,n),bg!==null&&bg(e,n)};var fi=Ye(null);function Bh(){var e=fi.current;return e!==null?e:qe.pooledCache}function yu(e,n){n===null?Re(fi,fi.current):Re(fi,n.pool)}function Eg(){var e=Bh();return e===null?null:{parent:pt._currentValue,pool:e}}var sr=Error(r(460)),Hh=Error(r(474)),_u=Error(r(542)),xu={then:function(){}};function Tg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ag(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(kn,kn),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Sg(e),e;default:if(typeof n.status=="string")n.then(kn,kn);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Sg(e),e}throw gi=n,sr}}function mi(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(gi=i,sr):i}}var gi=null;function Ng(){if(gi===null)throw Error(r(459));var e=gi;return gi=null,e}function Sg(e){if(e===sr||e===_u)throw Error(r(483))}var ar=null,wl=0;function vu(e){var n=wl;return wl+=1,ar===null&&(ar=[]),Ag(ar,e,n)}function Il(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function bu(e,n){throw n.$$typeof===w?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function wg(e){function n(M,O){if(e){var z=M.deletions;z===null?(M.deletions=[O],M.flags|=16):z.push(O)}}function i(M,O){if(!e)return null;for(;O!==null;)n(M,O),O=O.sibling;return null}function l(M){for(var O=new Map;M!==null;)M.key!==null?O.set(M.key,M):O.set(M.index,M),M=M.sibling;return O}function h(M,O){return M=Cs(M,O),M.index=0,M.sibling=null,M}function f(M,O,z){return M.index=z,e?(z=M.alternate,z!==null?(z=z.index,z<O?(M.flags|=67108866,O):z):(M.flags|=67108866,O)):(M.flags|=1048576,O)}function y(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function b(M,O,z,X){return O===null||O.tag!==6?(O=Ch(z,M.mode,X),O.return=M,O):(O=h(O,z),O.return=M,O)}function R(M,O,z,X){var oe=z.type;return oe===W?K(M,O,z.props.children,X,z.key):O!==null&&(O.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===S&&mi(oe)===O.type)?(O=h(O,z.props),Il(O,z),O.return=M,O):(O=fu(z.type,z.key,z.props,null,M.mode,X),Il(O,z),O.return=M,O)}function P(M,O,z,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=jh(z,M.mode,X),O.return=M,O):(O=h(O,z.children||[]),O.return=M,O)}function K(M,O,z,X,oe){return O===null||O.tag!==7?(O=ui(z,M.mode,X,oe),O.return=M,O):(O=h(O,z),O.return=M,O)}function J(M,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ch(""+O,M.mode,z),O.return=M,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j:return z=fu(O.type,O.key,O.props,null,M.mode,z),Il(z,O),z.return=M,z;case F:return O=jh(O,M.mode,z),O.return=M,O;case S:return O=mi(O),J(M,O,z)}if($e(O)||U(O))return O=ui(O,M.mode,z,null),O.return=M,O;if(typeof O.then=="function")return J(M,vu(O),z);if(O.$$typeof===he)return J(M,pu(M,O),z);bu(M,O)}return null}function B(M,O,z,X){var oe=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return oe!==null?null:b(M,O,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return z.key===oe?R(M,O,z,X):null;case F:return z.key===oe?P(M,O,z,X):null;case S:return z=mi(z),B(M,O,z,X)}if($e(z)||U(z))return oe!==null?null:K(M,O,z,X,null);if(typeof z.then=="function")return B(M,O,vu(z),X);if(z.$$typeof===he)return B(M,O,pu(M,z),X);bu(M,z)}return null}function Y(M,O,z,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return M=M.get(z)||null,b(O,M,""+X,oe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case j:return M=M.get(X.key===null?z:X.key)||null,R(O,M,X,oe);case F:return M=M.get(X.key===null?z:X.key)||null,P(O,M,X,oe);case S:return X=mi(X),Y(M,O,z,X,oe)}if($e(X)||U(X))return M=M.get(z)||null,K(O,M,X,oe,null);if(typeof X.then=="function")return Y(M,O,z,vu(X),oe);if(X.$$typeof===he)return Y(M,O,z,pu(O,X),oe);bu(O,X)}return null}function ie(M,O,z,X){for(var oe=null,De=null,le=O,ve=O=0,Se=null;le!==null&&ve<z.length;ve++){le.index>ve?(Se=le,le=null):Se=le.sibling;var Oe=B(M,le,z[ve],X);if(Oe===null){le===null&&(le=Se);break}e&&le&&Oe.alternate===null&&n(M,le),O=f(Oe,O,ve),De===null?oe=Oe:De.sibling=Oe,De=Oe,le=Se}if(ve===z.length)return i(M,le),Ce&&js(M,ve),oe;if(le===null){for(;ve<z.length;ve++)le=J(M,z[ve],X),le!==null&&(O=f(le,O,ve),De===null?oe=le:De.sibling=le,De=le);return Ce&&js(M,ve),oe}for(le=l(le);ve<z.length;ve++)Se=Y(le,M,ve,z[ve],X),Se!==null&&(e&&Se.alternate!==null&&le.delete(Se.key===null?ve:Se.key),O=f(Se,O,ve),De===null?oe=Se:De.sibling=Se,De=Se);return e&&le.forEach(function(ja){return n(M,ja)}),Ce&&js(M,ve),oe}function de(M,O,z,X){if(z==null)throw Error(r(151));for(var oe=null,De=null,le=O,ve=O=0,Se=null,Oe=z.next();le!==null&&!Oe.done;ve++,Oe=z.next()){le.index>ve?(Se=le,le=null):Se=le.sibling;var ja=B(M,le,Oe.value,X);if(ja===null){le===null&&(le=Se);break}e&&le&&ja.alternate===null&&n(M,le),O=f(ja,O,ve),De===null?oe=ja:De.sibling=ja,De=ja,le=Se}if(Oe.done)return i(M,le),Ce&&js(M,ve),oe;if(le===null){for(;!Oe.done;ve++,Oe=z.next())Oe=J(M,Oe.value,X),Oe!==null&&(O=f(Oe,O,ve),De===null?oe=Oe:De.sibling=Oe,De=Oe);return Ce&&js(M,ve),oe}for(le=l(le);!Oe.done;ve++,Oe=z.next())Oe=Y(le,M,ve,Oe.value,X),Oe!==null&&(e&&Oe.alternate!==null&&le.delete(Oe.key===null?ve:Oe.key),O=f(Oe,O,ve),De===null?oe=Oe:De.sibling=Oe,De=Oe);return e&&le.forEach(function(NT){return n(M,NT)}),Ce&&js(M,ve),oe}function Fe(M,O,z,X){if(typeof z=="object"&&z!==null&&z.type===W&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case j:e:{for(var oe=z.key;O!==null;){if(O.key===oe){if(oe=z.type,oe===W){if(O.tag===7){i(M,O.sibling),X=h(O,z.props.children),X.return=M,M=X;break e}}else if(O.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===S&&mi(oe)===O.type){i(M,O.sibling),X=h(O,z.props),Il(X,z),X.return=M,M=X;break e}i(M,O);break}else n(M,O);O=O.sibling}z.type===W?(X=ui(z.props.children,M.mode,X,z.key),X.return=M,M=X):(X=fu(z.type,z.key,z.props,null,M.mode,X),Il(X,z),X.return=M,M=X)}return y(M);case F:e:{for(oe=z.key;O!==null;){if(O.key===oe)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){i(M,O.sibling),X=h(O,z.children||[]),X.return=M,M=X;break e}else{i(M,O);break}else n(M,O);O=O.sibling}X=jh(z,M.mode,X),X.return=M,M=X}return y(M);case S:return z=mi(z),Fe(M,O,z,X)}if($e(z))return ie(M,O,z,X);if(U(z)){if(oe=U(z),typeof oe!="function")throw Error(r(150));return z=oe.call(z),de(M,O,z,X)}if(typeof z.then=="function")return Fe(M,O,vu(z),X);if(z.$$typeof===he)return Fe(M,O,pu(M,z),X);bu(M,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(i(M,O.sibling),X=h(O,z),X.return=M,M=X):(i(M,O),X=Ch(z,M.mode,X),X.return=M,M=X),y(M)):i(M,O)}return function(M,O,z,X){try{wl=0;var oe=Fe(M,O,z,X);return ar=null,oe}catch(le){if(le===sr||le===_u)throw le;var De=hn(29,le,null,M.mode);return De.lanes=X,De.return=M,De}finally{}}}var pi=wg(!0),Ig=wg(!1),ma=!1;function Gh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ga(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function pa(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Me&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=du(e),hg(e,null,i),n}return hu(e,l,n,i),du(e)}function Rl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,nl(e,i)}}function qh(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var h=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?h=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?h=f=n:f=f.next=n}else h=f=n;i={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Yh=!1;function Cl(){if(Yh){var e=nr;if(e!==null)throw e}}function jl(e,n,i,l){Yh=!1;var h=e.updateQueue;ma=!1;var f=h.firstBaseUpdate,y=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var R=b,P=R.next;R.next=null,y===null?f=P:y.next=P,y=R;var K=e.alternate;K!==null&&(K=K.updateQueue,b=K.lastBaseUpdate,b!==y&&(b===null?K.firstBaseUpdate=P:b.next=P,K.lastBaseUpdate=R))}if(f!==null){var J=h.baseState;y=0,K=P=R=null,b=f;do{var B=b.lane&-536870913,Y=B!==b.lane;if(Y?(Ne&B)===B:(l&B)===B){B!==0&&B===tr&&(Yh=!0),K!==null&&(K=K.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ie=e,de=b;B=n;var Fe=i;switch(de.tag){case 1:if(ie=de.payload,typeof ie=="function"){J=ie.call(Fe,J,B);break e}J=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=de.payload,B=typeof ie=="function"?ie.call(Fe,J,B):ie,B==null)break e;J=T({},J,B);break e;case 2:ma=!0}}B=b.callback,B!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[B]:Y.push(B))}else Y={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},K===null?(P=K=Y,R=J):K=K.next=Y,y|=B;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);K===null&&(R=J),h.baseState=R,h.firstBaseUpdate=P,h.lastBaseUpdate=K,f===null&&(h.shared.lanes=0),ba|=y,e.lanes=y,e.memoizedState=J}}function Rg(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Cg(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Rg(i[e],n)}var ir=Ye(null),Eu=Ye(0);function jg(e,n){e=Hs,Re(Eu,e),Re(ir,n),Hs=e|n.baseLanes}function Kh(){Re(Eu,Hs),Re(ir,ir.current)}function Qh(){Hs=Eu.current,be(ir),be(Eu)}var dn=Ye(null),Rn=null;function ya(e){var n=e.alternate;Re(ot,ot.current&1),Re(dn,e),Rn===null&&(n===null||ir.current!==null||n.memoizedState!==null)&&(Rn=e)}function Xh(e){Re(ot,ot.current),Re(dn,e),Rn===null&&(Rn=e)}function Dg(e){e.tag===22?(Re(ot,ot.current),Re(dn,e),Rn===null&&(Rn=e)):_a()}function _a(){Re(ot,ot.current),Re(dn,dn.current)}function fn(e){be(dn),Rn===e&&(Rn=null),be(ot)}var ot=Ye(0);function Tu(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||tf(i)||nf(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Vs=0,_e=null,He=null,yt=null,Au=!1,rr=!1,yi=!1,Nu=0,Dl=0,lr=null,gE=0;function at(){throw Error(r(321))}function Jh(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!cn(e[i],n[i]))return!1;return!0}function Zh(e,n,i,l,h,f){return Vs=f,_e=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Q.H=e===null||e.memoizedState===null?gp:dd,yi=!1,f=i(l,h),yi=!1,rr&&(f=Vg(n,i,l,h)),Og(e),f}function Og(e){Q.H=Ml;var n=He!==null&&He.next!==null;if(Vs=0,yt=He=_e=null,Au=!1,Dl=0,lr=null,n)throw Error(r(300));e===null||_t||(e=e.dependencies,e!==null&&gu(e)&&(_t=!0))}function Vg(e,n,i,l){_e=e;var h=0;do{if(rr&&(lr=null),Dl=0,rr=!1,25<=h)throw Error(r(301));if(h+=1,yt=He=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=pp,f=n(i,l)}while(rr);return f}function pE(){var e=Q.H,n=e.useState()[0];return n=typeof n.then=="function"?Ol(n):n,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(_e.flags|=1024),n}function $h(){var e=Nu!==0;return Nu=0,e}function Wh(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function ed(e){if(Au){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Au=!1}Vs=0,yt=He=_e=null,rr=!1,Dl=Nu=0,lr=null}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?_e.memoizedState=yt=e:yt=yt.next=e,yt}function ut(){if(He===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var n=yt===null?_e.memoizedState:yt.next;if(n!==null)yt=n,He=e;else{if(e===null)throw _e.alternate===null?Error(r(467)):Error(r(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},yt===null?_e.memoizedState=yt=e:yt=yt.next=e}return yt}function Su(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(e){var n=Dl;return Dl+=1,lr===null&&(lr=[]),e=Ag(lr,e,n),n=_e,(yt===null?n.memoizedState:yt.next)===null&&(n=n.alternate,Q.H=n===null||n.memoizedState===null?gp:dd),e}function wu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ol(e);if(e.$$typeof===he)return Mt(e)}throw Error(r(438,String(e)))}function td(e){var n=null,i=_e.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=_e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Su(),_e.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),l=0;l<e;l++)i[l]=V;return n.index++,i}function Ms(e,n){return typeof n=="function"?n(e):n}function Iu(e){var n=ut();return nd(n,He,e)}function nd(e,n,i){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=e.baseQueue,f=l.pending;if(f!==null){if(h!==null){var y=h.next;h.next=f.next,f.next=y}n.baseQueue=h=f,l.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var b=y=null,R=null,P=n,K=!1;do{var J=P.lane&-536870913;if(J!==P.lane?(Ne&J)===J:(Vs&J)===J){var B=P.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),J===tr&&(K=!0);else if((Vs&B)===B){P=P.next,B===tr&&(K=!0);continue}else J={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},R===null?(b=R=J,y=f):R=R.next=J,_e.lanes|=B,ba|=B;J=P.action,yi&&i(f,J),f=P.hasEagerState?P.eagerState:i(f,J)}else B={lane:J,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},R===null?(b=R=B,y=f):R=R.next=B,_e.lanes|=J,ba|=J;P=P.next}while(P!==null&&P!==n);if(R===null?y=f:R.next=b,!cn(f,e.memoizedState)&&(_t=!0,K&&(i=nr,i!==null)))throw i;e.memoizedState=f,e.baseState=y,e.baseQueue=R,l.lastRenderedState=f}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function sd(e){var n=ut(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=i.dispatch,h=i.pending,f=n.memoizedState;if(h!==null){i.pending=null;var y=h=h.next;do f=e(f,y.action),y=y.next;while(y!==h);cn(f,n.memoizedState)||(_t=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,l]}function Mg(e,n,i){var l=_e,h=ut(),f=Ce;if(f){if(i===void 0)throw Error(r(407));i=i()}else i=n();var y=!cn((He||h).memoizedState,i);if(y&&(h.memoizedState=i,_t=!0),h=h.queue,rd(zg.bind(null,l,h,e),[e]),h.getSnapshot!==n||y||yt!==null&&yt.memoizedState.tag&1){if(l.flags|=2048,or(9,{destroy:void 0},Lg.bind(null,l,h,i,n),null),qe===null)throw Error(r(349));f||(Vs&127)!==0||Ug(l,n,i)}return i}function Ug(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=_e.updateQueue,n===null?(n=Su(),_e.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Lg(e,n,i,l){n.value=i,n.getSnapshot=l,Pg(n)&&kg(e)}function zg(e,n,i){return i(function(){Pg(n)&&kg(e)})}function Pg(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!cn(e,i)}catch{return!0}}function kg(e){var n=oi(e,2);n!==null&&an(n,e,2)}function ad(e){var n=Qt();if(typeof e=="function"){var i=e;if(e=i(),yi){xn(!0);try{i()}finally{xn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:e},n}function Bg(e,n,i,l){return e.baseState=i,nd(e,He,typeof l=="function"?l:Ms)}function yE(e,n,i,l,h){if(ju(e))throw Error(r(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};Q.T!==null?i(!0):f.isTransition=!1,l(f),i=n.pending,i===null?(f.next=n.pending=f,Hg(n,f)):(f.next=i.next,n.pending=i.next=f)}}function Hg(e,n){var i=n.action,l=n.payload,h=e.state;if(n.isTransition){var f=Q.T,y={};Q.T=y;try{var b=i(h,l),R=Q.S;R!==null&&R(y,b),Gg(e,n,b)}catch(P){id(e,n,P)}finally{f!==null&&y.types!==null&&(f.types=y.types),Q.T=f}}else try{f=i(h,l),Gg(e,n,f)}catch(P){id(e,n,P)}}function Gg(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Fg(e,n,l)},function(l){return id(e,n,l)}):Fg(e,n,i)}function Fg(e,n,i){n.status="fulfilled",n.value=i,qg(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,Hg(e,i)))}function id(e,n,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,qg(n),n=n.next;while(n!==l)}e.action=null}function qg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Yg(e,n){return n}function Kg(e,n){if(Ce){var i=qe.formState;if(i!==null){e:{var l=_e;if(Ce){if(Qe){t:{for(var h=Qe,f=In;h.nodeType!==8;){if(!f){h=null;break t}if(h=Cn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Qe=Cn(h.nextSibling),l=h.data==="F!";break e}}da(l)}l=!1}l&&(n=i[0])}}return i=Qt(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:n},i.queue=l,i=dp.bind(null,_e,l),l.dispatch=i,l=ad(!1),f=hd.bind(null,_e,!1,l.queue),l=Qt(),h={state:n,dispatch:null,action:e,pending:null},l.queue=h,i=yE.bind(null,_e,h,f,i),h.dispatch=i,l.memoizedState=e,[n,i,!1]}function Qg(e){var n=ut();return Xg(n,He,e)}function Xg(e,n,i){if(n=nd(e,n,Yg)[0],e=Iu(Ms)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Ol(n)}catch(y){throw y===sr?_u:y}else l=n;n=ut();var h=n.queue,f=h.dispatch;return i!==n.memoizedState&&(_e.flags|=2048,or(9,{destroy:void 0},_E.bind(null,h,i),null)),[l,f,e]}function _E(e,n){e.action=n}function Jg(e){var n=ut(),i=He;if(i!==null)return Xg(n,i,e);ut(),n=n.memoizedState,i=ut();var l=i.queue.dispatch;return i.memoizedState=e,[n,l,!1]}function or(e,n,i,l){return e={tag:e,create:i,deps:l,inst:n,next:null},n=_e.updateQueue,n===null&&(n=Su(),_e.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e),e}function Zg(){return ut().memoizedState}function Ru(e,n,i,l){var h=Qt();_e.flags|=e,h.memoizedState=or(1|n,{destroy:void 0},i,l===void 0?null:l)}function Cu(e,n,i,l){var h=ut();l=l===void 0?null:l;var f=h.memoizedState.inst;He!==null&&l!==null&&Jh(l,He.memoizedState.deps)?h.memoizedState=or(n,f,i,l):(_e.flags|=e,h.memoizedState=or(1|n,f,i,l))}function $g(e,n){Ru(8390656,8,e,n)}function rd(e,n){Cu(2048,8,e,n)}function xE(e){_e.flags|=4;var n=_e.updateQueue;if(n===null)n=Su(),_e.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Wg(e){var n=ut().memoizedState;return xE({ref:n,nextImpl:e}),function(){if((Me&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function ep(e,n){return Cu(4,2,e,n)}function tp(e,n){return Cu(4,4,e,n)}function np(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function sp(e,n,i){i=i!=null?i.concat([e]):null,Cu(4,4,np.bind(null,n,e),i)}function ld(){}function ap(e,n){var i=ut();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&Jh(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function ip(e,n){var i=ut();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&Jh(n,l[1]))return l[0];if(l=e(),yi){xn(!0);try{e()}finally{xn(!1)}}return i.memoizedState=[l,n],l}function od(e,n,i){return i===void 0||(Vs&1073741824)!==0&&(Ne&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=r0(),_e.lanes|=e,ba|=e,i)}function rp(e,n,i,l){return cn(i,n)?i:ir.current!==null?(e=od(e,i,l),cn(e,n)||(_t=!0),e):(Vs&42)===0||(Vs&1073741824)!==0&&(Ne&261930)===0?(_t=!0,e.memoizedState=i):(e=r0(),_e.lanes|=e,ba|=e,n)}function lp(e,n,i,l,h){var f=q.p;q.p=f!==0&&8>f?f:8;var y=Q.T,b={};Q.T=b,hd(e,!1,n,i);try{var R=h(),P=Q.S;if(P!==null&&P(b,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=mE(R,l);Vl(e,n,K,pn(e))}else Vl(e,n,l,pn(e))}catch(J){Vl(e,n,{then:function(){},status:"rejected",reason:J},pn())}finally{q.p=f,y!==null&&b.types!==null&&(y.types=b.types),Q.T=y}}function vE(){}function ud(e,n,i,l){if(e.tag!==5)throw Error(r(476));var h=op(e).queue;lp(e,h,n,H,i===null?vE:function(){return up(e),i(l)})}function op(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:H},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function up(e){var n=op(e);n.next===null&&(n=e.alternate.memoizedState),Vl(e,n.next.queue,{},pn())}function cd(){return Mt(Zl)}function cp(){return ut().memoizedState}function hp(){return ut().memoizedState}function bE(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=pn();e=ga(i);var l=pa(n,e,i);l!==null&&(an(l,n,i),Rl(l,n,i)),n={cache:Ph()},e.payload=n;return}n=n.return}}function EE(e,n,i){var l=pn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ju(e)?fp(n,i):(i=Ih(e,n,i,l),i!==null&&(an(i,e,l),mp(i,n,l)))}function dp(e,n,i){var l=pn();Vl(e,n,i,l)}function Vl(e,n,i,l){var h={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ju(e))fp(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,b=f(y,i);if(h.hasEagerState=!0,h.eagerState=b,cn(b,y))return hu(e,n,h,0),qe===null&&cu(),!1}catch{}finally{}if(i=Ih(e,n,h,l),i!==null)return an(i,e,l),mp(i,n,l),!0}return!1}function hd(e,n,i,l){if(l={lane:2,revertLane:Gd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ju(e)){if(n)throw Error(r(479))}else n=Ih(e,i,l,2),n!==null&&an(n,e,2)}function ju(e){var n=e.alternate;return e===_e||n!==null&&n===_e}function fp(e,n){rr=Au=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function mp(e,n,i){if((i&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,nl(e,i)}}var Ml={readContext:Mt,use:wu,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at,useHostTransitionStatus:at,useFormState:at,useActionState:at,useOptimistic:at,useMemoCache:at,useCacheRefresh:at};Ml.useEffectEvent=at;var gp={readContext:Mt,use:wu,useCallback:function(e,n){return Qt().memoizedState=[e,n===void 0?null:n],e},useContext:Mt,useEffect:$g,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,Ru(4194308,4,np.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Ru(4194308,4,e,n)},useInsertionEffect:function(e,n){Ru(4,2,e,n)},useMemo:function(e,n){var i=Qt();n=n===void 0?null:n;var l=e();if(yi){xn(!0);try{e()}finally{xn(!1)}}return i.memoizedState=[l,n],l},useReducer:function(e,n,i){var l=Qt();if(i!==void 0){var h=i(n);if(yi){xn(!0);try{i(n)}finally{xn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=EE.bind(null,_e,e),[l.memoizedState,e]},useRef:function(e){var n=Qt();return e={current:e},n.memoizedState=e},useState:function(e){e=ad(e);var n=e.queue,i=dp.bind(null,_e,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:ld,useDeferredValue:function(e,n){var i=Qt();return od(i,e,n)},useTransition:function(){var e=ad(!1);return e=lp.bind(null,_e,e.queue,!0,!1),Qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var l=_e,h=Qt();if(Ce){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),qe===null)throw Error(r(349));(Ne&127)!==0||Ug(l,n,i)}h.memoizedState=i;var f={value:i,getSnapshot:n};return h.queue=f,$g(zg.bind(null,l,f,e),[e]),l.flags|=2048,or(9,{destroy:void 0},Lg.bind(null,l,f,i,n),null),i},useId:function(){var e=Qt(),n=qe.identifierPrefix;if(Ce){var i=ys,l=ps;i=(l&~(1<<32-rt(l)-1)).toString(32)+i,n="_"+n+"R_"+i,i=Nu++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=gE++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:cd,useFormState:Kg,useActionState:Kg,useOptimistic:function(e){var n=Qt();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=hd.bind(null,_e,!0,i),i.dispatch=n,[e,n]},useMemoCache:td,useCacheRefresh:function(){return Qt().memoizedState=bE.bind(null,_e)},useEffectEvent:function(e){var n=Qt(),i={impl:e};return n.memoizedState=i,function(){if((Me&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},dd={readContext:Mt,use:wu,useCallback:ap,useContext:Mt,useEffect:rd,useImperativeHandle:sp,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:ip,useReducer:Iu,useRef:Zg,useState:function(){return Iu(Ms)},useDebugValue:ld,useDeferredValue:function(e,n){var i=ut();return rp(i,He.memoizedState,e,n)},useTransition:function(){var e=Iu(Ms)[0],n=ut().memoizedState;return[typeof e=="boolean"?e:Ol(e),n]},useSyncExternalStore:Mg,useId:cp,useHostTransitionStatus:cd,useFormState:Qg,useActionState:Qg,useOptimistic:function(e,n){var i=ut();return Bg(i,He,e,n)},useMemoCache:td,useCacheRefresh:hp};dd.useEffectEvent=Wg;var pp={readContext:Mt,use:wu,useCallback:ap,useContext:Mt,useEffect:rd,useImperativeHandle:sp,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:ip,useReducer:sd,useRef:Zg,useState:function(){return sd(Ms)},useDebugValue:ld,useDeferredValue:function(e,n){var i=ut();return He===null?od(i,e,n):rp(i,He.memoizedState,e,n)},useTransition:function(){var e=sd(Ms)[0],n=ut().memoizedState;return[typeof e=="boolean"?e:Ol(e),n]},useSyncExternalStore:Mg,useId:cp,useHostTransitionStatus:cd,useFormState:Jg,useActionState:Jg,useOptimistic:function(e,n){var i=ut();return He!==null?Bg(i,He,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:td,useCacheRefresh:hp};pp.useEffectEvent=Wg;function fd(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:T({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var md={enqueueSetState:function(e,n,i){e=e._reactInternals;var l=pn(),h=ga(l);h.payload=n,i!=null&&(h.callback=i),n=pa(e,h,l),n!==null&&(an(n,e,l),Rl(n,e,l))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=pn(),h=ga(l);h.tag=1,h.payload=n,i!=null&&(h.callback=i),n=pa(e,h,l),n!==null&&(an(n,e,l),Rl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=pn(),l=ga(i);l.tag=2,n!=null&&(l.callback=n),n=pa(e,l,i),n!==null&&(an(n,e,i),Rl(n,e,i))}};function yp(e,n,i,l,h,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,y):n.prototype&&n.prototype.isPureReactComponent?!bl(i,l)||!bl(h,f):!0}function _p(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&md.enqueueReplaceState(n,n.state,null)}function _i(e,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(e=e.defaultProps){i===n&&(i=T({},i));for(var h in e)i[h]===void 0&&(i[h]=e[h])}return i}function xp(e){uu(e)}function vp(e){console.error(e)}function bp(e){uu(e)}function Du(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Ep(e,n,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function gd(e,n,i){return i=ga(i),i.tag=3,i.payload={element:null},i.callback=function(){Du(e,n)},i}function Tp(e){return e=ga(e),e.tag=3,e}function Ap(e,n,i,l){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;e.payload=function(){return h(f)},e.callback=function(){Ep(n,i,l)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Ep(n,i,l),typeof h!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function TE(e,n,i,l,h){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&er(n,i,h,!0),i=dn.current,i!==null){switch(i.tag){case 31:case 13:return Rn===null?Fu():i.alternate===null&&it===0&&(it=3),i.flags&=-257,i.flags|=65536,i.lanes=h,l===xu?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),kd(e,l,h)),!1;case 22:return i.flags|=65536,l===xu?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),kd(e,l,h)),!1}throw Error(r(435,i.tag))}return kd(e,l,h),Fu(),!1}if(Ce)return n=dn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Vh&&(e=Error(r(422),{cause:l}),Al(Nn(e,i)))):(l!==Vh&&(n=Error(r(423),{cause:l}),Al(Nn(n,i))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Nn(l,i),h=gd(e.stateNode,l,h),qh(e,h),it!==4&&(it=2)),!1;var f=Error(r(520),{cause:l});if(f=Nn(f,i),Gl===null?Gl=[f]:Gl.push(f),it!==4&&(it=2),n===null)return!0;l=Nn(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=h&-h,i.lanes|=e,e=gd(i.stateNode,l,e),qh(i,e),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ea===null||!Ea.has(f))))return i.flags|=65536,h&=-h,i.lanes|=h,h=Tp(h),Ap(h,e,i,l),qh(i,h),!1}i=i.return}while(i!==null);return!1}var pd=Error(r(461)),_t=!1;function Ut(e,n,i,l){n.child=e===null?Ig(n,null,i,l):pi(n,e.child,i,l)}function Np(e,n,i,l,h){i=i.render;var f=n.ref;if("ref"in l){var y={};for(var b in l)b!=="ref"&&(y[b]=l[b])}else y=l;return di(n),l=Zh(e,n,i,y,f,h),b=$h(),e!==null&&!_t?(Wh(e,n,h),Us(e,n,h)):(Ce&&b&&Dh(n),n.flags|=1,Ut(e,n,l,h),n.child)}function Sp(e,n,i,l,h){if(e===null){var f=i.type;return typeof f=="function"&&!Rh(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,wp(e,n,f,l,h)):(e=fu(i.type,null,l,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Ad(e,h)){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:bl,i(y,l)&&e.ref===n.ref)return Us(e,n,h)}return n.flags|=1,e=Cs(f,l),e.ref=n.ref,e.return=n,n.child=e}function wp(e,n,i,l,h){if(e!==null){var f=e.memoizedProps;if(bl(f,l)&&e.ref===n.ref)if(_t=!1,n.pendingProps=l=f,Ad(e,h))(e.flags&131072)!==0&&(_t=!0);else return n.lanes=e.lanes,Us(e,n,h)}return yd(e,n,i,l,h)}function Ip(e,n,i,l){var h=l.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(l=n.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,n.child=null;return Rp(e,n,f,i,l)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&yu(n,f!==null?f.cachePool:null),f!==null?jg(n,f):Kh(),Dg(n);else return l=n.lanes=536870912,Rp(e,n,f!==null?f.baseLanes|i:i,i,l)}else f!==null?(yu(n,f.cachePool),jg(n,f),_a(),n.memoizedState=null):(e!==null&&yu(n,null),Kh(),_a());return Ut(e,n,h,i),n.child}function Ul(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Rp(e,n,i,l,h){var f=Bh();return f=f===null?null:{parent:pt._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},e!==null&&yu(n,null),Kh(),Dg(n),e!==null&&er(e,n,l,!0),n.childLanes=h,null}function Ou(e,n){return n=Mu({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Cp(e,n,i){return pi(n,e.child,null,i),e=Ou(n,n.pendingProps),e.flags|=2,fn(n),n.memoizedState=null,e}function AE(e,n,i){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ce){if(l.mode==="hidden")return e=Ou(n,l),n.lanes=536870912,Ul(null,e);if(Xh(n),(e=Qe)?(e=H0(e,In),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ca!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},i=fg(e),i.return=n,n.child=i,Vt=n,Qe=null)):e=null,e===null)throw da(n);return n.lanes=536870912,null}return Ou(n,l)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(Xh(n),h)if(n.flags&256)n.flags&=-257,n=Cp(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(_t||er(e,n,i,!1),h=(i&e.childLanes)!==0,_t||h){if(l=qe,l!==null&&(y=sl(l,i),y!==0&&y!==f.retryLane))throw f.retryLane=y,oi(e,y),an(l,e,y),pd;Fu(),n=Cp(e,n,i)}else e=f.treeContext,Qe=Cn(y.nextSibling),Vt=n,Ce=!0,ha=null,In=!1,e!==null&&pg(n,e),n=Ou(n,l),n.flags|=4096;return n}return e=Cs(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Vu(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function yd(e,n,i,l,h){return di(n),i=Zh(e,n,i,l,void 0,h),l=$h(),e!==null&&!_t?(Wh(e,n,h),Us(e,n,h)):(Ce&&l&&Dh(n),n.flags|=1,Ut(e,n,i,h),n.child)}function jp(e,n,i,l,h,f){return di(n),n.updateQueue=null,i=Vg(n,l,i,h),Og(e),l=$h(),e!==null&&!_t?(Wh(e,n,f),Us(e,n,f)):(Ce&&l&&Dh(n),n.flags|=1,Ut(e,n,i,f),n.child)}function Dp(e,n,i,l,h){if(di(n),n.stateNode===null){var f=Ji,y=i.contextType;typeof y=="object"&&y!==null&&(f=Mt(y)),f=new i(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=md,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},Gh(n),y=i.contextType,f.context=typeof y=="object"&&y!==null?Mt(y):Ji,f.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(fd(n,i,y,l),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&md.enqueueReplaceState(f,f.state,null),jl(n,l,f,h),Cl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){f=n.stateNode;var b=n.memoizedProps,R=_i(i,b);f.props=R;var P=f.context,K=i.contextType;y=Ji,typeof K=="object"&&K!==null&&(y=Mt(K));var J=i.getDerivedStateFromProps;K=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,K||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||P!==y)&&_p(n,f,l,y),ma=!1;var B=n.memoizedState;f.state=B,jl(n,l,f,h),Cl(),P=n.memoizedState,b||B!==P||ma?(typeof J=="function"&&(fd(n,i,J,l),P=n.memoizedState),(R=ma||yp(n,i,R,l,B,P,y))?(K||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=P),f.props=l,f.state=P,f.context=y,l=R):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,Fh(e,n),y=n.memoizedProps,K=_i(i,y),f.props=K,J=n.pendingProps,B=f.context,P=i.contextType,R=Ji,typeof P=="object"&&P!==null&&(R=Mt(P)),b=i.getDerivedStateFromProps,(P=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==J||B!==R)&&_p(n,f,l,R),ma=!1,B=n.memoizedState,f.state=B,jl(n,l,f,h),Cl();var Y=n.memoizedState;y!==J||B!==Y||ma||e!==null&&e.dependencies!==null&&gu(e.dependencies)?(typeof b=="function"&&(fd(n,i,b,l),Y=n.memoizedState),(K=ma||yp(n,i,K,l,B,Y,R)||e!==null&&e.dependencies!==null&&gu(e.dependencies))?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Y,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Y,R)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Y),f.props=l,f.state=Y,f.context=R,l=K):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),l=!1)}return f=l,Vu(e,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&l?(n.child=pi(n,e.child,null,h),n.child=pi(n,null,i,h)):Ut(e,n,i,h),n.memoizedState=f.state,e=n.child):e=Us(e,n,h),e}function Op(e,n,i,l){return ci(),n.flags|=256,Ut(e,n,i,l),n.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xd(e){return{baseLanes:e,cachePool:Eg()}}function vd(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=gn),e}function Vp(e,n,i){var l=n.pendingProps,h=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),y&&(h=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ce){if(h?ya(n):_a(),(e=Qe)?(e=H0(e,In),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ca!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},i=fg(e),i.return=n,n.child=i,Vt=n,Qe=null)):e=null,e===null)throw da(n);return nf(e)?n.lanes=32:n.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(_a(),h=n.mode,b=Mu({mode:"hidden",children:b},h),l=ui(l,h,i,null),b.return=n,l.return=n,b.sibling=l,n.child=b,l=n.child,l.memoizedState=xd(i),l.childLanes=vd(e,y,i),n.memoizedState=_d,Ul(null,l)):(ya(n),bd(n,b))}var R=e.memoizedState;if(R!==null&&(b=R.dehydrated,b!==null)){if(f)n.flags&256?(ya(n),n.flags&=-257,n=Ed(e,n,i)):n.memoizedState!==null?(_a(),n.child=e.child,n.flags|=128,n=null):(_a(),b=l.fallback,h=n.mode,l=Mu({mode:"visible",children:l.children},h),b=ui(b,h,i,null),b.flags|=2,l.return=n,b.return=n,l.sibling=b,n.child=l,pi(n,e.child,null,i),l=n.child,l.memoizedState=xd(i),l.childLanes=vd(e,y,i),n.memoizedState=_d,n=Ul(null,l));else if(ya(n),nf(b)){if(y=b.nextSibling&&b.nextSibling.dataset,y)var P=y.dgst;y=P,l=Error(r(419)),l.stack="",l.digest=y,Al({value:l,source:null,stack:null}),n=Ed(e,n,i)}else if(_t||er(e,n,i,!1),y=(i&e.childLanes)!==0,_t||y){if(y=qe,y!==null&&(l=sl(y,i),l!==0&&l!==R.retryLane))throw R.retryLane=l,oi(e,l),an(y,e,l),pd;tf(b)||Fu(),n=Ed(e,n,i)}else tf(b)?(n.flags|=192,n.child=e.child,n=null):(e=R.treeContext,Qe=Cn(b.nextSibling),Vt=n,Ce=!0,ha=null,In=!1,e!==null&&pg(n,e),n=bd(n,l.children),n.flags|=4096);return n}return h?(_a(),b=l.fallback,h=n.mode,R=e.child,P=R.sibling,l=Cs(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,P!==null?b=Cs(P,b):(b=ui(b,h,i,null),b.flags|=2),b.return=n,l.return=n,l.sibling=b,n.child=l,Ul(null,l),l=n.child,b=e.child.memoizedState,b===null?b=xd(i):(h=b.cachePool,h!==null?(R=pt._currentValue,h=h.parent!==R?{parent:R,pool:R}:h):h=Eg(),b={baseLanes:b.baseLanes|i,cachePool:h}),l.memoizedState=b,l.childLanes=vd(e,y,i),n.memoizedState=_d,Ul(e.child,l)):(ya(n),i=e.child,e=i.sibling,i=Cs(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function bd(e,n){return n=Mu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Mu(e,n){return e=hn(22,e,null,n),e.lanes=0,e}function Ed(e,n,i){return pi(n,e.child,null,i),e=bd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Mp(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Lh(e.return,n,i)}function Td(e,n,i,l,h,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:h,treeForkCount:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=i,y.tailMode=h,y.treeForkCount=f)}function Up(e,n,i){var l=n.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var y=ot.current,b=(y&2)!==0;if(b?(y=y&1|2,n.flags|=128):y&=1,Re(ot,y),Ut(e,n,l,i),l=Ce?Tl:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mp(e,i,n);else if(e.tag===19)Mp(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(i=n.child,h=null;i!==null;)e=i.alternate,e!==null&&Tu(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=n.child,n.child=null):(h=i.sibling,i.sibling=null),Td(n,!1,h,i,f,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Tu(e)===null){n.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}Td(n,!0,i,null,f,l);break;case"together":Td(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Us(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),ba|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(er(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,i=Cs(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Cs(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Ad(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&gu(e)))}function NE(e,n,i){switch(n.tag){case 3:$s(n,n.stateNode.containerInfo),fa(n,pt,e.memoizedState.cache),ci();break;case 27:case 5:Jr(n);break;case 4:$s(n,n.stateNode.containerInfo);break;case 10:fa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Xh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ya(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Vp(e,n,i):(ya(n),e=Us(e,n,i),e!==null?e.sibling:null);ya(n);break;case 19:var h=(e.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(er(e,n,i,!1),l=(i&n.childLanes)!==0),h){if(l)return Up(e,n,i);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Re(ot,ot.current),l)break;return null;case 22:return n.lanes=0,Ip(e,n,i,n.pendingProps);case 24:fa(n,pt,e.memoizedState.cache)}return Us(e,n,i)}function Lp(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)_t=!0;else{if(!Ad(e,i)&&(n.flags&128)===0)return _t=!1,NE(e,n,i);_t=(e.flags&131072)!==0}else _t=!1,Ce&&(n.flags&1048576)!==0&&gg(n,Tl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=mi(n.elementType),n.type=e,typeof e=="function")Rh(e)?(l=_i(e,l),n.tag=1,n=Dp(null,n,e,l,i)):(n.tag=0,n=yd(null,n,e,l,i));else{if(e!=null){var h=e.$$typeof;if(h===xe){n.tag=11,n=Np(null,n,e,l,i);break e}else if(h===D){n.tag=14,n=Sp(null,n,e,l,i);break e}}throw n=Ze(e)||e,Error(r(306,n,""))}}return n;case 0:return yd(e,n,n.type,n.pendingProps,i);case 1:return l=n.type,h=_i(l,n.pendingProps),Dp(e,n,l,h,i);case 3:e:{if($s(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var f=n.memoizedState;h=f.element,Fh(e,n),jl(n,l,null,i);var y=n.memoizedState;if(l=y.cache,fa(n,pt,l),l!==f.cache&&zh(n,[pt],i,!0),Cl(),l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Op(e,n,l,i);break e}else if(l!==h){h=Nn(Error(r(424)),n),Al(h),n=Op(e,n,l,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qe=Cn(e.firstChild),Vt=n,Ce=!0,ha=null,In=!0,i=Ig(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ci(),l===h){n=Us(e,n,i);break e}Ut(e,n,l,i)}n=n.child}return n;case 26:return Vu(e,n),e===null?(i=Q0(n.type,null,n.pendingProps,null))?n.memoizedState=i:Ce||(i=n.type,e=n.pendingProps,l=Zu(_n.current).createElement(i),l[ft]=n,l[It]=e,Lt(l,i,e),mt(l),n.stateNode=l):n.memoizedState=Q0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Jr(n),e===null&&Ce&&(l=n.stateNode=q0(n.type,n.pendingProps,_n.current),Vt=n,In=!0,h=Qe,Sa(n.type)?(sf=h,Qe=Cn(l.firstChild)):Qe=h),Ut(e,n,n.pendingProps.children,i),Vu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ce&&((h=l=Qe)&&(l=tT(l,n.type,n.pendingProps,In),l!==null?(n.stateNode=l,Vt=n,Qe=Cn(l.firstChild),In=!1,h=!0):h=!1),h||da(n)),Jr(n),h=n.type,f=n.pendingProps,y=e!==null?e.memoizedProps:null,l=f.children,$d(h,f)?l=null:y!==null&&$d(h,y)&&(n.flags|=32),n.memoizedState!==null&&(h=Zh(e,n,pE,null,null,i),Zl._currentValue=h),Vu(e,n),Ut(e,n,l,i),n.child;case 6:return e===null&&Ce&&((e=i=Qe)&&(i=nT(i,n.pendingProps,In),i!==null?(n.stateNode=i,Vt=n,Qe=null,e=!0):e=!1),e||da(n)),null;case 13:return Vp(e,n,i);case 4:return $s(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=pi(n,null,l,i):Ut(e,n,l,i),n.child;case 11:return Np(e,n,n.type,n.pendingProps,i);case 7:return Ut(e,n,n.pendingProps,i),n.child;case 8:return Ut(e,n,n.pendingProps.children,i),n.child;case 12:return Ut(e,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,fa(n,n.type,l.value),Ut(e,n,l.children,i),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,di(n),h=Mt(h),l=l(h),n.flags|=1,Ut(e,n,l,i),n.child;case 14:return Sp(e,n,n.type,n.pendingProps,i);case 15:return wp(e,n,n.type,n.pendingProps,i);case 19:return Up(e,n,i);case 31:return AE(e,n,i);case 22:return Ip(e,n,i,n.pendingProps);case 24:return di(n),l=Mt(pt),e===null?(h=Bh(),h===null&&(h=qe,f=Ph(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=i),h=f),n.memoizedState={parent:l,cache:h},Gh(n),fa(n,pt,h)):((e.lanes&i)!==0&&(Fh(e,n),jl(n,null,null,i),Cl()),h=e.memoizedState,f=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),fa(n,pt,l)):(l=f.cache,fa(n,pt,l),l!==h.cache&&zh(n,[pt],i,!0))),Ut(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Ls(e){e.flags|=4}function Nd(e,n,i,l,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(c0())e.flags|=8192;else throw gi=xu,Hh}else e.flags&=-16777217}function zp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!W0(n))if(c0())e.flags|=8192;else throw gi=xu,Hh}function Uu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ho():536870912,e.lanes|=n,dr|=n)}function Ll(e,n){if(!Ce)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xe(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function SE(e,n,i){var l=n.pendingProps;switch(Oh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(n),null;case 1:return Xe(n),null;case 3:return i=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Os(pt),Ns(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Wi(n)?Ls(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Mh())),Xe(n),null;case 26:var h=n.type,f=n.memoizedState;return e===null?(Ls(n),f!==null?(Xe(n),zp(n,f)):(Xe(n),Nd(n,h,null,l,i))):f?f!==e.memoizedState?(Ls(n),Xe(n),zp(n,f)):(Xe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ls(n),Xe(n),Nd(n,h,e,l,i)),null;case 27:if(ji(n),i=_n.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Ls(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Xe(n),null}e=tt.current,Wi(n)?yg(n):(e=q0(h,l,i),n.stateNode=e,Ls(n))}return Xe(n),null;case 5:if(ji(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Ls(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Xe(n),null}if(f=tt.current,Wi(n))yg(n);else{var y=Zu(_n.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?y.createElement(h,{is:l.is}):y.createElement(h)}}f[ft]=n,f[It]=l;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=f;e:switch(Lt(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ls(n)}}return Xe(n),Nd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Ls(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=_n.current,Wi(n)){if(e=n.stateNode,i=n.memoizedProps,l=null,h=Vt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[ft]=n,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||V0(e.nodeValue,i)),e||da(n,!0)}else e=Zu(e).createTextNode(l),e[ft]=n,n.stateNode=e}return Xe(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(l=Wi(n),i!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[ft]=n}else ci(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xe(n),e=!1}else i=Mh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(fn(n),n):(fn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return Xe(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Wi(n),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[ft]=n}else ci(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xe(n),h=!1}else h=Mh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(fn(n),n):(fn(n),null)}return fn(n),(n.flags&128)!==0?(n.lanes=i,n):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Uu(n,n.updateQueue),Xe(n),null);case 4:return Ns(),e===null&&Kd(n.stateNode.containerInfo),Xe(n),null;case 10:return Os(n.type),Xe(n),null;case 19:if(be(ot),l=n.memoizedState,l===null)return Xe(n),null;if(h=(n.flags&128)!==0,f=l.rendering,f===null)if(h)Ll(l,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Tu(e),f!==null){for(n.flags|=128,Ll(l,!1),e=f.updateQueue,n.updateQueue=e,Uu(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)dg(i,e),i=i.sibling;return Re(ot,ot.current&1|2),Ce&&js(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Yt()>Bu&&(n.flags|=128,h=!0,Ll(l,!1),n.lanes=4194304)}else{if(!h)if(e=Tu(f),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Uu(n,e),Ll(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ce)return Xe(n),null}else 2*Yt()-l.renderingStartTime>Bu&&i!==536870912&&(n.flags|=128,h=!0,Ll(l,!1),n.lanes=4194304);l.isBackwards?(f.sibling=n.child,n.child=f):(e=l.last,e!==null?e.sibling=f:n.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Yt(),e.sibling=null,i=ot.current,Re(ot,h?i&1|2:i&1),Ce&&js(n,l.treeForkCount),e):(Xe(n),null);case 22:case 23:return fn(n),Qh(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(Xe(n),n.subtreeFlags&6&&(n.flags|=8192)):Xe(n),i=n.updateQueue,i!==null&&Uu(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),e!==null&&be(fi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Os(pt),Xe(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function wE(e,n){switch(Oh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Os(pt),Ns(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ji(n),null;case 31:if(n.memoizedState!==null){if(fn(n),n.alternate===null)throw Error(r(340));ci()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(fn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ci()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return be(ot),null;case 4:return Ns(),null;case 10:return Os(n.type),null;case 22:case 23:return fn(n),Qh(),e!==null&&be(fi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Os(pt),null;case 25:return null;default:return null}}function Pp(e,n){switch(Oh(n),n.tag){case 3:Os(pt),Ns();break;case 26:case 27:case 5:ji(n);break;case 4:Ns();break;case 31:n.memoizedState!==null&&fn(n);break;case 13:fn(n);break;case 19:be(ot);break;case 10:Os(n.type);break;case 22:case 23:fn(n),Qh(),e!==null&&be(fi);break;case 24:Os(pt)}}function zl(e,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var h=l.next;i=h;do{if((i.tag&e)===e){l=void 0;var f=i.create,y=i.inst;l=f(),y.destroy=l}i=i.next}while(i!==h)}}catch(b){ke(n,n.return,b)}}function xa(e,n,i){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&e)===e){var y=l.inst,b=y.destroy;if(b!==void 0){y.destroy=void 0,h=n;var R=i,P=b;try{P()}catch(K){ke(h,R,K)}}}l=l.next}while(l!==f)}}catch(K){ke(n,n.return,K)}}function kp(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Cg(n,i)}catch(l){ke(e,e.return,l)}}}function Bp(e,n,i){i.props=_i(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){ke(e,n,l)}}function Pl(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(h){ke(e,n,h)}}function _s(e,n){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(h){ke(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){ke(e,n,h)}else i.current=null}function Hp(e){var n=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(h){ke(e,e.return,h)}}function Sd(e,n,i){try{var l=e.stateNode;XE(l,e.type,i,n),l[It]=n}catch(h){ke(e,e.return,h)}}function Gp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Sa(e.type)||e.tag===4}function wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Sa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Id(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=kn));else if(l!==4&&(l===27&&Sa(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Id(e,n,i),e=e.sibling;e!==null;)Id(e,n,i),e=e.sibling}function Lu(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(l===27&&Sa(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Lu(e,n,i),e=e.sibling;e!==null;)Lu(e,n,i),e=e.sibling}function Fp(e){var n=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Lt(n,l,i),n[ft]=e,n[It]=i}catch(f){ke(e,e.return,f)}}var zs=!1,xt=!1,Rd=!1,qp=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function IE(e,n){if(e=e.containerInfo,Jd=ac,e=sg(e),Eh(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,b=-1,R=-1,P=0,K=0,J=e,B=null;t:for(;;){for(var Y;J!==i||h!==0&&J.nodeType!==3||(b=y+h),J!==f||l!==0&&J.nodeType!==3||(R=y+l),J.nodeType===3&&(y+=J.nodeValue.length),(Y=J.firstChild)!==null;)B=J,J=Y;for(;;){if(J===e)break t;if(B===i&&++P===h&&(b=y),B===f&&++K===l&&(R=y),(Y=J.nextSibling)!==null)break;J=B,B=J.parentNode}J=Y}i=b===-1||R===-1?null:{start:b,end:R}}else i=null}i=i||{start:0,end:0}}else i=null;for(Zd={focusedElem:e,selectionRange:i},ac=!1,Ct=n;Ct!==null;)if(n=Ct,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ct=e;else for(;Ct!==null;){switch(n=Ct,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)h=e[i],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=n,h=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var ie=_i(i.type,h);e=l.getSnapshotBeforeUpdate(ie,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(de){ke(i,i.return,de)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)ef(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ef(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,Ct=e;break}Ct=n.return}}function Yp(e,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:ks(e,i),l&4&&zl(5,i);break;case 1:if(ks(e,i),l&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){ke(i,i.return,y)}else{var h=_i(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ke(i,i.return,y)}}l&64&&kp(i),l&512&&Pl(i,i.return);break;case 3:if(ks(e,i),l&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Cg(e,n)}catch(y){ke(i,i.return,y)}}break;case 27:n===null&&l&4&&Fp(i);case 26:case 5:ks(e,i),n===null&&l&4&&Hp(i),l&512&&Pl(i,i.return);break;case 12:ks(e,i);break;case 31:ks(e,i),l&4&&Xp(e,i);break;case 13:ks(e,i),l&4&&Jp(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=LE.bind(null,i),sT(e,i))));break;case 22:if(l=i.memoizedState!==null||zs,!l){n=n!==null&&n.memoizedState!==null||xt,h=zs;var f=xt;zs=l,(xt=n)&&!f?Bs(e,i,(i.subtreeFlags&8772)!==0):ks(e,i),zs=h,xt=f}break;case 30:break;default:ks(e,i)}}function Kp(e){var n=e.alternate;n!==null&&(e.alternate=null,Kp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ui(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var et=null,en=!1;function Ps(e,n,i){for(i=i.child;i!==null;)Qp(e,n,i),i=i.sibling}function Qp(e,n,i){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Un,i)}catch{}switch(i.tag){case 26:xt||_s(i,n),Ps(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:xt||_s(i,n);var l=et,h=en;Sa(i.type)&&(et=i.stateNode,en=!1),Ps(e,n,i),Ql(i.stateNode),et=l,en=h;break;case 5:xt||_s(i,n);case 6:if(l=et,h=en,et=null,Ps(e,n,i),et=l,en=h,et!==null)if(en)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(i.stateNode)}catch(f){ke(i,n,f)}else try{et.removeChild(i.stateNode)}catch(f){ke(i,n,f)}break;case 18:et!==null&&(en?(e=et,k0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),vr(e)):k0(et,i.stateNode));break;case 4:l=et,h=en,et=i.stateNode.containerInfo,en=!0,Ps(e,n,i),et=l,en=h;break;case 0:case 11:case 14:case 15:xa(2,i,n),xt||xa(4,i,n),Ps(e,n,i);break;case 1:xt||(_s(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Bp(i,n,l)),Ps(e,n,i);break;case 21:Ps(e,n,i);break;case 22:xt=(l=xt)||i.memoizedState!==null,Ps(e,n,i),xt=l;break;default:Ps(e,n,i)}}function Xp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{vr(e)}catch(i){ke(n,n.return,i)}}}function Jp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vr(e)}catch(i){ke(n,n.return,i)}}function RE(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new qp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new qp),n;default:throw Error(r(435,e.tag))}}function zu(e,n){var i=RE(e);n.forEach(function(l){if(!i.has(l)){i.add(l);var h=zE.bind(null,e,l);l.then(h,h)}})}function tn(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var h=i[l],f=e,y=n,b=y;e:for(;b!==null;){switch(b.tag){case 27:if(Sa(b.type)){et=b.stateNode,en=!1;break e}break;case 5:et=b.stateNode,en=!1;break e;case 3:case 4:et=b.stateNode.containerInfo,en=!0;break e}b=b.return}if(et===null)throw Error(r(160));Qp(f,y,h),et=null,en=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Zp(n,e),n=n.sibling}var Yn=null;function Zp(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(n,e),nn(e),l&4&&(xa(3,e,e.return),zl(3,e),xa(5,e,e.return));break;case 1:tn(n,e),nn(e),l&512&&(xt||i===null||_s(i,i.return)),l&64&&zs&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var h=Yn;if(tn(n,e),nn(e),l&512&&(xt||i===null||_s(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[as]||f[ft]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Lt(f,l,i),f[ft]=e,mt(f),l=f;break e;case"link":var y=Z0("link","href",h).get(l+(i.href||""));if(y){for(var b=0;b<y.length;b++)if(f=y[b],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(b,1);break t}}f=h.createElement(l),Lt(f,l,i),h.head.appendChild(f);break;case"meta":if(y=Z0("meta","content",h).get(l+(i.content||""))){for(b=0;b<y.length;b++)if(f=y[b],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(b,1);break t}}f=h.createElement(l),Lt(f,l,i),h.head.appendChild(f);break;default:throw Error(r(468,l))}f[ft]=e,mt(f),l=f}e.stateNode=l}else $0(h,e.type,e.stateNode);else e.stateNode=J0(h,l,e.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?$0(h,e.type,e.stateNode):J0(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Sd(e,e.memoizedProps,i.memoizedProps)}break;case 27:tn(n,e),nn(e),l&512&&(xt||i===null||_s(i,i.return)),i!==null&&l&4&&Sd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(tn(n,e),nn(e),l&512&&(xt||i===null||_s(i,i.return)),e.flags&32){h=e.stateNode;try{Wt(h,"")}catch(ie){ke(e,e.return,ie)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,Sd(e,h,i!==null?i.memoizedProps:h)),l&1024&&(Rd=!0);break;case 6:if(tn(n,e),nn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(ie){ke(e,e.return,ie)}}break;case 3:if(ec=null,h=Yn,Yn=$u(n.containerInfo),tn(n,e),Yn=h,nn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{vr(n.containerInfo)}catch(ie){ke(e,e.return,ie)}Rd&&(Rd=!1,$p(e));break;case 4:l=Yn,Yn=$u(e.stateNode.containerInfo),tn(n,e),nn(e),Yn=l;break;case 12:tn(n,e),nn(e);break;case 31:tn(n,e),nn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,zu(e,l)));break;case 13:tn(n,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ku=Yt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,zu(e,l)));break;case 22:h=e.memoizedState!==null;var R=i!==null&&i.memoizedState!==null,P=zs,K=xt;if(zs=P||h,xt=K||R,tn(n,e),xt=K,zs=P,nn(e),l&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(i===null||R||zs||xt||xi(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){R=i=n;try{if(f=R.stateNode,h)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{b=R.stateNode;var J=R.memoizedProps.style,B=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ie){ke(R,R.return,ie)}}}else if(n.tag===6){if(i===null){R=n;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(ie){ke(R,R.return,ie)}}}else if(n.tag===18){if(i===null){R=n;try{var Y=R.stateNode;h?B0(Y,!0):B0(R.stateNode,!1)}catch(ie){ke(R,R.return,ie)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,zu(e,i))));break;case 19:tn(n,e),nn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,zu(e,l)));break;case 30:break;case 21:break;default:tn(n,e),nn(e)}}function nn(e){var n=e.flags;if(n&2){try{for(var i,l=e.return;l!==null;){if(Gp(l)){i=l;break}l=l.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var h=i.stateNode,f=wd(e);Lu(e,f,h);break;case 5:var y=i.stateNode;i.flags&32&&(Wt(y,""),i.flags&=-33);var b=wd(e);Lu(e,b,y);break;case 3:case 4:var R=i.stateNode.containerInfo,P=wd(e);Id(e,P,R);break;default:throw Error(r(161))}}catch(K){ke(e,e.return,K)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function $p(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;$p(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ks(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Yp(e,n.alternate,n),n=n.sibling}function xi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:xa(4,n,n.return),xi(n);break;case 1:_s(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Bp(n,n.return,i),xi(n);break;case 27:Ql(n.stateNode);case 26:case 5:_s(n,n.return),xi(n);break;case 22:n.memoizedState===null&&xi(n);break;case 30:xi(n);break;default:xi(n)}e=e.sibling}}function Bs(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=e,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:Bs(h,f,i),zl(4,f);break;case 1:if(Bs(h,f,i),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){ke(l,l.return,P)}if(l=f,h=l.updateQueue,h!==null){var b=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Rg(R[h],b)}catch(P){ke(l,l.return,P)}}i&&y&64&&kp(f),Pl(f,f.return);break;case 27:Fp(f);case 26:case 5:Bs(h,f,i),i&&l===null&&y&4&&Hp(f),Pl(f,f.return);break;case 12:Bs(h,f,i);break;case 31:Bs(h,f,i),i&&y&4&&Xp(h,f);break;case 13:Bs(h,f,i),i&&y&4&&Jp(h,f);break;case 22:f.memoizedState===null&&Bs(h,f,i),Pl(f,f.return);break;case 30:break;default:Bs(h,f,i)}n=n.sibling}}function Cd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Nl(i))}function jd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Nl(e))}function Kn(e,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Wp(e,n,i,l),n=n.sibling}function Wp(e,n,i,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Kn(e,n,i,l),h&2048&&zl(9,n);break;case 1:Kn(e,n,i,l);break;case 3:Kn(e,n,i,l),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Nl(e)));break;case 12:if(h&2048){Kn(e,n,i,l),e=n.stateNode;try{var f=n.memoizedProps,y=f.id,b=f.onPostCommit;typeof b=="function"&&b(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){ke(n,n.return,R)}}else Kn(e,n,i,l);break;case 31:Kn(e,n,i,l);break;case 13:Kn(e,n,i,l);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?Kn(e,n,i,l):kl(e,n):f._visibility&2?Kn(e,n,i,l):(f._visibility|=2,ur(e,n,i,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Cd(y,n);break;case 24:Kn(e,n,i,l),h&2048&&jd(n.alternate,n);break;default:Kn(e,n,i,l)}}function ur(e,n,i,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,y=n,b=i,R=l,P=y.flags;switch(y.tag){case 0:case 11:case 15:ur(f,y,b,R,h),zl(8,y);break;case 23:break;case 22:var K=y.stateNode;y.memoizedState!==null?K._visibility&2?ur(f,y,b,R,h):kl(f,y):(K._visibility|=2,ur(f,y,b,R,h)),h&&P&2048&&Cd(y.alternate,y);break;case 24:ur(f,y,b,R,h),h&&P&2048&&jd(y.alternate,y);break;default:ur(f,y,b,R,h)}n=n.sibling}}function kl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,l=n,h=l.flags;switch(l.tag){case 22:kl(i,l),h&2048&&Cd(l.alternate,l);break;case 24:kl(i,l),h&2048&&jd(l.alternate,l);break;default:kl(i,l)}n=n.sibling}}var Bl=8192;function cr(e,n,i){if(e.subtreeFlags&Bl)for(e=e.child;e!==null;)e0(e,n,i),e=e.sibling}function e0(e,n,i){switch(e.tag){case 26:cr(e,n,i),e.flags&Bl&&e.memoizedState!==null&&gT(i,Yn,e.memoizedState,e.memoizedProps);break;case 5:cr(e,n,i);break;case 3:case 4:var l=Yn;Yn=$u(e.stateNode.containerInfo),cr(e,n,i),Yn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Bl,Bl=16777216,cr(e,n,i),Bl=l):cr(e,n,i));break;default:cr(e,n,i)}}function t0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Hl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Ct=l,s0(l,e)}t0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)n0(e),e=e.sibling}function n0(e){switch(e.tag){case 0:case 11:case 15:Hl(e),e.flags&2048&&xa(9,e,e.return);break;case 3:Hl(e);break;case 12:Hl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Pu(e)):Hl(e);break;default:Hl(e)}}function Pu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];Ct=l,s0(l,e)}t0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:xa(8,n,n.return),Pu(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Pu(n));break;default:Pu(n)}e=e.sibling}}function s0(e,n){for(;Ct!==null;){var i=Ct;switch(i.tag){case 0:case 11:case 15:xa(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Ct=l;else e:for(i=e;Ct!==null;){l=Ct;var h=l.sibling,f=l.return;if(Kp(l),l===i){Ct=null;break e}if(h!==null){h.return=f,Ct=h;break e}Ct=f}}}var CE={getCacheForType:function(e){var n=Mt(pt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Mt(pt).controller.signal}},jE=typeof WeakMap=="function"?WeakMap:Map,Me=0,qe=null,Te=null,Ne=0,Pe=0,mn=null,va=!1,hr=!1,Dd=!1,Hs=0,it=0,ba=0,vi=0,Od=0,gn=0,dr=0,Gl=null,sn=null,Vd=!1,ku=0,a0=0,Bu=1/0,Hu=null,Ea=null,Nt=0,Ta=null,fr=null,Gs=0,Md=0,Ud=null,i0=null,Fl=0,Ld=null;function pn(){return(Me&2)!==0&&Ne!==0?Ne&-Ne:Q.T!==null?Gd():Go()}function r0(){if(gn===0)if((Ne&536870912)===0||Ce){var e=Ka;Ka<<=1,(Ka&3932160)===0&&(Ka=262144),gn=e}else gn=536870912;return e=dn.current,e!==null&&(e.flags|=32),gn}function an(e,n,i){(e===qe&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)&&(mr(e,0),Aa(e,Ne,gn,!1)),Qa(e,i),((Me&2)===0||e!==qe)&&(e===qe&&((Me&2)===0&&(vi|=i),it===4&&Aa(e,Ne,gn,!1)),xs(e))}function l0(e,n,i){if((Me&6)!==0)throw Error(r(327));var l=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Ln(e,n),h=l?VE(e,n):Pd(e,n,!0),f=l;do{if(h===0){hr&&!l&&Aa(e,n,0,!1);break}else{if(i=e.current.alternate,f&&!DE(i)){h=Pd(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var b=e;h=Gl;var R=b.current.memoizedState.isDehydrated;if(R&&(mr(b,y).flags|=256),y=Pd(b,y,!1),y!==2){if(Dd&&!R){b.errorRecoveryDisabledLanes|=f,vi|=f,h=4;break e}f=sn,sn=h,f!==null&&(sn===null?sn=f:sn.push.apply(sn,f))}h=y}if(f=!1,h!==2)continue}}if(h===1){mr(e,0),Aa(e,n,0,!0);break}e:{switch(l=e,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Aa(l,n,gn,!va);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=ku+300-Yt(),10<h)){if(Aa(l,n,gn,!va),ts(l,0,!0)!==0)break e;Gs=n,l.timeoutHandle=z0(o0.bind(null,l,i,sn,Hu,Vd,n,gn,vi,dr,va,f,"Throttled",-0,0),h);break e}o0(l,i,sn,Hu,Vd,n,gn,vi,dr,va,f,null,-0,0)}}break}while(!0);xs(e)}function o0(e,n,i,l,h,f,y,b,R,P,K,J,B,Y){if(e.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},e0(n,f,J);var ie=(f&62914560)===f?ku-Yt():(f&4194048)===f?a0-Yt():0;if(ie=pT(J,ie),ie!==null){Gs=f,e.cancelPendingCommit=ie(p0.bind(null,e,n,f,i,l,h,y,b,R,K,J,null,B,Y)),Aa(e,f,y,!P);return}}p0(e,n,f,i,l,h,y,b,R)}function DE(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var h=i[l],f=h.getSnapshot;h=h.value;try{if(!cn(f(),h))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Aa(e,n,i,l){n&=~Od,n&=~vi,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var h=n;0<h;){var f=31-rt(h),y=1<<f;l[f]=-1,h&=~y}i!==0&&Xa(e,i,n)}function Gu(){return(Me&6)===0?(ql(0),!1):!0}function zd(){if(Te!==null){if(Pe===0)var e=Te.return;else e=Te,Ds=hi=null,ed(e),ar=null,wl=0,e=Te;for(;e!==null;)Pp(e.alternate,e),e=e.return;Te=null}}function mr(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,$E(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Gs=0,zd(),qe=e,Te=i=Cs(e.current,null),Ne=n,Pe=0,mn=null,va=!1,hr=Ln(e,n),Dd=!1,dr=gn=Od=vi=ba=it=0,sn=Gl=null,Vd=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var h=31-rt(l),f=1<<h;n|=e[h],l&=~f}return Hs=n,cu(),i}function u0(e,n){_e=null,Q.H=Ml,n===sr||n===_u?(n=Ng(),Pe=3):n===Hh?(n=Ng(),Pe=4):Pe=n===pd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,mn=n,Te===null&&(it=1,Du(e,Nn(n,e.current)))}function c0(){var e=dn.current;return e===null?!0:(Ne&4194048)===Ne?Rn===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?e===Rn:!1}function h0(){var e=Q.H;return Q.H=Ml,e===null?Ml:e}function d0(){var e=Q.A;return Q.A=CE,e}function Fu(){it=4,va||(Ne&4194048)!==Ne&&dn.current!==null||(hr=!0),(ba&134217727)===0&&(vi&134217727)===0||qe===null||Aa(qe,Ne,gn,!1)}function Pd(e,n,i){var l=Me;Me|=2;var h=h0(),f=d0();(qe!==e||Ne!==n)&&(Hu=null,mr(e,n)),n=!1;var y=it;e:do try{if(Pe!==0&&Te!==null){var b=Te,R=mn;switch(Pe){case 8:zd(),y=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(n=!0);var P=Pe;if(Pe=0,mn=null,gr(e,b,R,P),i&&hr){y=0;break e}break;default:P=Pe,Pe=0,mn=null,gr(e,b,R,P)}}OE(),y=it;break}catch(K){u0(e,K)}while(!0);return n&&e.shellSuspendCounter++,Ds=hi=null,Me=l,Q.H=h,Q.A=f,Te===null&&(qe=null,Ne=0,cu()),y}function OE(){for(;Te!==null;)f0(Te)}function VE(e,n){var i=Me;Me|=2;var l=h0(),h=d0();qe!==e||Ne!==n?(Hu=null,Bu=Yt()+500,mr(e,n)):hr=Ln(e,n);e:do try{if(Pe!==0&&Te!==null){n=Te;var f=mn;t:switch(Pe){case 1:Pe=0,mn=null,gr(e,n,f,1);break;case 2:case 9:if(Tg(f)){Pe=0,mn=null,m0(n);break}n=function(){Pe!==2&&Pe!==9||qe!==e||(Pe=7),xs(e)},f.then(n,n);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:Tg(f)?(Pe=0,mn=null,m0(n)):(Pe=0,mn=null,gr(e,n,f,7));break;case 5:var y=null;switch(Te.tag){case 26:y=Te.memoizedState;case 5:case 27:var b=Te;if(y?W0(y):b.stateNode.complete){Pe=0,mn=null;var R=b.sibling;if(R!==null)Te=R;else{var P=b.return;P!==null?(Te=P,qu(P)):Te=null}break t}}Pe=0,mn=null,gr(e,n,f,5);break;case 6:Pe=0,mn=null,gr(e,n,f,6);break;case 8:zd(),it=6;break e;default:throw Error(r(462))}}ME();break}catch(K){u0(e,K)}while(!0);return Ds=hi=null,Q.H=l,Q.A=h,Me=i,Te!==null?0:(qe=null,Ne=0,cu(),it)}function ME(){for(;Te!==null&&!gh();)f0(Te)}function f0(e){var n=Lp(e.alternate,e,Hs);e.memoizedProps=e.pendingProps,n===null?qu(e):Te=n}function m0(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=jp(i,n,n.pendingProps,n.type,void 0,Ne);break;case 11:n=jp(i,n,n.pendingProps,n.type.render,n.ref,Ne);break;case 5:ed(n);default:Pp(i,n),n=Te=dg(n,Hs),n=Lp(i,n,Hs)}e.memoizedProps=e.pendingProps,n===null?qu(e):Te=n}function gr(e,n,i,l){Ds=hi=null,ed(n),ar=null,wl=0;var h=n.return;try{if(TE(e,h,n,i,Ne)){it=1,Du(e,Nn(i,e.current)),Te=null;return}}catch(f){if(h!==null)throw Te=h,f;it=1,Du(e,Nn(i,e.current)),Te=null;return}n.flags&32768?(Ce||l===1?e=!0:hr||(Ne&536870912)!==0?e=!1:(va=e=!0,(l===2||l===9||l===3||l===6)&&(l=dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),g0(n,e)):qu(n)}function qu(e){var n=e;do{if((n.flags&32768)!==0){g0(n,va);return}e=n.return;var i=SE(n.alternate,n,Hs);if(i!==null){Te=i;return}if(n=n.sibling,n!==null){Te=n;return}Te=n=e}while(n!==null);it===0&&(it=5)}function g0(e,n){do{var i=wE(e.alternate,e);if(i!==null){i.flags&=32767,Te=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Te=e;return}Te=e=i}while(e!==null);it=6,Te=null}function p0(e,n,i,l,h,f,y,b,R){e.cancelPendingCommit=null;do Yu();while(Nt!==0);if((Me&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=wh,_h(e,i,f,y,b,R),e===qe&&(Te=qe=null,Ne=0),fr=n,Ta=e,Gs=i,Md=f,Ud=h,i0=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,PE(ea,function(){return b0(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=q.p,q.p=2,y=Me,Me|=4;try{IE(e,n,i)}finally{Me=y,q.p=h,Q.T=l}}Nt=1,y0(),_0(),x0()}}function y0(){if(Nt===1){Nt=0;var e=Ta,n=fr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=Q.T,Q.T=null;var l=q.p;q.p=2;var h=Me;Me|=4;try{Zp(n,e);var f=Zd,y=sg(e.containerInfo),b=f.focusedElem,R=f.selectionRange;if(y!==b&&b&&b.ownerDocument&&ng(b.ownerDocument.documentElement,b)){if(R!==null&&Eh(b)){var P=R.start,K=R.end;if(K===void 0&&(K=P),"selectionStart"in b)b.selectionStart=P,b.selectionEnd=Math.min(K,b.value.length);else{var J=b.ownerDocument||document,B=J&&J.defaultView||window;if(B.getSelection){var Y=B.getSelection(),ie=b.textContent.length,de=Math.min(R.start,ie),Fe=R.end===void 0?de:Math.min(R.end,ie);!Y.extend&&de>Fe&&(y=Fe,Fe=de,de=y);var M=tg(b,de),O=tg(b,Fe);if(M&&O&&(Y.rangeCount!==1||Y.anchorNode!==M.node||Y.anchorOffset!==M.offset||Y.focusNode!==O.node||Y.focusOffset!==O.offset)){var z=J.createRange();z.setStart(M.node,M.offset),Y.removeAllRanges(),de>Fe?(Y.addRange(z),Y.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),Y.addRange(z))}}}}for(J=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&J.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var X=J[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}ac=!!Jd,Zd=Jd=null}finally{Me=h,q.p=l,Q.T=i}}e.current=n,Nt=2}}function _0(){if(Nt===2){Nt=0;var e=Ta,n=fr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=Q.T,Q.T=null;var l=q.p;q.p=2;var h=Me;Me|=4;try{Yp(e,n.alternate,n)}finally{Me=h,q.p=l,Q.T=i}}Nt=3}}function x0(){if(Nt===4||Nt===3){Nt=0,Uo();var e=Ta,n=fr,i=Gs,l=i0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Nt=5:(Nt=0,fr=Ta=null,v0(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Ea=null),Ss(i),n=n.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Un,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=Q.T,h=q.p,q.p=2,Q.T=null;try{for(var f=e.onRecoverableError,y=0;y<l.length;y++){var b=l[y];f(b.value,{componentStack:b.stack})}}finally{Q.T=n,q.p=h}}(Gs&3)!==0&&Yu(),xs(e),h=e.pendingLanes,(i&261930)!==0&&(h&42)!==0?e===Ld?Fl++:(Fl=0,Ld=e):Fl=0,ql(0)}}function v0(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Nl(n)))}function Yu(){return y0(),_0(),x0(),b0()}function b0(){if(Nt!==5)return!1;var e=Ta,n=Md;Md=0;var i=Ss(Gs),l=Q.T,h=q.p;try{q.p=32>i?32:i,Q.T=null,i=Ud,Ud=null;var f=Ta,y=Gs;if(Nt=0,fr=Ta=null,Gs=0,(Me&6)!==0)throw Error(r(331));var b=Me;if(Me|=4,n0(f.current),Wp(f,f.current,y,i),Me=b,ql(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Un,f)}catch{}return!0}finally{q.p=h,Q.T=l,v0(e,n)}}function E0(e,n,i){n=Nn(i,n),n=gd(e.stateNode,n,2),e=pa(e,n,2),e!==null&&(Qa(e,2),xs(e))}function ke(e,n,i){if(e.tag===3)E0(e,e,i);else for(;n!==null;){if(n.tag===3){E0(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ea===null||!Ea.has(l))){e=Nn(i,e),i=Tp(2),l=pa(n,i,2),l!==null&&(Ap(i,l,n,e),Qa(l,2),xs(l));break}}n=n.return}}function kd(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new jE;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(i)||(Dd=!0,h.add(i),e=UE.bind(null,e,n,i),n.then(e,e))}function UE(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,qe===e&&(Ne&i)===i&&(it===4||it===3&&(Ne&62914560)===Ne&&300>Yt()-ku?(Me&2)===0&&mr(e,0):Od|=i,dr===Ne&&(dr=0)),xs(e)}function T0(e,n){n===0&&(n=Ho()),e=oi(e,n),e!==null&&(Qa(e,n),xs(e))}function LE(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),T0(e,i)}function zE(e,n){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),T0(e,i)}function PE(e,n){return At(e,n)}var Ku=null,pr=null,Bd=!1,Qu=!1,Hd=!1,Na=0;function xs(e){e!==pr&&e.next===null&&(pr===null?Ku=pr=e:pr=pr.next=e),Qu=!0,Bd||(Bd=!0,BE())}function ql(e,n){if(!Hd&&Qu){Hd=!0;do for(var i=!1,l=Ku;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var y=l.suspendedLanes,b=l.pingedLanes;f=(1<<31-rt(42|e)+1)-1,f&=h&~(y&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,w0(l,f))}else f=Ne,f=ts(l,l===qe?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ln(l,f)||(i=!0,w0(l,f));l=l.next}while(i);Hd=!1}}function kE(){A0()}function A0(){Qu=Bd=!1;var e=0;Na!==0&&ZE()&&(e=Na);for(var n=Yt(),i=null,l=Ku;l!==null;){var h=l.next,f=N0(l,n);f===0?(l.next=null,i===null?Ku=h:i.next=h,h===null&&(pr=i)):(i=l,(e!==0||(f&3)!==0)&&(Qu=!0)),l=h}Nt!==0&&Nt!==5||ql(e),Na!==0&&(Na=0)}function N0(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-rt(f),b=1<<y,R=h[y];R===-1?((b&i)===0||(b&l)!==0)&&(h[y]=yh(b,n)):R<=n&&(e.expiredLanes|=b),f&=~b}if(n=qe,i=Ne,i=ts(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===n&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ws(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ln(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(l!==null&&Ws(l),Ss(i)){case 2:case 8:i=tl;break;case 32:i=ea;break;case 268435456:i=Lo;break;default:i=ea}return l=S0.bind(null,e),i=At(i,l),e.callbackPriority=n,e.callbackNode=i,n}return l!==null&&l!==null&&Ws(l),e.callbackPriority=2,e.callbackNode=null,2}function S0(e,n){if(Nt!==0&&Nt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Yu()&&e.callbackNode!==i)return null;var l=Ne;return l=ts(e,e===qe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(l0(e,l,n),N0(e,Yt()),e.callbackNode!=null&&e.callbackNode===i?S0.bind(null,e):null)}function w0(e,n){if(Yu())return null;l0(e,n,!0)}function BE(){WE(function(){(Me&6)!==0?At(el,kE):A0()})}function Gd(){if(Na===0){var e=tr;e===0&&(e=Wn,Wn<<=1,(Wn&261888)===0&&(Wn=256)),Na=e}return Na}function I0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ki(""+e)}function R0(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function HE(e,n,i,l,h){if(n==="submit"&&i&&i.stateNode===h){var f=I0((h[It]||null).action),y=l.submitter;y&&(n=(n=y[It]||null)?I0(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var b=new ds("action","action",null,l,h);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Na!==0){var R=y?R0(h,y):new FormData(h);ud(i,{pending:!0,data:R,method:h.method,action:f},null,R)}}else typeof f=="function"&&(b.preventDefault(),R=y?R0(h,y):new FormData(h),ud(i,{pending:!0,data:R,method:h.method,action:f},f,R))},currentTarget:h}]})}}for(var Fd=0;Fd<Sh.length;Fd++){var qd=Sh[Fd],GE=qd.toLowerCase(),FE=qd[0].toUpperCase()+qd.slice(1);qn(GE,"on"+FE)}qn(rg,"onAnimationEnd"),qn(lg,"onAnimationIteration"),qn(og,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(rE,"onTransitionRun"),qn(lE,"onTransitionStart"),qn(oE,"onTransitionCancel"),qn(ug,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function C0(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],h=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var y=l.length-1;0<=y;y--){var b=l[y],R=b.instance,P=b.currentTarget;if(b=b.listener,R!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=P;try{f(h)}catch(K){uu(K)}h.currentTarget=null,f=R}else for(y=0;y<l.length;y++){if(b=l[y],R=b.instance,P=b.currentTarget,b=b.listener,R!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=P;try{f(h)}catch(K){uu(K)}h.currentTarget=null,f=R}}}}function Ae(e,n){var i=n[Mi];i===void 0&&(i=n[Mi]=new Set);var l=e+"__bubble";i.has(l)||(j0(n,e,2,!1),i.add(l))}function Yd(e,n,i){var l=0;n&&(l|=4),j0(i,e,l,n)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Kd(e){if(!e[Xu]){e[Xu]=!0,al.forEach(function(i){i!=="selectionchange"&&(qE.has(i)||Yd(i,!1,e),Yd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Xu]||(n[Xu]=!0,Yd("selectionchange",!1,n))}}function j0(e,n,i,l){switch(ry(n)){case 2:var h=xT;break;case 8:h=vT;break;default:h=uf}i=h.bind(null,n,i,e),h=void 0,!ei||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(n,i,{capture:!0,passive:h}):e.addEventListener(n,i,!0):h!==void 0?e.addEventListener(n,i,{passive:h}):e.addEventListener(n,i,!1)}function Qd(e,n,i,l,h){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var b=l.stateNode.containerInfo;if(b===h)break;if(y===4)for(y=l.return;y!==null;){var R=y.tag;if((R===3||R===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;b!==null;){if(y=is(b),y===null)return;if(R=y.tag,R===5||R===6||R===26||R===27){l=f=y;continue e}b=b.parentNode}}l=l.return}ra(function(){var P=f,K=bn(i),J=[];e:{var B=cg.get(e);if(B!==void 0){var Y=ds,ie=e;switch(e){case"keypress":if(ni(i)===0)break e;case"keydown":case"keyup":Y=ru;break;case"focusin":ie="focus",Y=ai;break;case"focusout":ie="blur",Y=ai;break;case"beforeblur":case"afterblur":Y=ai;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Zo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=g;break;case rg:case lg:case og:Y=Wo;break;case ug:Y=A;break;case"scroll":case"scrollend":Y=pl;break;case"wheel":Y=G;break;case"copy":case"cut":case"paste":Y=eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Rs;break;case"toggle":case"beforetoggle":Y=ye}var de=(n&4)!==0,Fe=!de&&(e==="scroll"||e==="scrollend"),M=de?B!==null?B+"Capture":null:B;de=[];for(var O=P,z;O!==null;){var X=O;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||M===null||(X=Bn(O,M),X!=null&&de.push(Kl(O,X,z))),Fe)break;O=O.return}0<de.length&&(B=new Y(B,ie,null,i,K),J.push({event:B,listeners:de}))}}if((n&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",B&&i!==fl&&(ie=i.relatedTarget||i.fromElement)&&(is(ie)||ie[ss]))break e;if((Y||B)&&(B=K.window===K?K:(B=K.ownerDocument)?B.defaultView||B.parentWindow:window,Y?(ie=i.relatedTarget||i.toElement,Y=P,ie=ie?is(ie):null,ie!==null&&(Fe=d(ie),de=ie.tag,ie!==Fe||de!==5&&de!==27&&de!==6)&&(ie=null)):(Y=null,ie=P),Y!==ie)){if(de=yl,X="onMouseLeave",M="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(de=Rs,X="onPointerLeave",M="onPointerEnter",O="pointer"),Fe=Y==null?B:on(Y),z=ie==null?B:on(ie),B=new de(X,O+"leave",Y,i,K),B.target=Fe,B.relatedTarget=z,X=null,is(K)===P&&(de=new de(M,O+"enter",ie,i,K),de.target=z,de.relatedTarget=Fe,X=de),Fe=X,Y&&ie)t:{for(de=YE,M=Y,O=ie,z=0,X=M;X;X=de(X))z++;X=0;for(var oe=O;oe;oe=de(oe))X++;for(;0<z-X;)M=de(M),z--;for(;0<X-z;)O=de(O),X--;for(;z--;){if(M===O||O!==null&&M===O.alternate){de=M;break t}M=de(M),O=de(O)}de=null}else de=null;Y!==null&&D0(J,B,Y,de,!1),ie!==null&&Fe!==null&&D0(J,Fe,ie,de,!0)}}e:{if(B=P?on(P):window,Y=B.nodeName&&B.nodeName.toLowerCase(),Y==="select"||Y==="input"&&B.type==="file")var De=Xm;else if(Km(B))if(Jm)De=sE;else{De=tE;var le=eE}else Y=B.nodeName,!Y||Y.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?P&&Pi(P.elementType)&&(De=Xm):De=nE;if(De&&(De=De(e,P))){Qm(J,De,i,K);break e}le&&le(e,B,P),e==="focusout"&&P&&B.type==="number"&&P.memoizedProps.value!=null&&cl(B,"number",B.value)}switch(le=P?on(P):window,e){case"focusin":(Km(le)||le.contentEditable==="true")&&(Ki=le,Th=P,El=null);break;case"focusout":El=Th=Ki=null;break;case"mousedown":Ah=!0;break;case"contextmenu":case"mouseup":case"dragend":Ah=!1,ag(J,i,K);break;case"selectionchange":if(iE)break;case"keydown":case"keyup":ag(J,i,K)}var ve;if(Ve)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Yi?ii(e,i)&&(Se="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Se="onCompositionStart");Se&&(gs&&i.locale!=="ko"&&(Yi||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Yi&&(ve=gl()):(hs=K,ml="value"in hs?hs.value:hs.textContent,Yi=!0)),le=Ju(P,Se),0<le.length&&(Se=new ms(Se,e,null,i,K),J.push({event:Se,listeners:le}),ve?Se.data=ve:(ve=qi(i),ve!==null&&(Se.data=ve)))),(ve=Tn?Jb(e,i):Zb(e,i))&&(Se=Ju(P,"onBeforeInput"),0<Se.length&&(le=new ms("onBeforeInput","beforeinput",null,i,K),J.push({event:le,listeners:Se}),le.data=ve)),HE(J,e,P,i,K)}C0(J,n)})}function Kl(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Ju(e,n){for(var i=n+"Capture",l=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Bn(e,i),h!=null&&l.unshift(Kl(e,h,f)),h=Bn(e,n),h!=null&&l.push(Kl(e,h,f))),e.tag===3)return l;e=e.return}return[]}function YE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function D0(e,n,i,l,h){for(var f=n._reactName,y=[];i!==null&&i!==l;){var b=i,R=b.alternate,P=b.stateNode;if(b=b.tag,R!==null&&R===l)break;b!==5&&b!==26&&b!==27||P===null||(R=P,h?(P=Bn(i,f),P!=null&&y.unshift(Kl(i,P,R))):h||(P=Bn(i,f),P!=null&&y.push(Kl(i,P,R)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var KE=/\r\n?/g,QE=/\u0000|\uFFFD/g;function O0(e){return(typeof e=="string"?e:""+e).replace(KE,`
`).replace(QE,"")}function V0(e,n){return n=O0(n),O0(e)===n}function Ge(e,n,i,l,h,f){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Wt(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Wt(e,""+l);break;case"className":un(e,"class",l);break;case"tabIndex":un(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":un(e,i,l);break;case"style":dl(e,l,f);break;case"data":if(n!=="object"){un(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ki(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&Ge(e,n,"name",h.name,h,null),Ge(e,n,"formEncType",h.formEncType,h,null),Ge(e,n,"formMethod",h.formMethod,h,null),Ge(e,n,"formTarget",h.formTarget,h,null)):(Ge(e,n,"encType",h.encType,h,null),Ge(e,n,"method",h.method,h,null),Ge(e,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ki(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=kn);break;case"onScroll":l!=null&&Ae("scroll",e);break;case"onScrollEnd":l!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=ki(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Li(e,"popover",l);break;case"xlinkActuate":gt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":gt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":gt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":gt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":gt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":gt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":gt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":gt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":gt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Li(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Jo.get(i)||i,Li(e,i,l))}}function Xd(e,n,i,l,h,f){switch(i){case"style":dl(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof l=="string"?Wt(e,l):(typeof l=="number"||typeof l=="bigint")&&Wt(e,""+l);break;case"onScroll":l!=null&&Ae("scroll",e);break;case"onScrollEnd":l!=null&&Ae("scrollend",e);break;case"onClick":l!=null&&(e.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),n=i.slice(2,h?i.length-7:void 0),f=e[It]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,l,h);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):Li(e,i,l)}}}function Lt(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var l=!1,h=!1,f;for(f in i)if(i.hasOwnProperty(f)){var y=i[f];if(y!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ge(e,n,f,y,i,null)}}h&&Ge(e,n,"srcSet",i.srcSet,i,null),l&&Ge(e,n,"src",i.src,i,null);return;case"input":Ae("invalid",e);var b=f=y=h=null,R=null,P=null;for(l in i)if(i.hasOwnProperty(l)){var K=i[l];if(K!=null)switch(l){case"name":h=K;break;case"type":y=K;break;case"checked":R=K;break;case"defaultChecked":P=K;break;case"value":f=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:Ge(e,n,l,K,i,null)}}Ko(e,f,b,R,P,y,h,!1);return;case"select":Ae("invalid",e),l=y=f=null;for(h in i)if(i.hasOwnProperty(h)&&(b=i[h],b!=null))switch(h){case"value":f=b;break;case"defaultValue":y=b;break;case"multiple":l=b;default:Ge(e,n,h,b,i,null)}n=f,i=y,e.multiple=!!l,n!=null?na(e,!!l,n,!1):i!=null&&na(e,!!l,i,!0);return;case"textarea":Ae("invalid",e),f=h=l=null;for(y in i)if(i.hasOwnProperty(y)&&(b=i[y],b!=null))switch(y){case"value":l=b;break;case"defaultValue":h=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:Ge(e,n,y,b,i,null)}sa(e,l,h,f);return;case"option":for(R in i)if(i.hasOwnProperty(R)&&(l=i[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ge(e,n,R,l,i,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(l=0;l<Yl.length;l++)Ae(Yl[l],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in i)if(i.hasOwnProperty(P)&&(l=i[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Ge(e,n,P,l,i,null)}return;default:if(Pi(n)){for(K in i)i.hasOwnProperty(K)&&(l=i[K],l!==void 0&&Xd(e,n,K,l,i,void 0));return}}for(b in i)i.hasOwnProperty(b)&&(l=i[b],l!=null&&Ge(e,n,b,l,i,null))}function XE(e,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,y=null,b=null,R=null,P=null,K=null;for(Y in i){var J=i[Y];if(i.hasOwnProperty(Y)&&J!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":R=J;default:l.hasOwnProperty(Y)||Ge(e,n,Y,null,l,J)}}for(var B in l){var Y=l[B];if(J=i[B],l.hasOwnProperty(B)&&(Y!=null||J!=null))switch(B){case"type":f=Y;break;case"name":h=Y;break;case"checked":P=Y;break;case"defaultChecked":K=Y;break;case"value":y=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,n));break;default:Y!==J&&Ge(e,n,B,Y,l,J)}}zi(e,y,b,R,P,K,f,h);return;case"select":Y=y=b=B=null;for(f in i)if(R=i[f],i.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":Y=R;default:l.hasOwnProperty(f)||Ge(e,n,f,null,l,R)}for(h in l)if(f=l[h],R=i[h],l.hasOwnProperty(h)&&(f!=null||R!=null))switch(h){case"value":B=f;break;case"defaultValue":b=f;break;case"multiple":y=f;default:f!==R&&Ge(e,n,h,f,l,R)}n=b,i=y,l=Y,B!=null?na(e,!!i,B,!1):!!l!=!!i&&(n!=null?na(e,!!i,n,!0):na(e,!!i,i?[]:"",!1));return;case"textarea":Y=B=null;for(b in i)if(h=i[b],i.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ge(e,n,b,null,l,h)}for(y in l)if(h=l[y],f=i[y],l.hasOwnProperty(y)&&(h!=null||f!=null))switch(y){case"value":B=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&Ge(e,n,y,h,l,f)}Qo(e,B,Y);return;case"option":for(var ie in i)if(B=i[ie],i.hasOwnProperty(ie)&&B!=null&&!l.hasOwnProperty(ie))switch(ie){case"selected":e.selected=!1;break;default:Ge(e,n,ie,null,l,B)}for(R in l)if(B=l[R],Y=i[R],l.hasOwnProperty(R)&&B!==Y&&(B!=null||Y!=null))switch(R){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Ge(e,n,R,B,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in i)B=i[de],i.hasOwnProperty(de)&&B!=null&&!l.hasOwnProperty(de)&&Ge(e,n,de,null,l,B);for(P in l)if(B=l[P],Y=i[P],l.hasOwnProperty(P)&&B!==Y&&(B!=null||Y!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:Ge(e,n,P,B,l,Y)}return;default:if(Pi(n)){for(var Fe in i)B=i[Fe],i.hasOwnProperty(Fe)&&B!==void 0&&!l.hasOwnProperty(Fe)&&Xd(e,n,Fe,void 0,l,B);for(K in l)B=l[K],Y=i[K],!l.hasOwnProperty(K)||B===Y||B===void 0&&Y===void 0||Xd(e,n,K,B,l,Y);return}}for(var M in i)B=i[M],i.hasOwnProperty(M)&&B!=null&&!l.hasOwnProperty(M)&&Ge(e,n,M,null,l,B);for(J in l)B=l[J],Y=i[J],!l.hasOwnProperty(J)||B===Y||B==null&&Y==null||Ge(e,n,J,B,l,Y)}function M0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JE(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var h=i[l],f=h.transferSize,y=h.initiatorType,b=h.duration;if(f&&b&&M0(y)){for(y=0,b=h.responseEnd,l+=1;l<i.length;l++){var R=i[l],P=R.startTime;if(P>b)break;var K=R.transferSize,J=R.initiatorType;K&&M0(J)&&(R=R.responseEnd,y+=K*(R<b?1:(b-P)/(R-P)))}if(--l,n+=8*(f+y)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Jd=null,Zd=null;function Zu(e){return e.nodeType===9?e:e.ownerDocument}function U0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function $d(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wd=null;function ZE(){var e=window.event;return e&&e.type==="popstate"?e===Wd?!1:(Wd=e,!0):(Wd=null,!1)}var z0=typeof setTimeout=="function"?setTimeout:void 0,$E=typeof clearTimeout=="function"?clearTimeout:void 0,P0=typeof Promise=="function"?Promise:void 0,WE=typeof queueMicrotask=="function"?queueMicrotask:typeof P0<"u"?function(e){return P0.resolve(null).then(e).catch(eT)}:z0;function eT(e){setTimeout(function(){throw e})}function Sa(e){return e==="head"}function k0(e,n){var i=n,l=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(h),vr(n);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")Ql(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Ql(i);for(var f=i.firstChild;f;){var y=f.nextSibling,b=f.nodeName;f[as]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=y}}else i==="body"&&Ql(e.ownerDocument.body);i=h}while(i);vr(n)}function B0(e,n){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function ef(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":ef(i),Ui(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function tT(e,n,i,l){for(;e.nodeType===1;){var h=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[as])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Cn(e.nextSibling),e===null)break}return null}function nT(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Cn(e.nextSibling),e===null))return null;return e}function H0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Cn(e.nextSibling),e===null))return null;return e}function tf(e){return e.data==="$?"||e.data==="$~"}function nf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function sT(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Cn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var sf=null;function G0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Cn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function F0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function q0(e,n,i){switch(n=Zu(i),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ql(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ui(e)}var jn=new Map,Y0=new Set;function $u(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fs=q.d;q.d={f:aT,r:iT,D:rT,C:lT,L:oT,m:uT,X:hT,S:cT,M:dT};function aT(){var e=Fs.f(),n=Gu();return e||n}function iT(e){var n=vn(e);n!==null&&n.tag===5&&n.type==="form"?up(n):Fs.r(e)}var yr=typeof document>"u"?null:document;function K0(e,n,i){var l=yr;if(l&&typeof n=="string"&&n){var h=$t(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),Y0.has(h)||(Y0.add(h),e={rel:e,crossOrigin:i,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),Lt(n,"link",e),mt(n),l.head.appendChild(n)))}}function rT(e){Fs.D(e),K0("dns-prefetch",e,null)}function lT(e,n){Fs.C(e,n),K0("preconnect",e,n)}function oT(e,n,i){Fs.L(e,n,i);var l=yr;if(l&&e&&n){var h='link[rel="preload"][as="'+$t(n)+'"]';n==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+$t(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+$t(i.imageSizes)+'"]')):h+='[href="'+$t(e)+'"]';var f=h;switch(n){case"style":f=_r(e);break;case"script":f=xr(e)}jn.has(f)||(e=T({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),jn.set(f,e),l.querySelector(h)!==null||n==="style"&&l.querySelector(Xl(f))||n==="script"&&l.querySelector(Jl(f))||(n=l.createElement("link"),Lt(n,"link",e),mt(n),l.head.appendChild(n)))}}function uT(e,n){Fs.m(e,n);var i=yr;if(i&&e){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+$t(l)+'"][href="'+$t(e)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xr(e)}if(!jn.has(f)&&(e=T({rel:"modulepreload",href:e},n),jn.set(f,e),i.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Jl(f)))return}l=i.createElement("link"),Lt(l,"link",e),mt(l),i.head.appendChild(l)}}}function cT(e,n,i){Fs.S(e,n,i);var l=yr;if(l&&e){var h=rs(l).hoistableStyles,f=_r(e);n=n||"default";var y=h.get(f);if(!y){var b={loading:0,preload:null};if(y=l.querySelector(Xl(f)))b.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},i),(i=jn.get(f))&&af(e,i);var R=y=l.createElement("link");mt(R),Lt(R,"link",e),R._p=new Promise(function(P,K){R.onload=P,R.onerror=K}),R.addEventListener("load",function(){b.loading|=1}),R.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Wu(y,n,l)}y={type:"stylesheet",instance:y,count:1,state:b},h.set(f,y)}}}function hT(e,n){Fs.X(e,n);var i=yr;if(i&&e){var l=rs(i).hoistableScripts,h=xr(e),f=l.get(h);f||(f=i.querySelector(Jl(h)),f||(e=T({src:e,async:!0},n),(n=jn.get(h))&&rf(e,n),f=i.createElement("script"),mt(f),Lt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function dT(e,n){Fs.M(e,n);var i=yr;if(i&&e){var l=rs(i).hoistableScripts,h=xr(e),f=l.get(h);f||(f=i.querySelector(Jl(h)),f||(e=T({src:e,async:!0,type:"module"},n),(n=jn.get(h))&&rf(e,n),f=i.createElement("script"),mt(f),Lt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Q0(e,n,i,l){var h=(h=_n.current)?$u(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=_r(i.href),i=rs(h).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=_r(i.href);var f=rs(h).hoistableStyles,y=f.get(e);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=h.querySelector(Xl(e)))&&!f._p&&(y.instance=f,y.state.loading=5),jn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},jn.set(e,i),f||fT(h,e,i,y.state))),n&&l===null)throw Error(r(528,""));return y}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xr(i),i=rs(h).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function _r(e){return'href="'+$t(e)+'"'}function Xl(e){return'link[rel="stylesheet"]['+e+"]"}function X0(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function fT(e,n,i,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Lt(n,"link",i),mt(n),e.head.appendChild(n))}function xr(e){return'[src="'+$t(e)+'"]'}function Jl(e){return"script[async]"+e}function J0(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+$t(i.href)+'"]');if(l)return n.instance=l,mt(l),l;var h=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),mt(l),Lt(l,"style",h),Wu(l,i.precedence,e),n.instance=l;case"stylesheet":h=_r(i.href);var f=e.querySelector(Xl(h));if(f)return n.state.loading|=4,n.instance=f,mt(f),f;l=X0(i),(h=jn.get(h))&&af(l,h),f=(e.ownerDocument||e).createElement("link"),mt(f);var y=f;return y._p=new Promise(function(b,R){y.onload=b,y.onerror=R}),Lt(f,"link",l),n.state.loading|=4,Wu(f,i.precedence,e),n.instance=f;case"script":return f=xr(i.src),(h=e.querySelector(Jl(f)))?(n.instance=h,mt(h),h):(l=i,(h=jn.get(f))&&(l=T({},i),rf(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),mt(h),Lt(h,"link",l),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Wu(l,i.precedence,e));return n.instance}function Wu(e,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,y=0;y<l.length;y++){var b=l[y];if(b.dataset.precedence===n)f=b;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function af(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function rf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ec=null;function Z0(e,n,i){if(ec===null){var l=new Map,h=ec=new Map;h.set(i,l)}else h=ec,l=h.get(i),l||(l=new Map,h.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),h=0;h<i.length;h++){var f=i[h];if(!(f[as]||f[ft]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=e+y;var b=l.get(y);b?b.push(f):l.set(y,[f])}}return l}function $0(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function mT(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function W0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function gT(e,n,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=_r(l.href),f=n.querySelector(Xl(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=tc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=f,mt(f);return}f=n.ownerDocument||n,l=X0(l),(h=jn.get(h))&&af(l,h),f=f.createElement("link"),mt(f);var y=f;y._p=new Promise(function(b,R){y.onload=b,y.onerror=R}),Lt(f,"link",l),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=tc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var lf=0;function pT(e,n){return e.stylesheets&&e.count===0&&sc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&sc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&lf===0&&(lf=62500*JE());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>lf?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function tc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var nc=null;function sc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,nc=new Map,n.forEach(yT,e),nc=null,tc.call(e))}function yT(e,n){if(!(n.state.loading&4)){var i=nc.get(e);if(i)var l=i.get(null);else{i=new Map,nc.set(e,i);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var y=h[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),l=y)}l&&i.set(null,l)}h=n.instance,y=h.getAttribute("data-precedence"),f=i.get(y)||l,f===l&&i.set(null,h),i.set(y,h),this.count++,l=tc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Zl={$$typeof:he,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function _T(e,n,i,l,h,f,y,b,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.hiddenUpdates=ns(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function ey(e,n,i,l,h,f,y,b,R,P,K,J){return e=new _T(e,n,i,y,R,P,K,J,b),n=1,f===!0&&(n|=24),f=hn(3,null,null,n),e.current=f,f.stateNode=e,n=Ph(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:n},Gh(f),e}function ty(e){return e?(e=Ji,e):Ji}function ny(e,n,i,l,h,f){h=ty(h),l.context===null?l.context=h:l.pendingContext=h,l=ga(n),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=pa(e,l,n),i!==null&&(an(i,e,n),Rl(i,e,n))}function sy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function of(e,n){sy(e,n),(e=e.alternate)&&sy(e,n)}function ay(e){if(e.tag===13||e.tag===31){var n=oi(e,67108864);n!==null&&an(n,e,67108864),of(e,67108864)}}function iy(e){if(e.tag===13||e.tag===31){var n=pn();n=Ja(n);var i=oi(e,n);i!==null&&an(i,e,n),of(e,n)}}var ac=!0;function xT(e,n,i,l){var h=Q.T;Q.T=null;var f=q.p;try{q.p=2,uf(e,n,i,l)}finally{q.p=f,Q.T=h}}function vT(e,n,i,l){var h=Q.T;Q.T=null;var f=q.p;try{q.p=8,uf(e,n,i,l)}finally{q.p=f,Q.T=h}}function uf(e,n,i,l){if(ac){var h=cf(l);if(h===null)Qd(e,n,l,ic,i),ly(e,l);else if(ET(h,e,n,i,l))l.stopPropagation();else if(ly(e,l),n&4&&-1<bT.indexOf(e)){for(;h!==null;){var f=vn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=es(f.pendingLanes);if(y!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;y;){var R=1<<31-rt(y);b.entanglements[1]|=R,y&=~R}xs(f),(Me&6)===0&&(Bu=Yt()+500,ql(0))}}break;case 31:case 13:b=oi(f,2),b!==null&&an(b,f,2),Gu(),of(f,2)}if(f=cf(l),f===null&&Qd(e,n,l,ic,i),f===h)break;h=f}h!==null&&l.stopPropagation()}else Qd(e,n,l,null,i)}}function cf(e){return e=bn(e),hf(e)}var ic=null;function hf(e){if(ic=null,e=is(e),e!==null){var n=d(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=m(n),e!==null)return e;e=null}else if(i===31){if(e=p(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ic=e,null}function ry(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ya()){case el:return 2;case tl:return 8;case ea:case ph:return 32;case Lo:return 268435456;default:return 32}default:return 32}}var df=!1,wa=null,Ia=null,Ra=null,$l=new Map,Wl=new Map,Ca=[],bT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ly(e,n){switch(e){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":$l.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(n.pointerId)}}function eo(e,n,i,l,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},n!==null&&(n=vn(n),n!==null&&ay(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function ET(e,n,i,l,h){switch(n){case"focusin":return wa=eo(wa,e,n,i,l,h),!0;case"dragenter":return Ia=eo(Ia,e,n,i,l,h),!0;case"mouseover":return Ra=eo(Ra,e,n,i,l,h),!0;case"pointerover":var f=h.pointerId;return $l.set(f,eo($l.get(f)||null,e,n,i,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Wl.set(f,eo(Wl.get(f)||null,e,n,i,l,h)),!0}return!1}function oy(e){var n=is(e.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){e.blockedOn=n,zn(e.priority,function(){iy(i)});return}}else if(n===31){if(n=p(i),n!==null){e.blockedOn=n,zn(e.priority,function(){iy(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=cf(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);fl=l,i.target.dispatchEvent(l),fl=null}else return n=vn(i),n!==null&&ay(n),e.blockedOn=i,!1;n.shift()}return!0}function uy(e,n,i){rc(e)&&i.delete(n)}function TT(){df=!1,wa!==null&&rc(wa)&&(wa=null),Ia!==null&&rc(Ia)&&(Ia=null),Ra!==null&&rc(Ra)&&(Ra=null),$l.forEach(uy),Wl.forEach(uy)}function lc(e,n){e.blockedOn===n&&(e.blockedOn=null,df||(df=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,TT)))}var oc=null;function cy(e){oc!==e&&(oc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){oc===e&&(oc=null);for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1],h=e[n+2];if(typeof l!="function"){if(hf(l||i)===null)continue;break}var f=vn(i);f!==null&&(e.splice(n,3),n-=3,ud(f,{pending:!0,data:h,method:i.method,action:l},l,h))}}))}function vr(e){function n(R){return lc(R,e)}wa!==null&&lc(wa,e),Ia!==null&&lc(Ia,e),Ra!==null&&lc(Ra,e),$l.forEach(n),Wl.forEach(n);for(var i=0;i<Ca.length;i++){var l=Ca[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ca.length&&(i=Ca[0],i.blockedOn===null);)oy(i),i.blockedOn===null&&Ca.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var h=i[l],f=i[l+1],y=h[It]||null;if(typeof f=="function")y||cy(i);else if(y){var b=null;if(f&&f.hasAttribute("formAction")){if(h=f,y=f[It]||null)b=y.formAction;else if(hf(h)!==null)continue}else b=y.action;typeof b=="function"?i[l+1]=b:(i.splice(l,3),l-=3),cy(i)}}}function hy(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function ff(e){this._internalRoot=e}uc.prototype.render=ff.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,l=pn();ny(i,l,e,n,null,null)},uc.prototype.unmount=ff.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ny(e.current,2,null,e,null,null),Gu(),n[ss]=null}};function uc(e){this._internalRoot=e}uc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Go();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Ca.length&&n!==0&&n<Ca[i].priority;i++);Ca.splice(i,0,e),i===0&&oy(e)}};var dy=t.version;if(dy!=="19.2.3")throw Error(r(527,dy,"19.2.3"));q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=v(n),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var AT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Un=cc.inject(AT),Dt=cc}catch{}}return so.createRoot=function(e,n){if(!o(e))throw Error(r(299));var i=!1,l="",h=xp,f=vp,y=bp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=ey(e,1,!1,null,null,i,l,null,h,f,y,hy),e[ss]=n.current,Kd(e),new ff(n)},so.hydrateRoot=function(e,n,i){if(!o(e))throw Error(r(299));var l=!1,h="",f=xp,y=vp,b=bp,R=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.formState!==void 0&&(R=i.formState)),n=ey(e,1,!0,n,i??null,l,h,R,f,y,b,hy),n.context=ty(null),i=n.current,l=pn(),l=Ja(l),h=ga(l),h.callback=null,pa(i,h,l),i=l,n.current.lanes=i,Qa(n,i),xs(n),e[ss]=n.current,Kd(e),new uc(n)},so.version="19.2.3",so}var Ey;function HA(){if(Ey)return vf.exports;Ey=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),vf.exports=BA(),vf.exports}var GA=HA();const FA=wT(GA),qA=({user:a,config:t,onLoginClick:s,onLogoutClick:r,onNavigate:o})=>{const[d,m]=Vx.useState(!1),p=v=>{o(v),["home","services","book-now"].includes(v)&&setTimeout(()=>{const E=document.getElementById(v);E?E.scrollIntoView({behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})},100),m(!1)},x=v=>{switch(v){case"home":return c.jsx(jT,{size:16,className:"mr-1"});case"products":return c.jsx(Ux,{size:16,className:"mr-1"});case"offers":return c.jsx(CT,{size:16,className:"mr-1"});case"book-now":return c.jsx(Cr,{size:16,className:"mr-1"});default:return null}};return c.jsxs("nav",{className:"bg-white shadow-md sticky top-0 z-50",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between h-16",children:[c.jsx("div",{className:"flex items-center cursor-pointer",onClick:()=>p("home"),children:t.logoImage?c.jsx("img",{src:t.logoImage,alt:t.logoText,className:"h-10 w-auto object-contain"}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`text-2xl font-bold ${t.logoColorClass}`,children:t.logoText.split(" ")[0]}),t.logoText.includes(" ")&&c.jsx("span",{className:"text-2xl font-bold text-gray-800 ml-1",children:t.logoText.split(" ").slice(1).join(" ")})]})}),c.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[t.navLinks.map(v=>c.jsxs("button",{onClick:()=>p(v.target),className:`${v.isSpecial?"text-orange-600 hover:text-orange-700 bg-orange-50 px-3 py-1 rounded-full font-bold":"text-gray-600 hover:text-blue-600 font-medium"} flex items-center transition`,children:[x(v.target)," ",v.label]},v.id)),a?c.jsxs("div",{className:"flex items-center space-x-4 ml-4 pl-4 border-l border-gray-200",children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:a.name}),c.jsx("button",{onClick:()=>p(a.role==="ADMIN"?"admin":"account"),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-medium transition",children:a.role==="ADMIN"?"Dashboard":"My Account"}),c.jsx("button",{onClick:r,className:"text-red-500 hover:text-red-700",title:"Logout",children:c.jsx(Mx,{size:20})})]}):c.jsxs("div",{className:"flex items-center space-x-4 ml-2",children:[c.jsxs("button",{onClick:s,className:"flex items-center text-gray-600 hover:text-blue-600 font-medium transition",children:[c.jsx(IT,{size:18,className:"mr-2"})," Login"]}),c.jsxs("a",{href:"tel:+919311252564",className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-full hover:bg-blue-700 transition shadow-sm",children:[c.jsx(em,{size:16,className:"mr-2"})," Call Now"]})]})]}),c.jsx("div",{className:"md:hidden flex items-center",children:c.jsx("button",{onClick:()=>m(!d),className:"text-gray-600",children:d?c.jsx(Gr,{size:28}):c.jsx(RT,{size:28})})})]})}),d&&c.jsxs("div",{className:"md:hidden bg-white border-t border-gray-100 py-2 shadow-lg",children:[t.navLinks.map(v=>c.jsx("button",{onClick:()=>p(v.target),className:`block w-full text-left px-4 py-3 border-b border-gray-100 ${v.isSpecial?"text-orange-600 font-bold bg-orange-50":"text-gray-700 hover:bg-gray-50"}`,children:v.label},v.id)),a?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>p(a.role==="ADMIN"?"admin":"account"),className:"block w-full text-left px-4 py-3 text-blue-600 font-medium hover:bg-gray-50",children:a.role==="ADMIN"?"Admin Dashboard":"My Account"}),c.jsxs("button",{onClick:r,className:"block w-full text-left px-4 py-3 text-red-600 font-medium hover:bg-gray-50",children:["Logout (",a.username,")"]})]}):c.jsx("button",{onClick:()=>{m(!1),s()},className:"block w-full text-left px-4 py-3 text-blue-600 font-bold hover:bg-gray-50",children:"Login / Sign Up"})]})]})};var Ft=(a=>(a.DTH="DTH Connection",a.BROADBAND="WiFi / Broadband",a))(Ft||{}),bt=(a=>(a.NEW="New",a.CONTACTED="Contacted",a.INTERESTED="Interested",a.INSTALLED="Installed",a.CANCELLED="Cancelled",a))(bt||{}),Vn=(a=>(a.TATA_PLAY="Tata Play",a.AIRTEL_DTH="Airtel Digital TV",a.DISH_TV="Dish TV",a.VIDEOCON_D2H="Videocon d2h",a.JIO_FIBER="Jio Fiber",a.AIRTEL_XSTREAM="Airtel Xstream",a.ACT_FIBERNET="ACT Fibernet",a.OTHER="Other",a))(Vn||{});const Tc=["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Pune","Jaipur","Lucknow"],Ir=[Vn.TATA_PLAY,Vn.AIRTEL_DTH,Vn.DISH_TV,Vn.VIDEOCON_D2H],Dc=[Vn.JIO_FIBER,Vn.AIRTEL_XSTREAM,Vn.ACT_FIBERNET,Vn.OTHER],Io=[{id:"lead-1",name:"Rahul Sharma",mobile:"9876543210",location:"Mumbai",serviceType:Ft.DTH,operator:Vn.TATA_PLAY,status:bt.NEW,source:"Website",createdAt:Date.now()-1e7},{id:"lead-2",name:"Priya Verma",mobile:"9988776655",location:"Delhi",serviceType:Ft.BROADBAND,operator:Vn.JIO_FIBER,status:bt.CONTACTED,source:"WhatsApp",createdAt:Date.now()-5e6},{id:"lead-3",name:"Amit Kumar",mobile:"8877665544",location:"Bangalore",serviceType:Ft.BROADBAND,operator:Vn.AIRTEL_XSTREAM,status:bt.INSTALLED,source:"Website",createdAt:Date.now()-2e7,orderId:"ORD-2024-001"}],Kc=[{id:"p1",title:"Tata Play HD Set Top Box",price:"1,499",originalPrice:"2,500",type:"DTH",features:["1 Month Pack Free","Free Installation","1 Year Warranty","Full HD 1080p"],image:"/products/tata-play-hd.png",color:"bg-pink-600",isBestSeller:!0},{id:"p2",title:"Airtel Digital TV HD Box",price:"1,299",originalPrice:"2,100",type:"DTH",features:["Free Installation","Standard Definition","Dolby Digital Sound","Record Support"],image:"/products/airtel-dtv-hd.png",color:"bg-red-600"},{id:"p3",title:"Dish TV HD Connection",price:"1,190",originalPrice:"1,999",type:"DTH",features:["Lifetime Warranty","50+ HD Channels","Stereo Sound","Next Day Installation"],image:"/products/dish-tv-hd.png",color:"bg-green-600"},{id:"p4",title:"Jio Fiber Postpaid",price:"399/mo",originalPrice:"699",type:"Broadband",features:["30 Mbps Speed","Free 4K Set Top Box","Unlimited Data","Free Voice Calls"],image:"/products/jio-fiber.png",color:"bg-blue-600",isBestSeller:!0},{id:"p5",title:"Airtel Xstream Fiber",price:"499/mo",originalPrice:"799",type:"Broadband",features:["40 Mbps Speed","Xstream Box Included","Unlimited Calls","WiFi Router Free"],image:"/products/airtel-xstream.png",color:"bg-red-700"},{id:"p6",title:"Videocon d2h HD",price:"1,350",originalPrice:"2,200",type:"DTH",features:["Gold Pack Free","Radio Channels","Mosaic Function","Active Services"],image:"/products/videocon-d2h.png",color:"bg-purple-600"}],Hx={logoText:"DTH Store",logoColorClass:"text-blue-600",logoImage:"",navLinks:[{id:"n1",label:"Home",target:"home"},{id:"n2",label:"Plans",target:"products"},{id:"n3",label:"Special Offers",target:"offers",isSpecial:!0},{id:"n4",label:"Contact",target:"book-now"}],heroSlides:[{id:"s1",image:"https://images.unsplash.com/photo-1593784991095-a205069470b6?q=80&w=2070&auto=format&fit=crop",title:"India's #1 DTH Service Provider",subtitle:"Get Tata Play, Airtel, Dish TV with Exclusive Offers.",cta:"Book Free Installation"},{id:"s2",image:"https://images.unsplash.com/photo-1544197150-b99a580bbcbf?q=80&w=2071&auto=format&fit=crop",title:"Super Fast WiFi Broadband",subtitle:"Fiber connection starting at just 399/month.",cta:"Check Availability"},{id:"s3",image:"https://images.unsplash.com/photo-1621944626154-7128148b8159?q=80&w=2070&auto=format&fit=crop",title:"Watch 4K & HD Channels",subtitle:"Upgrade your entertainment experience today.",cta:"Get Best Deal"}],specialOfferImages:{heroBackground:"https://images.unsplash.com/photo-1593305841991-05c29736f87e?q=80&w=2070&auto=format&fit=crop",sideImage:"https://images.unsplash.com/photo-1595935736128-db1f0a261963?q=80&w=2070&auto=format&fit=crop"}};var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oa,Gx;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,S){function N(){}N.prototype=S.prototype,D.F=S.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(V,C,U){for(var I=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)I[Ze-2]=arguments[Ze];return S.prototype[C].apply(V,I)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,N){N||(N=0);const V=Array(16);if(typeof S=="string")for(var C=0;C<16;++C)V[C]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(C=0;C<16;++C)V[C]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=D.g[0],N=D.g[1],C=D.g[2];let U=D.g[3],I;I=S+(U^N&(C^U))+V[0]+3614090360&4294967295,S=N+(I<<7&4294967295|I>>>25),I=U+(C^S&(N^C))+V[1]+3905402710&4294967295,U=S+(I<<12&4294967295|I>>>20),I=C+(N^U&(S^N))+V[2]+606105819&4294967295,C=U+(I<<17&4294967295|I>>>15),I=N+(S^C&(U^S))+V[3]+3250441966&4294967295,N=C+(I<<22&4294967295|I>>>10),I=S+(U^N&(C^U))+V[4]+4118548399&4294967295,S=N+(I<<7&4294967295|I>>>25),I=U+(C^S&(N^C))+V[5]+1200080426&4294967295,U=S+(I<<12&4294967295|I>>>20),I=C+(N^U&(S^N))+V[6]+2821735955&4294967295,C=U+(I<<17&4294967295|I>>>15),I=N+(S^C&(U^S))+V[7]+4249261313&4294967295,N=C+(I<<22&4294967295|I>>>10),I=S+(U^N&(C^U))+V[8]+1770035416&4294967295,S=N+(I<<7&4294967295|I>>>25),I=U+(C^S&(N^C))+V[9]+2336552879&4294967295,U=S+(I<<12&4294967295|I>>>20),I=C+(N^U&(S^N))+V[10]+4294925233&4294967295,C=U+(I<<17&4294967295|I>>>15),I=N+(S^C&(U^S))+V[11]+2304563134&4294967295,N=C+(I<<22&4294967295|I>>>10),I=S+(U^N&(C^U))+V[12]+1804603682&4294967295,S=N+(I<<7&4294967295|I>>>25),I=U+(C^S&(N^C))+V[13]+4254626195&4294967295,U=S+(I<<12&4294967295|I>>>20),I=C+(N^U&(S^N))+V[14]+2792965006&4294967295,C=U+(I<<17&4294967295|I>>>15),I=N+(S^C&(U^S))+V[15]+1236535329&4294967295,N=C+(I<<22&4294967295|I>>>10),I=S+(C^U&(N^C))+V[1]+4129170786&4294967295,S=N+(I<<5&4294967295|I>>>27),I=U+(N^C&(S^N))+V[6]+3225465664&4294967295,U=S+(I<<9&4294967295|I>>>23),I=C+(S^N&(U^S))+V[11]+643717713&4294967295,C=U+(I<<14&4294967295|I>>>18),I=N+(U^S&(C^U))+V[0]+3921069994&4294967295,N=C+(I<<20&4294967295|I>>>12),I=S+(C^U&(N^C))+V[5]+3593408605&4294967295,S=N+(I<<5&4294967295|I>>>27),I=U+(N^C&(S^N))+V[10]+38016083&4294967295,U=S+(I<<9&4294967295|I>>>23),I=C+(S^N&(U^S))+V[15]+3634488961&4294967295,C=U+(I<<14&4294967295|I>>>18),I=N+(U^S&(C^U))+V[4]+3889429448&4294967295,N=C+(I<<20&4294967295|I>>>12),I=S+(C^U&(N^C))+V[9]+568446438&4294967295,S=N+(I<<5&4294967295|I>>>27),I=U+(N^C&(S^N))+V[14]+3275163606&4294967295,U=S+(I<<9&4294967295|I>>>23),I=C+(S^N&(U^S))+V[3]+4107603335&4294967295,C=U+(I<<14&4294967295|I>>>18),I=N+(U^S&(C^U))+V[8]+1163531501&4294967295,N=C+(I<<20&4294967295|I>>>12),I=S+(C^U&(N^C))+V[13]+2850285829&4294967295,S=N+(I<<5&4294967295|I>>>27),I=U+(N^C&(S^N))+V[2]+4243563512&4294967295,U=S+(I<<9&4294967295|I>>>23),I=C+(S^N&(U^S))+V[7]+1735328473&4294967295,C=U+(I<<14&4294967295|I>>>18),I=N+(U^S&(C^U))+V[12]+2368359562&4294967295,N=C+(I<<20&4294967295|I>>>12),I=S+(N^C^U)+V[5]+4294588738&4294967295,S=N+(I<<4&4294967295|I>>>28),I=U+(S^N^C)+V[8]+2272392833&4294967295,U=S+(I<<11&4294967295|I>>>21),I=C+(U^S^N)+V[11]+1839030562&4294967295,C=U+(I<<16&4294967295|I>>>16),I=N+(C^U^S)+V[14]+4259657740&4294967295,N=C+(I<<23&4294967295|I>>>9),I=S+(N^C^U)+V[1]+2763975236&4294967295,S=N+(I<<4&4294967295|I>>>28),I=U+(S^N^C)+V[4]+1272893353&4294967295,U=S+(I<<11&4294967295|I>>>21),I=C+(U^S^N)+V[7]+4139469664&4294967295,C=U+(I<<16&4294967295|I>>>16),I=N+(C^U^S)+V[10]+3200236656&4294967295,N=C+(I<<23&4294967295|I>>>9),I=S+(N^C^U)+V[13]+681279174&4294967295,S=N+(I<<4&4294967295|I>>>28),I=U+(S^N^C)+V[0]+3936430074&4294967295,U=S+(I<<11&4294967295|I>>>21),I=C+(U^S^N)+V[3]+3572445317&4294967295,C=U+(I<<16&4294967295|I>>>16),I=N+(C^U^S)+V[6]+76029189&4294967295,N=C+(I<<23&4294967295|I>>>9),I=S+(N^C^U)+V[9]+3654602809&4294967295,S=N+(I<<4&4294967295|I>>>28),I=U+(S^N^C)+V[12]+3873151461&4294967295,U=S+(I<<11&4294967295|I>>>21),I=C+(U^S^N)+V[15]+530742520&4294967295,C=U+(I<<16&4294967295|I>>>16),I=N+(C^U^S)+V[2]+3299628645&4294967295,N=C+(I<<23&4294967295|I>>>9),I=S+(C^(N|~U))+V[0]+4096336452&4294967295,S=N+(I<<6&4294967295|I>>>26),I=U+(N^(S|~C))+V[7]+1126891415&4294967295,U=S+(I<<10&4294967295|I>>>22),I=C+(S^(U|~N))+V[14]+2878612391&4294967295,C=U+(I<<15&4294967295|I>>>17),I=N+(U^(C|~S))+V[5]+4237533241&4294967295,N=C+(I<<21&4294967295|I>>>11),I=S+(C^(N|~U))+V[12]+1700485571&4294967295,S=N+(I<<6&4294967295|I>>>26),I=U+(N^(S|~C))+V[3]+2399980690&4294967295,U=S+(I<<10&4294967295|I>>>22),I=C+(S^(U|~N))+V[10]+4293915773&4294967295,C=U+(I<<15&4294967295|I>>>17),I=N+(U^(C|~S))+V[1]+2240044497&4294967295,N=C+(I<<21&4294967295|I>>>11),I=S+(C^(N|~U))+V[8]+1873313359&4294967295,S=N+(I<<6&4294967295|I>>>26),I=U+(N^(S|~C))+V[15]+4264355552&4294967295,U=S+(I<<10&4294967295|I>>>22),I=C+(S^(U|~N))+V[6]+2734768916&4294967295,C=U+(I<<15&4294967295|I>>>17),I=N+(U^(C|~S))+V[13]+1309151649&4294967295,N=C+(I<<21&4294967295|I>>>11),I=S+(C^(N|~U))+V[4]+4149444226&4294967295,S=N+(I<<6&4294967295|I>>>26),I=U+(N^(S|~C))+V[11]+3174756917&4294967295,U=S+(I<<10&4294967295|I>>>22),I=C+(S^(U|~N))+V[2]+718787259&4294967295,C=U+(I<<15&4294967295|I>>>17),I=N+(U^(C|~S))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.v=function(D,S){S===void 0&&(S=D.length);const N=S-this.blockSize,V=this.C;let C=this.h,U=0;for(;U<S;){if(C==0)for(;U<=N;)o(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<S;)if(V[C++]=D.charCodeAt(U++),C==this.blockSize){o(this,V),C=0;break}}else for(;U<S;)if(V[C++]=D[U++],C==this.blockSize){o(this,V),C=0;break}}this.h=C,this.o+=S},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)D[S++]=this.g[N]>>>V&255;return D};function d(D,S){var N=p;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=S(D)}function m(D,S){this.h=S;const N=[];let V=!0;for(let C=D.length-1;C>=0;C--){const U=D[C]|0;V&&U==S||(N[C]=U,V=!1)}this.g=N}var p={};function x(D){return-128<=D&&D<128?d(D,function(S){return new m([S|0],S<0?-1:0)}):new m([D|0],D<0?-1:0)}function v(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return k(v(-D));const S=[];let N=1;for(let V=0;D>=N;V++)S[V]=D/N|0,N*=4294967296;return new m(S,0)}function E(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return k(E(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=v(Math.pow(S,8));let V=T;for(let U=0;U<D.length;U+=8){var C=Math.min(8,D.length-U);const I=parseInt(D.substring(U,U+C),S);C<8?(C=v(Math.pow(S,C)),V=V.j(C).add(v(I))):(V=V.j(N),V=V.add(v(I)))}return V}var T=x(0),w=x(1),j=x(16777216);a=m.prototype,a.m=function(){if(W(this))return-k(this).m();let D=0,S=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);D+=(V>=0?V:4294967296+V)*S,S*=4294967296}return D},a.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(F(this))return"0";if(W(this))return"-"+k(this).toString(D);const S=v(Math.pow(D,6));var N=this;let V="";for(;;){const C=xe(N,S).g;N=ne(N,C.j(S));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=C,F(N))return U+V;for(;U.length<6;)U="0"+U;V=U+V}},a.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function F(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function W(D){return D.h==-1}a.l=function(D){return D=ne(this,D),W(D)?-1:F(D)?0:1};function k(D){const S=D.g.length,N=[];for(let V=0;V<S;V++)N[V]=~D.g[V];return new m(N,~D.h).add(w)}a.abs=function(){return W(this)?k(this):this},a.add=function(D){const S=Math.max(this.g.length,D.g.length),N=[];let V=0;for(let C=0;C<=S;C++){let U=V+(this.i(C)&65535)+(D.i(C)&65535),I=(U>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);V=I>>>16,U&=65535,I&=65535,N[C]=I<<16|U}return new m(N,N[N.length-1]&-2147483648?-1:0)};function ne(D,S){return D.add(k(S))}a.j=function(D){if(F(this)||F(D))return T;if(W(this))return W(D)?k(this).j(k(D)):k(k(this).j(D));if(W(D))return k(this.j(k(D)));if(this.l(j)<0&&D.l(j)<0)return v(this.m()*D.m());const S=this.g.length+D.g.length,N=[];for(var V=0;V<2*S;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let C=0;C<D.g.length;C++){const U=this.i(V)>>>16,I=this.i(V)&65535,Ze=D.i(C)>>>16,$e=D.i(C)&65535;N[2*V+2*C]+=I*$e,ce(N,2*V+2*C),N[2*V+2*C+1]+=U*$e,ce(N,2*V+2*C+1),N[2*V+2*C+1]+=I*Ze,ce(N,2*V+2*C+1),N[2*V+2*C+2]+=U*Ze,ce(N,2*V+2*C+2)}for(D=0;D<S;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=S;D<2*S;D++)N[D]=0;return new m(N,0)};function ce(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function he(D,S){this.g=D,this.h=S}function xe(D,S){if(F(S))throw Error("division by zero");if(F(D))return new he(T,T);if(W(D))return S=xe(k(D),S),new he(k(S.g),k(S.h));if(W(S))return S=xe(D,k(S)),new he(k(S.g),S.h);if(D.g.length>30){if(W(D)||W(S))throw Error("slowDivide_ only works with positive integers.");for(var N=w,V=S;V.l(D)<=0;)N=Ue(N),V=Ue(V);var C=Ee(N,1),U=Ee(V,1);for(V=Ee(V,2),N=Ee(N,2);!F(V);){var I=U.add(V);I.l(D)<=0&&(C=C.add(N),U=I),V=Ee(V,1),N=Ee(N,1)}return S=ne(D,C.j(S)),new he(C,S)}for(C=T;D.l(S)>=0;){for(N=Math.max(1,Math.floor(D.m()/S.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),U=v(N),I=U.j(S);W(I)||I.l(D)>0;)N-=V,U=v(N),I=U.j(S);F(U)&&(U=w),C=C.add(U),D=ne(D,I)}return new he(C,D)}a.B=function(D){return xe(this,D).h},a.and=function(D){const S=Math.max(this.g.length,D.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)&D.i(V);return new m(N,this.h&D.h)},a.or=function(D){const S=Math.max(this.g.length,D.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)|D.i(V);return new m(N,this.h|D.h)},a.xor=function(D){const S=Math.max(this.g.length,D.g.length),N=[];for(let V=0;V<S;V++)N[V]=this.i(V)^D.i(V);return new m(N,this.h^D.h)};function Ue(D){const S=D.g.length+1,N=[];for(let V=0;V<S;V++)N[V]=D.i(V)<<1|D.i(V-1)>>>31;return new m(N,D.h)}function Ee(D,S){const N=S>>5;S%=32;const V=D.g.length-N,C=[];for(let U=0;U<V;U++)C[U]=S>0?D.i(U+N)>>>S|D.i(U+N+1)<<32-S:D.i(U+N);return new m(C,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Gx=r,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=v,m.fromString=E,Oa=m}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fx,lo,qx,Ac,Df,Yx,Kx,Qx;(function(){var a,t=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=s(this);function o(u,g){if(g)e:{var _=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in _))break e;_=_[L]}u=u[u.length-1],A=_[u],g=g(A),g!=A&&g!=null&&t(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&_.push([A,g[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function x(u,g,_){return u.call.apply(u.bind,arguments)}function v(u,g,_){return v=x,v.apply(null,arguments)}function E(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function T(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(A,L,G){for(var ee=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)ee[ye-2]=arguments[ye];return g.prototype[L].apply(A,ee)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function j(u){const g=u.length;if(g>0){const _=Array(g);for(let A=0;A<g;A++)_[A]=u[A];return _}return[]}function F(u,g){for(let A=1;A<arguments.length;A++){const L=arguments[A];var _=typeof L;if(_=_!="object"?_:L?Array.isArray(L)?"array":_:"null",_=="array"||_=="object"&&typeof L.length=="number"){_=u.length||0;const G=L.length||0;u.length=_+G;for(let ee=0;ee<G;ee++)u[_+ee]=L[ee]}else u.push(L)}}class W{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(u){m.setTimeout(()=>{throw u},0)}function ne(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ce{constructor(){this.h=this.g=null}add(g,_){const A=he.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var he=new W(()=>new xe,u=>u.reset());class xe{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Ee=!1,D=new ce,S=()=>{const u=Promise.resolve(void 0);Ue=()=>{u.then(N)}};function N(){for(var u;u=ne();){try{u.h.call(u.g)}catch(_){k(_)}var g=he;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ee=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function Ze(u,g){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(Ze,C),Ze.prototype.init=function(u,g){const _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),Q=0;function q(u,g,_,A,L){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=L,this.key=++Q,this.da=this.fa=!1}function H(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function te(u,g,_){for(const A in u)g.call(_,u[A],A,u)}function ge(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function Ye(u){const g={};for(const _ in u)g[_]=u[_];return g}const be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(u,g){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)u[_]=A[_];for(let G=0;G<be.length;G++)_=be[G],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function tt(u){this.src=u,this.g={},this.h=0}tt.prototype.add=function(u,g,_,A,L){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const ee=_n(u,g,A,L);return ee>-1?(g=u[ee],_||(g.fa=!1)):(g=new q(g,this.src,G,!!A,L),g.fa=_,u.push(g)),g};function Zt(u,g){const _=g.type;if(_ in u.g){var A=u.g[_],L=Array.prototype.indexOf.call(A,g,void 0),G;(G=L>=0)&&Array.prototype.splice.call(A,L,1),G&&(H(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function _n(u,g,_,A){for(let L=0;L<u.length;++L){const G=u[L];if(!G.da&&G.listener==g&&G.capture==!!_&&G.ha==A)return L}return-1}var Zs="closure_lm_"+(Math.random()*1e6|0),$s={};function Ns(u,g,_,A,L){if(Array.isArray(g)){for(let G=0;G<g.length;G++)Ns(u,g[G],_,A,L);return null}return _=Wr(_),u&&u[$e]?u.J(g,_,p(A)?!!A.capture:!1,L):Jr(u,g,_,!1,A,L)}function Jr(u,g,_,A,L,G){if(!g)throw Error("Invalid event type");const ee=p(L)?!!L.capture:!!L;let ye=qa(u);if(ye||(u[Zs]=ye=new tt(u)),_=ye.add(g,_,A,ee,G),_.proxy)return _;if(A=ji(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)U||(L=ee),L===void 0&&(L=!1),u.addEventListener(g.toString(),A,L);else if(u.attachEvent)u.attachEvent($n(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ji(){function u(_){return g.call(u.src,u.listener,_)}const g=Zr;return u}function Di(u,g,_,A,L){if(Array.isArray(g))for(var G=0;G<g.length;G++)Di(u,g[G],_,A,L);else A=p(A)?!!A.capture:!!A,_=Wr(_),u&&u[$e]?(u=u.i,G=String(g).toString(),G in u.g&&(g=u.g[G],_=_n(g,_,A,L),_>-1&&(H(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[G],u.h--)))):u&&(u=qa(u))&&(g=u.g[g.toString()],u=-1,g&&(u=_n(g,_,A,L)),(_=u>-1?g[u]:null)&&Oi(_))}function Oi(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[$e])Zt(g.i,u);else{var _=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(_,A,u.capture):g.detachEvent?g.detachEvent($n(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=qa(g))?(Zt(_,u),_.h==0&&(_.src=null,g[Zs]=null)):H(u)}}}function $n(u){return u in $s?$s[u]:$s[u]="on"+u}function Zr(u,g){if(u.da)u=!0;else{g=new Ze(g,this);const _=u.listener,A=u.ha||u.src;u.fa&&Oi(u),u=_.call(A,g)}return u}function qa(u){return u=u[Zs],u instanceof tt?u:null}var $r="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wr(u){return typeof u=="function"?u:(u[$r]||(u[$r]=function(g){return u.handleEvent(g)}),u[$r])}function ht(){V.call(this),this.i=new tt(this),this.M=this,this.G=null}T(ht,V),ht.prototype[$e]=!0,ht.prototype.removeEventListener=function(u,g,_,A){Di(this,u,g,_,A)};function At(u,g){var _,A=u.G;if(A)for(_=[];A;A=A.G)_.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new C(g,u);else if(g instanceof C)g.target=g.target||u;else{var L=g;g=new C(A,u),Re(g,L)}L=!0;let G,ee;if(_)for(ee=_.length-1;ee>=0;ee--)G=g.g=_[ee],L=Ws(G,A,!0,g)&&L;if(G=g.g=u,L=Ws(G,A,!0,g)&&L,L=Ws(G,A,!1,g)&&L,_)for(ee=0;ee<_.length;ee++)G=g.g=_[ee],L=Ws(G,A,!1,g)&&L}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let A=0;A<_.length;A++)H(_[A]);delete u.g[g],u.h--}}this.G=null},ht.prototype.J=function(u,g,_,A){return this.i.add(String(u),g,!1,_,A)},ht.prototype.K=function(u,g,_,A){return this.i.add(String(u),g,!0,_,A)};function Ws(u,g,_,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let G=0;G<g.length;++G){const ee=g[G];if(ee&&!ee.da&&ee.capture==_){const ye=ee.listener,lt=ee.ha||ee.src;ee.fa&&Zt(u.i,ee),L=ye.call(lt,A)!==!1&&L}}return L&&!A.defaultPrevented}function gh(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:m.setTimeout(u,g||0)}function Uo(u){u.g=gh(()=>{u.g=null,u.i&&(u.i=!1,Uo(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Yt extends V{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ya(u){V.call(this),this.h=u,this.g={}}T(Ya,V);var el=[];function tl(u){te(u.g,function(g,_){this.g.hasOwnProperty(_)&&Oi(g)},u),u.g={}}Ya.prototype.N=function(){Ya.Z.N.call(this),tl(this)},Ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ea=m.JSON.stringify,ph=m.JSON.parse,Lo=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function zo(){}function Po(){}var Un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){C.call(this,"d")}T(Dt,C);function xn(){C.call(this,"c")}T(xn,C);var rt={},ko=null;function Vi(){return ko=ko||new ht}rt.Ia="serverreachability";function Bo(u){C.call(this,rt.Ia,u)}T(Bo,C);function Wn(u){const g=Vi();At(g,new Bo(g))}rt.STAT_EVENT="statevent";function Ka(u,g){C.call(this,rt.STAT_EVENT,u),this.stat=g}T(Ka,C);function dt(u){const g=Vi();At(g,new Ka(g,u))}rt.Ja="timingevent";function es(u,g){C.call(this,rt.Ja,u),this.size=g}T(es,C);function ts(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function Ln(){this.g=!0}Ln.prototype.ua=function(){this.g=!1};function yh(u,g,_,A,L,G){u.info(function(){if(u.g)if(G){var ee="",ye=G.split("&");for(let Ve=0;Ve<ye.length;Ve++){var lt=ye[Ve].split("=");if(lt.length>1){const We=lt[0];lt=lt[1];const Tn=We.split("_");ee=Tn.length>=2&&Tn[1]=="type"?ee+(We+"="+lt+"&"):ee+(We+"=redacted&")}}}else ee=null;else ee=G;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+_+`
`+ee})}function Ho(u,g,_,A,L,G,ee){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+_+`
`+G+" "+ee})}function ns(u,g,_,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+_h(u,_)+(A?" "+A:"")})}function Qa(u,g){u.info(function(){return"TIMEOUT: "+g})}Ln.prototype.info=function(){};function _h(u,g){if(!u.g)return g;if(!g)return null;try{const G=JSON.parse(g);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var _=G[u];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ee=1;ee<A.length;ee++)A[ee]=""}}}}return ea(G)}catch{return g}}var Xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sl;function Ja(){}T(Ja,zo),Ja.prototype.g=function(){return new XMLHttpRequest},sl=new Ja;function Ss(u){return encodeURIComponent(String(u))}function Go(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function zn(u,g,_,A){this.j=u,this.i=g,this.l=_,this.S=A||1,this.V=new Ya(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pn}function Pn(){this.i=null,this.g="",this.h=!1}var ft={},It={};function ss(u,g,_){u.M=1,u.A=Za(gt(g)),u.u=_,u.R=!0,Mi(u,null)}function Mi(u,g){u.F=Date.now(),as(u),u.B=gt(u.A);var _=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Pi(_.i,"t",A),u.C=0,_=u.j.L,u.h=new Pn,u.g=au(u.j,_?g:null,!u.u),u.P>0&&(u.O=new Yt(v(u.Y,u,u.g),u.P)),g=u.V,_=u.g,A=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(el[0]=L.toString()),L=el);for(let G=0;G<L.length;G++){const ee=Ns(_,L[G],A||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=u.J?Ye(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Wn(),yh(u.i,u.v,u.B,u.l,u.S,u.u)}zn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Hn(u)==3?g.j():this.Y(u)},zn.prototype.Y=function(u){try{if(u==this.g)e:{const ye=Hn(this.g),lt=this.g.ya(),Ve=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Ot(this.g)))){this.K||ye!=4||lt==7||(lt==8||Ve<=0?Wn(3):Wn(2)),is(this);var g=this.g.ca();this.X=g;var _=xh(this);if(this.o=g==200,Ho(this.i,this.v,this.B,this.l,this.S,ye,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var G=A;break t}}G=null}if(u=G)ns(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rs(this,u);else{this.o=!1,this.m=3,dt(12),on(this),vn(this);break e}}if(this.R){u=!0;let We;for(;!this.K&&this.C<_.length;)if(We=qo(this,_),We==It){ye==4&&(this.m=4,dt(14),u=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(We==ft){this.m=4,dt(15),ns(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else ns(this.i,this.l,We,null),rs(this,We);if(Fo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||_.length!=0||this.h.h||(this.m=1,dt(16),u=!1),this.o=this.o&&u,!u)ns(this.i,this.l,_,"[Invalid Chunked Response]"),on(this),vn(this);else if(_.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),_l(ee),ee.P=!0,dt(11))}}else ns(this.i,this.l,_,null),rs(this,_);ye==4&&on(this),this.o&&!this.K&&(ye==4?eu(this.j,this):(this.o=!1,as(this)))}else Is(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),on(this),vn(this)}}}catch{}finally{}};function xh(u){if(!Fo(u))return u.g.la();const g=Ot(u.g);if(g==="")return"";let _="";const A=g.length,L=Hn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return on(u),vn(u),"";u.h.i=new m.TextDecoder}for(let G=0;G<A;G++)u.h.h=!0,_+=u.h.i.decode(g[G],{stream:!(L&&G==A-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function Fo(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function qo(u,g){var _=u.C,A=g.indexOf(`
`,_);return A==-1?It:(_=Number(g.substring(_,A)),isNaN(_)?ft:(A+=1,A+_>g.length?It:(g=g.slice(A,A+_),u.C=A+_,g)))}zn.prototype.cancel=function(){this.K=!0,on(this)};function as(u){u.T=Date.now()+u.H,Ui(u,u.H)}function Ui(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ts(v(u.aa,u),g)}function is(u){u.D&&(m.clearTimeout(u.D),u.D=null)}zn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Qa(this.i,this.B),this.M!=2&&(Wn(),dt(17)),on(this),this.m=2,vn(this)):Ui(this,this.T-u)};function vn(u){u.j.I==0||u.K||eu(u.j,u)}function on(u){is(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,tl(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function rs(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||os(_.h,u))){if(!u.L&&os(_.h,u)&&_.I==3){try{var A=_.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Fi(_),oa(_);else break e;ai(_),dt(18)}}else _.xa=L[1],0<_.xa-_.K&&L[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ts(v(_.Va,_),6e3));ls(_.h)<=1&&_.ta&&(_.ta=void 0)}else ms(_,11)}else if((u.L||_.g==u)&&Fi(_),!I(g))for(L=_.Ba.g.parse(g),g=0;g<L.length;g++){let Ve=L[g];const We=Ve[0];if(!(We<=_.K))if(_.K=We,Ve=Ve[1],_.I==2)if(Ve[0]=="c"){_.M=Ve[1],_.ba=Ve[2];const Tn=Ve[3];Tn!=null&&(_.ka=Tn,_.j.info("VER="+_.ka));const gs=Ve[4];gs!=null&&(_.za=gs,_.j.info("SVER="+_.za));const Gn=Ve[5];Gn!=null&&typeof Gn=="number"&&Gn>0&&(A=1.5*Gn,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Fn=u.g;if(Fn){const ii=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var G=A.h;G.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(rl(G,G.h),G.h=null))}if(A.G){const qi=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;qi&&(A.wa=qi,ze(A.J,A.G,qi))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var ee=u;if(A.na=su(A,A.L?A.ba:null,A.W),ee.L){ll(A.h,ee);var ye=ee,lt=A.O;lt&&(ye.H=lt),ye.D&&(is(ye),as(ye)),A.g=ee}else $o(A);_.i.length>0&&fs(_)}else Ve[0]!="stop"&&Ve[0]!="close"||ms(_,7);else _.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?ms(_,7):pl(_):Ve[0]!="noop"&&_.l&&_.l.qa(Ve),_.A=0)}}Wn(4)}catch{}}var mt=class{constructor(u,g){this.g=u,this.map=g}};function al(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function il(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ls(u){return u.h?1:u.g?u.g.size:0}function os(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function rl(u,g){u.g?u.g.add(g):u.h=g}function ll(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}al.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ol(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return j(u.i)}var Yo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Li(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const A=u[_].indexOf("=");let L,G=null;A>=0?(L=u[_].substring(0,A),G=u[_].substring(A+1)):L=u[_],g(L,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function un(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof un?(this.l=u.l,Rt(this,u.j),this.o=u.o,this.g=u.g,ta(this,u.u),this.h=u.h,ul(this,Jo(u.i)),this.m=u.m):u&&(g=String(u).match(Yo))?(this.l=!1,Rt(this,g[1]||"",!0),this.o=us(g[2]||""),this.g=us(g[3]||"",!0),ta(this,g[4]),this.h=us(g[5]||"",!0),ul(this,g[6]||"",!0),this.m=us(g[7]||"")):(this.l=!1,this.i=new sa(null,this.l))}un.prototype.toString=function(){const u=[];var g=this.j;g&&u.push($a(g,zi,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push($a(g,zi,!0),"@"),u.push(Ss(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push($a(_,_.charAt(0)=="/"?cl:Ko,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",$a(_,Qo)),u.join("")},un.prototype.resolve=function(u){const g=gt(this);let _=!!u.j;_?Rt(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var A=u.h;if(_)ta(g,u.u);else if(_=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=g.h.lastIndexOf("/");L!=-1&&(A=g.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const G=[];for(let ee=0;ee<L.length;){const ye=L[ee++];ye=="."?A&&ee==L.length&&G.push(""):ye==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&ee==L.length&&G.push("")):(G.push(ye),A=!0)}A=G.join("/")}else A=L}return _?g.h=A:_=u.i.toString()!=="",_?ul(g,Jo(u.i)):_=!!u.m,_&&(g.m=u.m),g};function gt(u){return new un(u)}function Rt(u,g,_){u.j=_?us(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ta(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ul(u,g,_){g instanceof sa?(u.i=g,ki(u.i,u.l)):(_||(g=$a(g,na)),u.i=new sa(g,u.l))}function ze(u,g,_){u.i.set(g,_)}function Za(u){return ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function us(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $a(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,$t),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $t(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zi=/[#\/\?@]/g,Ko=/[#\?:]/g,cl=/[#\?]/g,na=/[#\?@]/g,Qo=/#/g;function sa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Wt(u){u.g||(u.g=new Map,u.h=0,u.i&&Li(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}a=sa.prototype,a.add=function(u,g){Wt(this),this.i=null,u=aa(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function Xo(u,g){Wt(u),g=aa(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function hl(u,g){return Wt(u),g=aa(u,g),u.g.has(g)}a.forEach=function(u,g){Wt(this),this.g.forEach(function(_,A){_.forEach(function(L){u.call(g,L,A,this)},this)},this)};function dl(u,g){Wt(u);let _=[];if(typeof g=="string")hl(u,g)&&(_=_.concat(u.g.get(aa(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}a.set=function(u,g){return Wt(this),this.i=null,u=aa(this,u),hl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},a.get=function(u,g){return u?(u=dl(this,u),u.length>0?String(u[0]):g):g};function Pi(u,g,_){Xo(u,g),_.length>0&&(u.i=null,u.g.set(aa(u,g),j(_)),u.h+=_.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var _=g[A];const L=Ss(_);_=dl(this,_);for(let G=0;G<_.length;G++){let ee=L;_[G]!==""&&(ee+="="+Ss(_[G])),u.push(ee)}}return this.i=u.join("&")};function Jo(u){const g=new sa;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function aa(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ki(u,g){g&&!u.j&&(Wt(u),u.i=null,u.g.forEach(function(_,A){const L=A.toLowerCase();A!=L&&(Xo(this,A),Pi(this,L,_))},u)),u.j=g}function kn(u,g){const _=new Ln;if(m.Image){const A=new Image;A.onload=E(bn,_,"TestLoadImage: loaded",!0,g,A),A.onerror=E(bn,_,"TestLoadImage: error",!1,g,A),A.onabort=E(bn,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=E(bn,_,"TestLoadImage: timeout",!1,g,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function fl(u,g){const _=new Ln,A=new AbortController,L=setTimeout(()=>{A.abort(),bn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(G=>{clearTimeout(L),G.ok?bn(_,"TestPingServer: ok",!0,g):bn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),bn(_,"TestPingServer: error",!1,g)})}function bn(u,g,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function ia(){this.g=new Lo}function cs(u){this.i=u.Sb||null,this.h=u.ab||!1}T(cs,zo),cs.prototype.g=function(){return new Wa(this.i,this.h)};function Wa(u,g){ht.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Wa,ht),a=Wa.prototype,a.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Bn(this)},a.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||m).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},a.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bi(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bi(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}a.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ra(this):Bn(this),this.readyState==3&&Bi(this)}},a.Oa=function(u){this.g&&(this.response=this.responseText=u,ra(this))},a.Na=function(u){this.g&&(this.response=u,ra(this))},a.ga=function(){this.g&&ra(this)};function ra(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Bn(u)}a.setRequestHeader=function(u,g){this.A.append(u,g)},a.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Bn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function En(u){let g="";return te(u,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function ei(u,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=En(_),typeof u=="string"?_!=null&&Ss(_):ze(u,g,_))}function Be(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Be,ht);var hs=/^https?$/i,ml=["POST","PUT"];a=Be.prototype,a.Fa=function(u){this.H=u},a.ea=function(u,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sl.g(),this.g.onreadystatechange=w(v(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(G){ti(this,G);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())_.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),L=m.FormData&&u instanceof m.FormData,!(Array.prototype.indexOf.call(ml,g,void 0)>=0)||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ee]of _)this.g.setRequestHeader(G,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){ti(this,G)}};function ti(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,gl(u),ws(u)}function gl(u){u.A||(u.A=!0,At(u,"complete"),At(u,"error"))}a.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,At(this,"complete"),At(this,"abort"),ws(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ws(this,!0)),Be.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?ni(this):this.Xa())},a.Xa=function(){ni(this)};function ni(u){if(u.h&&typeof d<"u"){if(u.v&&Hn(u)==4)setTimeout(u.Ca.bind(u),0);else if(At(u,"readystatechange"),Hn(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=G===0){let ee=String(u.D).match(Yo)[1]||null;!ee&&m.self&&m.self.location&&(ee=m.self.location.protocol.slice(0,-1)),A=!hs.test(ee?ee.toLowerCase():"")}_=A}if(_)At(u,"complete"),At(u,"success");else{u.o=6;try{var L=Hn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",gl(u)}}finally{ws(u)}}}}function ws(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||At(u,"ready");try{_.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}a.ca=function(){try{return Hn(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ph(g)}};function Ot(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Is(u){const g={};u=(u.g&&Hn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(I(u[A]))continue;var _=Go(u[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=g[L]||[];g[L]=G,G.push(_)}ge(g,function(A){return A.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function la(u){this.za=0,this.i=[],this.j=new Ln,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ds("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ds("baseRetryDelayMs",5e3,u),this.Za=ds("retryDelaySeedMs",1e4,u),this.Ta=ds("forwardChannelMaxRetries",2,u),this.va=ds("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new al(u&&u.concurrentRequestLimit),this.Ba=new ia,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=la.prototype,a.ka=8,a.I=1,a.connect=function(u,g,_,A){dt(0),this.W=u,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=su(this,null,this.W),fs(this)};function pl(u){if(Hi(u),u.I==3){var g=u.V++,_=gt(u.J);if(ze(_,"SID",u.M),ze(_,"RID",g),ze(_,"TYPE","terminate"),si(u,_),g=new zn(u,u.j,g),g.M=2,g.A=Za(gt(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.A,_=!0),_||(g.g=au(g.j,null),g.g.ea(g.A)),g.F=Date.now(),as(g)}nu(u)}function oa(u){u.g&&(_l(u),u.g.cancel(),u.g=null)}function Hi(u){oa(u),u.v&&(m.clearTimeout(u.v),u.v=null),Fi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&m.clearTimeout(u.m),u.m=null)}function fs(u){if(!il(u.h)&&!u.m){u.m=!0;var g=u.Ea;Ue||S(),Ee||(Ue(),Ee=!0),D.add(g,u),u.D=0}}function Gi(u,g){return ls(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ts(v(u.Ea,u,g),tu(u,u.D)),u.D++,!0)}a.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new zn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=Ye(G),Re(G,this.U)):G=this.U),this.u!==null||this.R||(L.J=G,G=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Zo(this,L,g),_=gt(this.J),ze(_,"RID",u),ze(_,"CVER",22),this.G&&ze(_,"X-HTTP-Session-Id",this.G),si(this,_),G&&(this.R?g="headers="+Ss(En(G))+"&"+g:this.u&&ei(_,this.u,G)),rl(this.h,L),this.Ra&&ze(_,"TYPE","init"),this.S?(ze(_,"$req",g),ze(_,"SID","null"),L.U=!0,ss(L,_,null)):ss(L,_,g),this.I=2}}else this.I==3&&(u?yl(this,u):this.i.length==0||il(this.h)||yl(this))};function yl(u,g){var _;g?_=g.l:_=u.V++;const A=gt(u.J);ze(A,"SID",u.M),ze(A,"RID",_),ze(A,"AID",u.K),si(u,A),u.u&&u.o&&ei(A,u.u,u.o),_=new zn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Zo(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),rl(u.h,_),ss(_,A,g)}function si(u,g){u.H&&te(u.H,function(_,A){ze(g,A,_)}),u.l&&te({},function(_,A){ze(g,A,_)})}function Zo(u,g,_){_=Math.min(u.i.length,_);const A=u.l?v(u.l.Ka,u.l,u):null;e:{var L=u.i;let ye=-1;for(;;){const lt=["count="+_];ye==-1?_>0?(ye=L[0].g,lt.push("ofs="+ye)):ye=0:lt.push("ofs="+ye);let Ve=!0;for(let We=0;We<_;We++){var G=L[We].g;const Tn=L[We].map;if(G-=ye,G<0)ye=Math.max(0,L[We].g-100),Ve=!1;else try{G="req"+G+"_"||"";try{var ee=Tn instanceof Map?Tn:Object.entries(Tn);for(const[gs,Gn]of ee){let Fn=Gn;p(Gn)&&(Fn=ea(Gn)),lt.push(G+gs+"="+encodeURIComponent(Fn))}}catch(gs){throw lt.push(G+"type="+encodeURIComponent("_badmap")),gs}}catch{A&&A(Tn)}}if(Ve){ee=lt.join("&");break e}}ee=void 0}return u=u.i.splice(0,_),g.G=u,ee}function $o(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Ue||S(),Ee||(Ue(),Ee=!0),D.add(g,u),u.A=0}}function ai(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ts(v(u.Da,u),tu(u,u.A)),u.A++,!0)}a.Da=function(){if(this.v=null,Wo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ts(v(this.Wa,this),u)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),oa(this),Wo(this))};function _l(u){u.B!=null&&(m.clearTimeout(u.B),u.B=null)}function Wo(u){u.g=new zn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=gt(u.na);ze(g,"RID","rpc"),ze(g,"SID",u.M),ze(g,"AID",u.K),ze(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ze(g,"TO",u.ia),ze(g,"TYPE","xmlhttp"),si(u,g),u.u&&u.o&&ei(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Za(gt(g)),_.u=null,_.R=!0,Mi(_,u)}a.Va=function(){this.C!=null&&(this.C=null,oa(this),ai(this),dt(19))};function Fi(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function eu(u,g){var _=null;if(u.g==g){Fi(u),_l(u),u.g=null;var A=2}else if(os(u.h,g))_=g.G,ll(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;A=Vi(),At(A,new es(A,_)),fs(u)}else $o(u);else if(L=g.m,L==3||L==0&&g.X>0||!(A==1&&Gi(u,g)||A==2&&ai(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),L){case 1:ms(u,5);break;case 4:ms(u,10);break;case 3:ms(u,6);break;default:ms(u,2)}}}function tu(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function ms(u,g){if(u.j.info("Error code "+g),g==2){var _=v(u.bb,u),A=u.Ua;const L=!A;A=new un(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Rt(A,"https"),Za(A),L?kn(A.toString(),_):fl(A.toString(),_)}else dt(2);u.I=0,u.l&&u.l.pa(g),nu(u),Hi(u)}a.bb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function nu(u){if(u.I=0,u.ja=[],u.l){const g=ol(u.h);(g.length!=0||u.i.length!=0)&&(F(u.ja,g),F(u.ja,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.oa()}}function su(u,g,_){var A=_ instanceof un?gt(_):new un(_);if(A.g!="")g&&(A.g=g+"."+A.g),ta(A,A.u);else{var L=m.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const G=new un(null);A&&Rt(G,A),g&&(G.g=g),L&&ta(G,L),_&&(G.h=_),A=G}return _=u.G,g=u.wa,_&&g&&ze(A,_,g),ze(A,"VER",u.ka),si(u,A),A}function au(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Be(new cs({ab:_})):new Be(u.ma),g.Fa(u.L),g}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}a=iu.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function ua(){}ua.prototype.g=function(u,g){return new Kt(u,g)};function Kt(u,g){ht.call(this),this.g=new la(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Rs(this)}T(Kt,ht),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){pl(this.g)},Kt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=ea(u),u=_);g.i.push(new mt(g.Ya++,u)),g.I==3&&fs(g)},Kt.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,Kt.Z.N.call(this)};function ru(u){Dt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(ru,Dt);function lu(){xn.call(this),this.status=1}T(lu,xn);function Rs(u){this.g=u}T(Rs,iu),Rs.prototype.ra=function(){At(this.g,"a")},Rs.prototype.qa=function(u){At(this.g,new ru(u))},Rs.prototype.pa=function(u){At(this.g,new lu)},Rs.prototype.oa=function(){At(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,Qx=function(){return new ua},Kx=function(){return Vi()},Yx=rt,Df={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xa.NO_ERROR=0,Xa.TIMEOUT=8,Xa.HTTP_ERROR=6,Ac=Xa,nl.COMPLETE="complete",qx=nl,Po.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",ht.prototype.listen=ht.prototype.J,lo=Po,Be.prototype.listenOnce=Be.prototype.K,Be.prototype.getLastError=Be.prototype.Ha,Be.prototype.getLastErrorCode=Be.prototype.ya,Be.prototype.getStatus=Be.prototype.ca,Be.prototype.getResponseJson=Be.prototype.La,Be.prototype.getResponseText=Be.prototype.la,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Fa,Fx=Be}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fr="12.8.0";function YA(a){Fr=a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new gA("@firebase/firestore");function Er(){return Ti.logLevel}function ae(a,...t){if(Ti.logLevel<=qs.DEBUG){const s=t.map(rm);Ti.debug(`Firestore (${Fr}): ${a}`,...s)}}function Ks(a,...t){if(Ti.logLevel<=qs.ERROR){const s=t.map(rm);Ti.error(`Firestore (${Fr}): ${a}`,...s)}}function Ur(a,...t){if(Ti.logLevel<=qs.WARN){const s=t.map(rm);Ti.warn(`Firestore (${Fr}): ${a}`,...s)}}function rm(a){if(typeof a=="string")return a;try{return(function(s){return JSON.stringify(s)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(a,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,Xx(a,r,s)}function Xx(a,t,s){let r=`FIRESTORE (${Fr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${a.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Ks(r),new Error(r)}function Le(a,t,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,a||Xx(t,o,r)}function pe(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends yA{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class KA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(Gt.UNAUTHENTICATED)))}shutdown(){}}class QA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class XA{constructor(t){this.t=t,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){Le(this.o===void 0,42304);let r=this.i;const o=x=>this.i!==r?(r=this.i,s(x)):Promise.resolve();let d=new Va;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Va,t.enqueueRetryable((()=>o(this.currentUser)))};const m=()=>{const x=d;t.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},p=x=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((x=>p(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?p(x):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Va)}}),0),m()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==t?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new Jx(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Le(t===null||typeof t=="string",2055,{h:t}),new Gt(t)}}class JA{constructor(t,s,r){this.P=t,this.T=s,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ZA{constructor(t,s,r){this.P=t,this.T=s,this.I=r}getToken(){return Promise.resolve(new JA(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ay{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $A{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pA(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){Le(this.o===void 0,3512);const r=d=>{d.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.m;return this.m=d.token,ae("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable((()=>r(d)))};const o=d=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ay(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(Le(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Ay(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let r=0;r<a;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=WA(40);for(let d=0;d<o.length;++d)r.length<20&&o[d]<s&&(r+=t.charAt(o[d]%62))}return r}}function we(a,t){return a<t?-1:a>t?1:0}function Of(a,t){const s=Math.min(a.length,t.length);for(let r=0;r<s;r++){const o=a.charAt(r),d=t.charAt(r);if(o!==d)return Tf(o)===Tf(d)?we(o,d):Tf(o)?1:-1}return we(a.length,t.length)}const eN=55296,tN=57343;function Tf(a){const t=a.charCodeAt(0);return t>=eN&&t<=tN}function Lr(a,t,s){return a.length===t.length&&a.every(((r,o)=>s(r,t[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="__name__";class vs{constructor(t,s,r){s===void 0?s=0:s>t.length&&fe(637,{offset:s,range:t.length}),r===void 0?r=t.length-s:r>t.length-s&&fe(1746,{length:r,range:t.length-s}),this.segments=t,this.offset=s,this.len=r}get length(){return this.len}isEqual(t){return vs.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof vs?t.forEach((r=>{s.push(r)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,r=this.limit();s<r;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const r=Math.min(t.length,s.length);for(let o=0;o<r;o++){const d=vs.compareSegments(t.get(o),s.get(o));if(d!==0)return d}return we(t.length,s.length)}static compareSegments(t,s){const r=vs.isNumericId(t),o=vs.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?vs.extractNumericId(t).compare(vs.extractNumericId(s)):Of(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Oa.fromString(t.substring(4,t.length-2))}}class Ke extends vs{construct(t,s,r){return new Ke(t,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const r of t){if(r.indexOf("//")>=0)throw new se(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new Ke(s)}static emptyPath(){return new Ke([])}}const nN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends vs{construct(t,s,r){return new Pt(t,s,r)}static isValidIdentifier(t){return nN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ny}static keyField(){return new Pt([Ny])}static fromServerFormat(t){const s=[];let r="",o=0;const d=()=>{if(r.length===0)throw new se(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let m=!1;for(;o<t.length;){const p=t[o];if(p==="\\"){if(o+1===t.length)throw new se(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const x=t[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new se(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=x,o+=2}else p==="`"?(m=!m,o++):p!=="."||m?(r+=p,o++):(d(),o++)}if(d(),m)throw new se(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pt(s)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.path=t}static fromPath(t){return new ue(Ke.fromString(t))}static fromName(t){return new ue(Ke.fromString(t).popFirst(5))}static empty(){return new ue(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ke.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return Ke.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ue(new Ke(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(a,t,s){if(!s)throw new se(Z.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function sN(a,t,s,r){if(t===!0&&r===!0)throw new se(Z.INVALID_ARGUMENT,`${a} and ${s} cannot be used together.`)}function Sy(a){if(!ue.isDocumentKey(a))throw new se(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function wy(a){if(ue.isDocumentKey(a))throw new se(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function $x(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Qc(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":fe(12329,{type:typeof a})}function Ai(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new se(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Qc(a);throw new se(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(a,t){const s={typeString:a};return t&&(s.value=t),s}function Ro(a,t){if(!$x(a))throw new se(Z.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in t)if(t[r]){const o=t[r].typeString,d="value"in t[r]?{value:t[r].value}:void 0;if(!(r in a)){s=`JSON missing required field: '${r}'`;break}const m=a[r];if(o&&typeof m!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(d!==void 0&&m!==d.value){s=`Expected '${r}' field to equal '${d.value}'`;break}}if(s)throw new se(Z.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-62135596800,Ry=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(t){return Je.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),r=Math.floor((t-1e3*s)*Ry);return new Je(s,r)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new se(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new se(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<Iy)throw new se(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new se(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ry}_compareTo(t){return this.seconds===t.seconds?we(this.nanoseconds,t.nanoseconds):we(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ro(t,Je._jsonSchema))return new Je(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Iy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Tt("string",Je._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(t){return new me(t)}static min(){return new me(new Je(0,0))}static max(){return new me(new Je(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=-1;function aN(a,t){const s=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,o=me.fromTimestamp(r===1e9?new Je(s+1,0):new Je(s,r));return new Ua(o,ue.empty(),t)}function iN(a){return new Ua(a.readTime,a.key,vo)}class Ua{constructor(t,s,r){this.readTime=t,this.documentKey=s,this.largestBatchId=r}static min(){return new Ua(me.min(),ue.empty(),vo)}static max(){return new Ua(me.max(),ue.empty(),vo)}}function rN(a,t){let s=a.readTime.compareTo(t.readTime);return s!==0?s:(s=ue.comparator(a.documentKey,t.documentKey),s!==0?s:we(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(a){if(a.code!==Z.FAILED_PRECONDITION||a.message!==lN)throw a;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new $(((r,o)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(r,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(r,o)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof $?s:$.resolve(s)}catch(s){return $.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):$.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):$.reject(s)}static resolve(t){return new $(((s,r)=>{s(t)}))}static reject(t){return new $(((s,r)=>{r(t)}))}static waitFor(t){return new $(((s,r)=>{let o=0,d=0,m=!1;t.forEach((p=>{++o,p.next((()=>{++d,m&&d===o&&s()}),(x=>r(x)))})),m=!0,d===o&&s()}))}static or(t){let s=$.resolve(!1);for(const r of t)s=s.next((o=>o?$.resolve(o):r()));return s}static forEach(t,s){const r=[];return t.forEach(((o,d)=>{r.push(s.call(this,o,d))})),this.waitFor(r)}static mapArray(t,s){return new $(((r,o)=>{const d=t.length,m=new Array(d);let p=0;for(let x=0;x<d;x++){const v=x;s(t[v]).next((E=>{m[v]=E,++p,p===d&&r(m)}),(E=>o(E)))}}))}static doWhile(t,s){return new $(((r,o)=>{const d=()=>{t()===!0?s().next((()=>{d()}),o):r()};d()}))}}function uN(a){const t=a.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Yr(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=-1;function Jc(a){return a==null}function Oc(a){return a===0&&1/a==-1/0}function cN(a){return typeof a=="number"&&Number.isInteger(a)&&!Oc(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="";function hN(a){let t="";for(let s=0;s<a.length;s++)t.length>0&&(t=Cy(t)),t=dN(a.get(s),t);return Cy(t)}function dN(a,t){let s=t;const r=a.length;for(let o=0;o<r;o++){const d=a.charAt(o);switch(d){case"\0":s+="";break;case Wx:s+="";break;default:s+=d}}return s}function Cy(a){return a+Wx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(a){let t=0;for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&t++;return t}function Ga(a,t){for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&t(s,a[s])}function ev(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t,s){this.comparator=t,this.root=s||zt.EMPTY}insert(t,s){return new st(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(t){return new st(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zt.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(t){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,r)=>(t(s,r),!1)))}toString(){const t=[];return this.inorderTraversal(((s,r)=>(t.push(`${s}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new dc(this.root,t,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new dc(this.root,t,this.comparator,!0)}}class dc{constructor(t,s,r,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=s?r(t.key,s):1,s&&o&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(d===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zt{constructor(t,s,r,o,d){this.key=t,this.value=s,this.color=r??zt.RED,this.left=o??zt.EMPTY,this.right=d??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,r,o,d){return new zt(t??this.key,s??this.value,r??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,r){let o=this;const d=r(t,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(t,s,r),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(t,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let r,o=this;if(s(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(t,o.key)===0){if(o.right.isEmpty())return zt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw fe(27949);return t+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(t,s,r,o,d){return this}insert(t,s,r){return new zt(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.comparator=t,this.data=new st(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,r)=>(t(s),!1)))}forEachInRange(t,s){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;s(o.key)}}forEachWhile(t,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new Dy(this.data.getIterator())}getIteratorFrom(t){return new Dy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((r=>{s=s.add(r)})),s}isEqual(t){if(!(t instanceof wt)||this.size!==t.size)return!1;const s=this.data.getIterator(),r=t.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new wt(this.comparator);return s.data=t,s}}class Dy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.fields=t,t.sort(Pt.comparator)}static empty(){return new yn([])}unionWith(t){let s=new wt(Pt.comparator);for(const r of this.fields)s=s.add(r);for(const r of t)s=s.add(r);return new yn(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Lr(this.fields,t.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new tv("Invalid base64 string: "+d):d}})(t);return new kt(s)}static fromUint8Array(t){const s=(function(o){let d="";for(let m=0;m<o.length;++m)d+=String.fromCharCode(o[m]);return d})(t);return new kt(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return we(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const fN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(a){if(Le(!!a,39018),typeof a=="string"){let t=0;const s=fN.exec(a);if(Le(!!s,46558,{timestamp:a}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ct(a.seconds),nanos:ct(a.nanos)}}function ct(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function za(a){return typeof a=="string"?kt.fromBase64String(a):kt.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="server_timestamp",sv="__type__",av="__previous_value__",iv="__local_write_time__";function um(a){return(a?.mapValue?.fields||{})[sv]?.stringValue===nv}function Zc(a){const t=a.mapValue.fields[av];return um(t)?Zc(t):t}function bo(a){const t=La(a.mapValue.fields[iv].timestampValue);return new Je(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(t,s,r,o,d,m,p,x,v,E,T){this.databaseId=t,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=p,this.longPollingOptions=x,this.useFetchStreams=v,this.isUsingEmulator=E,this.apiKey=T}}const Vc="(default)";class Eo{constructor(t,s){this.projectId=t,this.database=s||Vc}static empty(){return new Eo("","")}get isDefaultDatabase(){return this.database===Vc}isEqual(t){return t instanceof Eo&&t.projectId===this.projectId&&t.database===this.database}}function gN(a,t){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new se(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eo(a.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="__type__",pN="__max__",fc={mapValue:{}},lv="__vector__",Mc="value";function Pa(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?um(a)?4:_N(a)?9007199254740991:yN(a)?10:11:fe(28295,{value:a})}function As(a,t){if(a===t)return!0;const s=Pa(a);if(s!==Pa(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return bo(a).isEqual(bo(t));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const m=La(o.timestampValue),p=La(d.timestampValue);return m.seconds===p.seconds&&m.nanos===p.nanos})(a,t);case 5:return a.stringValue===t.stringValue;case 6:return(function(o,d){return za(o.bytesValue).isEqual(za(d.bytesValue))})(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return(function(o,d){return ct(o.geoPointValue.latitude)===ct(d.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(d.geoPointValue.longitude)})(a,t);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return ct(o.integerValue)===ct(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const m=ct(o.doubleValue),p=ct(d.doubleValue);return m===p?Oc(m)===Oc(p):isNaN(m)&&isNaN(p)}return!1})(a,t);case 9:return Lr(a.arrayValue.values||[],t.arrayValue.values||[],As);case 10:case 11:return(function(o,d){const m=o.mapValue.fields||{},p=d.mapValue.fields||{};if(jy(m)!==jy(p))return!1;for(const x in m)if(m.hasOwnProperty(x)&&(p[x]===void 0||!As(m[x],p[x])))return!1;return!0})(a,t);default:return fe(52216,{left:a})}}function To(a,t){return(a.values||[]).find((s=>As(s,t)))!==void 0}function zr(a,t){if(a===t)return 0;const s=Pa(a),r=Pa(t);if(s!==r)return we(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return we(a.booleanValue,t.booleanValue);case 2:return(function(d,m){const p=ct(d.integerValue||d.doubleValue),x=ct(m.integerValue||m.doubleValue);return p<x?-1:p>x?1:p===x?0:isNaN(p)?isNaN(x)?0:-1:1})(a,t);case 3:return Oy(a.timestampValue,t.timestampValue);case 4:return Oy(bo(a),bo(t));case 5:return Of(a.stringValue,t.stringValue);case 6:return(function(d,m){const p=za(d),x=za(m);return p.compareTo(x)})(a.bytesValue,t.bytesValue);case 7:return(function(d,m){const p=d.split("/"),x=m.split("/");for(let v=0;v<p.length&&v<x.length;v++){const E=we(p[v],x[v]);if(E!==0)return E}return we(p.length,x.length)})(a.referenceValue,t.referenceValue);case 8:return(function(d,m){const p=we(ct(d.latitude),ct(m.latitude));return p!==0?p:we(ct(d.longitude),ct(m.longitude))})(a.geoPointValue,t.geoPointValue);case 9:return Vy(a.arrayValue,t.arrayValue);case 10:return(function(d,m){const p=d.fields||{},x=m.fields||{},v=p[Mc]?.arrayValue,E=x[Mc]?.arrayValue,T=we(v?.values?.length||0,E?.values?.length||0);return T!==0?T:Vy(v,E)})(a.mapValue,t.mapValue);case 11:return(function(d,m){if(d===fc.mapValue&&m===fc.mapValue)return 0;if(d===fc.mapValue)return 1;if(m===fc.mapValue)return-1;const p=d.fields||{},x=Object.keys(p),v=m.fields||{},E=Object.keys(v);x.sort(),E.sort();for(let T=0;T<x.length&&T<E.length;++T){const w=Of(x[T],E[T]);if(w!==0)return w;const j=zr(p[x[T]],v[E[T]]);if(j!==0)return j}return we(x.length,E.length)})(a.mapValue,t.mapValue);default:throw fe(23264,{he:s})}}function Oy(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return we(a,t);const s=La(a),r=La(t),o=we(s.seconds,r.seconds);return o!==0?o:we(s.nanos,r.nanos)}function Vy(a,t){const s=a.values||[],r=t.values||[];for(let o=0;o<s.length&&o<r.length;++o){const d=zr(s[o],r[o]);if(d)return d}return we(s.length,r.length)}function Pr(a){return Vf(a)}function Vf(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(s){const r=La(s);return`time(${r.seconds},${r.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(s){return za(s).toBase64()})(a.bytesValue):"referenceValue"in a?(function(s){return ue.fromName(s).toString()})(a.referenceValue):"geoPointValue"in a?(function(s){return`geo(${s.latitude},${s.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(s){let r="[",o=!0;for(const d of s.values||[])o?o=!1:r+=",",r+=Vf(d);return r+"]"})(a.arrayValue):"mapValue"in a?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const m of r)d?d=!1:o+=",",o+=`${m}:${Vf(s.fields[m])}`;return o+"}"})(a.mapValue):fe(61005,{value:a})}function Nc(a){switch(Pa(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Zc(a);return t?16+Nc(t):16;case 5:return 2*a.stringValue.length;case 6:return za(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,d)=>o+Nc(d)),0)})(a.arrayValue);case 10:case 11:return(function(r){let o=0;return Ga(r.fields,((d,m)=>{o+=d.length+Nc(m)})),o})(a.mapValue);default:throw fe(13486,{value:a})}}function My(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function Mf(a){return!!a&&"integerValue"in a}function cm(a){return!!a&&"arrayValue"in a}function Uy(a){return!!a&&"nullValue"in a}function Ly(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Sc(a){return!!a&&"mapValue"in a}function yN(a){return(a?.mapValue?.fields||{})[rv]?.stringValue===lv}function fo(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const t={mapValue:{fields:{}}};return Ga(a.mapValue.fields,((s,r)=>t.mapValue.fields[s]=fo(r))),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(a.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=fo(a.arrayValue.values[s]);return t}return{...a}}function _N(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===pN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.value=t}static empty(){return new ln({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let r=0;r<t.length-1;++r)if(s=(s.mapValue.fields||{})[t.get(r)],!Sc(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=fo(s)}setAll(t){let s=Pt.emptyPath(),r={},o=[];t.forEach(((m,p)=>{if(!s.isImmediateParentOf(p)){const x=this.getFieldsMap(s);this.applyChanges(x,r,o),r={},o=[],s=p.popLast()}m?r[p.lastSegment()]=fo(m):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,r,o)}delete(t){const s=this.field(t.popLast());Sc(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return As(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=s.mapValue.fields[t.get(r)];Sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[t.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(t,s,r){Ga(s,((o,d)=>t[o]=d));for(const o of r)delete t[o]}clone(){return new ln(fo(this.value))}}function ov(a){const t=[];return Ga(a.fields,((s,r)=>{const o=new Pt([s]);if(Sc(r)){const d=ov(r.mapValue).fields;if(d.length===0)t.push(o);else for(const m of d)t.push(o.child(m))}else t.push(o)})),new yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t,s,r,o,d,m,p){this.key=t,this.documentType=s,this.version=r,this.readTime=o,this.createTime=d,this.data=m,this.documentState=p}static newInvalidDocument(t){return new qt(t,0,me.min(),me.min(),me.min(),ln.empty(),0)}static newFoundDocument(t,s,r,o){return new qt(t,1,s,me.min(),r,o,0)}static newNoDocument(t,s){return new qt(t,2,s,me.min(),me.min(),ln.empty(),0)}static newUnknownDocument(t,s){return new qt(t,3,s,me.min(),me.min(),ln.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof qt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t,s){this.position=t,this.inclusive=s}}function zy(a,t,s){let r=0;for(let o=0;o<a.position.length;o++){const d=t[o],m=a.position[o];if(d.field.isKeyField()?r=ue.comparator(ue.fromName(m.referenceValue),s.key):r=zr(m,s.data.field(d.field)),d.dir==="desc"&&(r*=-1),r!==0)break}return r}function Py(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let s=0;s<a.position.length;s++)if(!As(a.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,s="asc"){this.field=t,this.dir=s}}function xN(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{}class Et extends uv{constructor(t,s,r){super(),this.field=t,this.op=s,this.value=r}static create(t,s,r){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,r):new bN(t,s,r):s==="array-contains"?new AN(t,r):s==="in"?new NN(t,r):s==="not-in"?new SN(t,r):s==="array-contains-any"?new wN(t,r):new Et(t,s,r)}static createKeyFieldInFilter(t,s,r){return s==="in"?new EN(t,r):new TN(t,r)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(zr(s,this.value)):s!==null&&Pa(this.value)===Pa(s)&&this.matchesComparison(zr(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends uv{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new Jn(t,s)}matches(t){return cv(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cv(a){return a.op==="and"}function hv(a){return vN(a)&&cv(a)}function vN(a){for(const t of a.filters)if(t instanceof Jn)return!1;return!0}function Uf(a){if(a instanceof Et)return a.field.canonicalString()+a.op.toString()+Pr(a.value);if(hv(a))return a.filters.map((t=>Uf(t))).join(",");{const t=a.filters.map((s=>Uf(s))).join(",");return`${a.op}(${t})`}}function dv(a,t){return a instanceof Et?(function(r,o){return o instanceof Et&&r.op===o.op&&r.field.isEqual(o.field)&&As(r.value,o.value)})(a,t):a instanceof Jn?(function(r,o){return o instanceof Jn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((d,m,p)=>d&&dv(m,o.filters[p])),!0):!1})(a,t):void fe(19439)}function fv(a){return a instanceof Et?(function(s){return`${s.field.canonicalString()} ${s.op} ${Pr(s.value)}`})(a):a instanceof Jn?(function(s){return s.op.toString()+" {"+s.getFilters().map(fv).join(" ,")+"}"})(a):"Filter"}class bN extends Et{constructor(t,s,r){super(t,s,r),this.key=ue.fromName(r.referenceValue)}matches(t){const s=ue.comparator(t.key,this.key);return this.matchesComparison(s)}}class EN extends Et{constructor(t,s){super(t,"in",s),this.keys=mv("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class TN extends Et{constructor(t,s){super(t,"not-in",s),this.keys=mv("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function mv(a,t){return(t.arrayValue?.values||[]).map((s=>ue.fromName(s.referenceValue)))}class AN extends Et{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return cm(s)&&To(s.arrayValue,this.value)}}class NN extends Et{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&To(this.value.arrayValue,s)}}class SN extends Et{constructor(t,s){super(t,"not-in",s)}matches(t){if(To(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!To(this.value.arrayValue,s)}}class wN extends Et{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!cm(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>To(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t,s=null,r=[],o=[],d=null,m=null,p=null){this.path=t,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=d,this.startAt=m,this.endAt=p,this.Te=null}}function ky(a,t=null,s=[],r=[],o=null,d=null,m=null){return new IN(a,t,s,r,o,d,m)}function hm(a){const t=pe(a);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((r=>Uf(r))).join(","),s+="|ob:",s+=t.orderBy.map((r=>(function(d){return d.field.canonicalString()+d.dir})(r))).join(","),Jc(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Pr(r))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Pr(r))).join(",")),t.Te=s}return t.Te}function dm(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<a.orderBy.length;s++)if(!xN(a.orderBy[s],t.orderBy[s]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let s=0;s<a.filters.length;s++)if(!dv(a.filters[s],t.filters[s]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!Py(a.startAt,t.startAt)&&Py(a.endAt,t.endAt)}function Lf(a){return ue.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,s=null,r=[],o=[],d=null,m="F",p=null,x=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=d,this.limitType=m,this.startAt=p,this.endAt=x,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function RN(a,t,s,r,o,d,m,p){return new Kr(a,t,s,r,o,d,m,p)}function gv(a){return new Kr(a)}function By(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function CN(a){return ue.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}function pv(a){return a.collectionGroup!==null}function mo(a){const t=pe(a);if(t.Ie===null){t.Ie=[];const s=new Set;for(const d of t.explicitOrderBy)t.Ie.push(d),s.add(d.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let p=new wt(Pt.comparator);return m.filters.forEach((x=>{x.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(t).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||t.Ie.push(new Ao(d,r))})),s.has(Pt.keyField().canonicalString())||t.Ie.push(new Ao(Pt.keyField(),r))}return t.Ie}function bs(a){const t=pe(a);return t.Ee||(t.Ee=jN(t,mo(a))),t.Ee}function jN(a,t){if(a.limitType==="F")return ky(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new Ao(o.field,d)}));const s=a.endAt?new Uc(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new Uc(a.startAt.position,a.startAt.inclusive):null;return ky(a.path,a.collectionGroup,t,a.filters,a.limit,s,r)}}function zf(a,t){const s=a.filters.concat([t]);return new Kr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),s,a.limit,a.limitType,a.startAt,a.endAt)}function DN(a,t){const s=a.explicitOrderBy.concat([t]);return new Kr(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}function Pf(a,t,s){return new Kr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,s,a.startAt,a.endAt)}function $c(a,t){return dm(bs(a),bs(t))&&a.limitType===t.limitType}function yv(a){return`${hm(bs(a))}|lt:${a.limitType}`}function Tr(a){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>fv(o))).join(", ")}]`),Jc(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>Pr(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>Pr(o))).join(",")),`Target(${r})`})(bs(a))}; limitType=${a.limitType})`}function Wc(a,t){return t.isFoundDocument()&&(function(r,o){const d=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(d):ue.isDocumentKey(r.path)?r.path.isEqual(d):r.path.isImmediateParentOf(d)})(a,t)&&(function(r,o){for(const d of mo(r))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(a,t)&&(function(r,o){for(const d of r.filters)if(!d.matches(o))return!1;return!0})(a,t)&&(function(r,o){return!(r.startAt&&!(function(m,p,x){const v=zy(m,p,x);return m.inclusive?v<=0:v<0})(r.startAt,mo(r),o)||r.endAt&&!(function(m,p,x){const v=zy(m,p,x);return m.inclusive?v>=0:v>0})(r.endAt,mo(r),o))})(a,t)}function ON(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function _v(a){return(t,s)=>{let r=!1;for(const o of mo(a)){const d=VN(o,t,s);if(d!==0)return d;r=r||o.field.isKeyField()}return 0}}function VN(a,t,s){const r=a.field.isKeyField()?ue.comparator(t.key,s.key):(function(d,m,p){const x=m.data.field(d),v=p.data.field(d);return x!==null&&v!==null?zr(x,v):fe(42886)})(a.field,t,s);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r!==void 0){for(const[o,d]of r)if(this.equalsFn(o,t))return d}}has(t){return this.get(t)!==void 0}set(t,s){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],t))return void(o[d]=[t,s]);o.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Ga(this.inner,((s,r)=>{for(const[o,d]of r)t(o,d)}))}isEmpty(){return ev(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new st(ue.comparator);function Qs(){return MN}const xv=new st(ue.comparator);function oo(...a){let t=xv;for(const s of a)t=t.insert(s.key,s);return t}function vv(a){let t=xv;return a.forEach(((s,r)=>t=t.insert(s,r.overlayedDocument))),t}function Ei(){return go()}function bv(){return go()}function go(){return new Ii((a=>a.toString()),((a,t)=>a.isEqual(t)))}const UN=new st(ue.comparator),LN=new wt(ue.comparator);function Ie(...a){let t=LN;for(const s of a)t=t.add(s);return t}const zN=new wt(we);function PN(){return zN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(t)?"-0":t}}function Ev(a){return{integerValue:""+a}}function kN(a,t){return cN(t)?Ev(t):fm(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this._=void 0}}function BN(a,t,s){return a instanceof Lc?(function(o,d){const m={fields:{[sv]:{stringValue:nv},[iv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&um(d)&&(d=Zc(d)),d&&(m.fields[av]=d),{mapValue:m}})(s,t):a instanceof No?Av(a,t):a instanceof So?Nv(a,t):(function(o,d){const m=Tv(o,d),p=Hy(m)+Hy(o.Ae);return Mf(m)&&Mf(o.Ae)?Ev(p):fm(o.serializer,p)})(a,t)}function HN(a,t,s){return a instanceof No?Av(a,t):a instanceof So?Nv(a,t):s}function Tv(a,t){return a instanceof zc?(function(r){return Mf(r)||(function(d){return!!d&&"doubleValue"in d})(r)})(t)?t:{integerValue:0}:null}class Lc extends eh{}class No extends eh{constructor(t){super(),this.elements=t}}function Av(a,t){const s=Sv(t);for(const r of a.elements)s.some((o=>As(o,r)))||s.push(r);return{arrayValue:{values:s}}}class So extends eh{constructor(t){super(),this.elements=t}}function Nv(a,t){let s=Sv(t);for(const r of a.elements)s=s.filter((o=>!As(o,r)));return{arrayValue:{values:s}}}class zc extends eh{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function Hy(a){return ct(a.integerValue||a.doubleValue)}function Sv(a){return cm(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function GN(a,t){return a.field.isEqual(t.field)&&(function(r,o){return r instanceof No&&o instanceof No||r instanceof So&&o instanceof So?Lr(r.elements,o.elements,As):r instanceof zc&&o instanceof zc?As(r.Ae,o.Ae):r instanceof Lc&&o instanceof Lc})(a.transform,t.transform)}class FN{constructor(t,s){this.version=t,this.transformResults=s}}class Qn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new Qn}static exists(t){return new Qn(void 0,t)}static updateTime(t){return new Qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wc(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class th{}function wv(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new mm(a.key,Qn.none()):new Co(a.key,a.data,Qn.none());{const s=a.data,r=ln.empty();let o=new wt(Pt.comparator);for(let d of t.fields)if(!o.has(d)){let m=s.field(d);m===null&&d.length>1&&(d=d.popLast(),m=s.field(d)),m===null?r.delete(d):r.set(d,m),o=o.add(d)}return new Fa(a.key,r,new yn(o.toArray()),Qn.none())}}function qN(a,t,s){a instanceof Co?(function(o,d,m){const p=o.value.clone(),x=Fy(o.fieldTransforms,d,m.transformResults);p.setAll(x),d.convertToFoundDocument(m.version,p).setHasCommittedMutations()})(a,t,s):a instanceof Fa?(function(o,d,m){if(!wc(o.precondition,d))return void d.convertToUnknownDocument(m.version);const p=Fy(o.fieldTransforms,d,m.transformResults),x=d.data;x.setAll(Iv(o)),x.setAll(p),d.convertToFoundDocument(m.version,x).setHasCommittedMutations()})(a,t,s):(function(o,d,m){d.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,s)}function po(a,t,s,r){return a instanceof Co?(function(d,m,p,x){if(!wc(d.precondition,m))return p;const v=d.value.clone(),E=qy(d.fieldTransforms,x,m);return v.setAll(E),m.convertToFoundDocument(m.version,v).setHasLocalMutations(),null})(a,t,s,r):a instanceof Fa?(function(d,m,p,x){if(!wc(d.precondition,m))return p;const v=qy(d.fieldTransforms,x,m),E=m.data;return E.setAll(Iv(d)),E.setAll(v),m.convertToFoundDocument(m.version,E).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((T=>T.field)))})(a,t,s,r):(function(d,m,p){return wc(d.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):p})(a,t,s)}function YN(a,t){let s=null;for(const r of a.fieldTransforms){const o=t.data.field(r.field),d=Tv(r.transform,o||null);d!=null&&(s===null&&(s=ln.empty()),s.set(r.field,d))}return s||null}function Gy(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Lr(r,o,((d,m)=>GN(d,m)))})(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Co extends th{constructor(t,s,r,o=[]){super(),this.key=t,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fa extends th{constructor(t,s,r,o,d=[]){super(),this.key=t,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Iv(a){const t=new Map;return a.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=a.data.field(s);t.set(s,r)}})),t}function Fy(a,t,s){const r=new Map;Le(a.length===s.length,32656,{Ve:s.length,de:a.length});for(let o=0;o<s.length;o++){const d=a[o],m=d.transform,p=t.data.field(d.field);r.set(d.field,HN(m,p,s[o]))}return r}function qy(a,t,s){const r=new Map;for(const o of a){const d=o.transform,m=s.data.field(o.field);r.set(o.field,BN(d,m,t))}return r}class mm extends th{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KN extends th{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(t,s,r,o){this.batchId=t,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(t.key)&&qN(d,t,r[o])}}applyToLocalView(t,s){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(s=po(r,t,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(s=po(r,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const r=bv();return this.mutations.forEach((o=>{const d=t.get(o.key),m=d.overlayedDocument;let p=this.applyToLocalView(m,d.mutatedFields);p=s.has(o.key)?null:p;const x=wv(m,p);x!==null&&r.set(o.key,x),m.isValidDocument()||m.convertToNoDocument(me.min())})),r}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),Ie())}isEqual(t){return this.batchId===t.batchId&&Lr(this.mutations,t.mutations,((s,r)=>Gy(s,r)))&&Lr(this.baseMutations,t.baseMutations,((s,r)=>Gy(s,r)))}}class gm{constructor(t,s,r,o){this.batch=t,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(t,s,r){Le(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return UN})();const d=t.mutations;for(let m=0;m<d.length;m++)o=o.insert(d[m].key,r[m].version);return new gm(t,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,je;function ZN(a){switch(a){case Z.OK:return fe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return fe(15467,{code:a})}}function Rv(a){if(a===void 0)return Ks("GRPC error has no .code"),Z.UNKNOWN;switch(a){case vt.OK:return Z.OK;case vt.CANCELLED:return Z.CANCELLED;case vt.UNKNOWN:return Z.UNKNOWN;case vt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case vt.INTERNAL:return Z.INTERNAL;case vt.UNAVAILABLE:return Z.UNAVAILABLE;case vt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case vt.NOT_FOUND:return Z.NOT_FOUND;case vt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case vt.ABORTED:return Z.ABORTED;case vt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case vt.DATA_LOSS:return Z.DATA_LOSS;default:return fe(39323,{code:a})}}(je=vt||(vt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new Oa([4294967295,4294967295],0);function Yy(a){const t=$N().encode(a),s=new Gx;return s.update(t),new Uint8Array(s.digest())}function Ky(a){const t=new DataView(a.buffer),s=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new Oa([s,r],0),new Oa([o,d],0)]}class pm{constructor(t,s,r){if(this.bitmap=t,this.padding=s,this.hashCount=r,s<0||s>=8)throw new uo(`Invalid padding: ${s}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(t.length===0&&s!==0)throw new uo(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=Oa.fromNumber(this.ge)}ye(t,s,r){let o=t.add(s.multiply(Oa.fromNumber(r)));return o.compare(WN)===1&&(o=new Oa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=Yy(t),[r,o]=Ky(s);for(let d=0;d<this.hashCount;d++){const m=this.ye(r,o,d);if(!this.we(m))return!1}return!0}static create(t,s,r){const o=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new pm(d,o,s);return r.forEach((p=>m.insert(p))),m}insert(t){if(this.ge===0)return;const s=Yy(t),[r,o]=Ky(s);for(let d=0;d<this.hashCount;d++){const m=this.ye(r,o,d);this.be(m)}}be(t){const s=Math.floor(t/8),r=t%8;this.bitmap[s]|=1<<r}}class uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,s,r,o,d){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,s,r){const o=new Map;return o.set(t,jo.createSynthesizedTargetChangeForCurrentChange(t,s,r)),new nh(me.min(),o,new st(we),Qs(),Ie())}}class jo{constructor(t,s,r,o,d){this.resumeToken=t,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,s,r){return new jo(r,s,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,s,r,o){this.Se=t,this.removedTargetIds=s,this.key=r,this.De=o}}class Cv{constructor(t,s){this.targetId=t,this.Ce=s}}class jv{constructor(t,s,r=kt.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=s,this.resumeToken=r,this.cause=o}}class Qy{constructor(){this.ve=0,this.Fe=Xy(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ie(),s=Ie(),r=Ie();return this.Fe.forEach(((o,d)=>{switch(d){case 0:t=t.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:fe(38017,{changeType:d})}})),new jo(this.Me,this.xe,t,s,r)}Ke(){this.Oe=!1,this.Fe=Xy()}qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class eS{constructor(t){this.Ge=t,this.ze=new Map,this.je=Qs(),this.He=mc(),this.Je=mc(),this.Ze=new st(we)}Xe(t){for(const s of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const r=this.nt(s);switch(t.state){case 0:this.rt(s)&&r.Le(t.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(t.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.Qe(),r.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(t.resumeToken));break;default:fe(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(t){const s=t.targetId,r=t.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Lf(d))if(r===0){const m=new ue(d.path);this.et(s,m,qt.newNoDocument(m,me.min()))}else Le(r===1,20013,{expectedCount:r});else{const m=this._t(s);if(m!==r){const p=this.ut(t),x=p?this.ct(p,t,m):1;if(x!==0){this.it(s);const v=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,v)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:d=0}=s;let m,p;try{m=za(r).toUint8Array()}catch(x){if(x instanceof tv)return Ur("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{p=new pm(m,o,d)}catch(x){return Ur(x instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return p.ge===0?null:p}ct(t,s,r){return s.Ce.count===r-this.Pt(t,s.targetId)?0:2}Pt(t,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((d=>{const m=this.Ge.ht(),p=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(t){const s=new Map;this.ze.forEach(((d,m)=>{const p=this.ot(m);if(p){if(d.current&&Lf(p.target)){const x=new ue(p.target.path);this.It(x).has(m)||this.Et(m,x)||this.et(m,x,qt.newNoDocument(x,t))}d.Be&&(s.set(m,d.ke()),d.Ke())}}));let r=Ie();this.Je.forEach(((d,m)=>{let p=!0;m.forEachWhile((x=>{const v=this.ot(x);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(d))})),this.je.forEach(((d,m)=>m.setReadTime(t)));const o=new nh(t,s,this.Ze,this.je,r);return this.je=Qs(),this.He=mc(),this.Je=mc(),this.Ze=new st(we),o}Ye(t,s){if(!this.rt(t))return;const r=this.Et(t,s.key)?2:0;this.nt(t).qe(s.key,r),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(t)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(t))}et(t,s,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,s)?o.qe(s,1):o.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(t)),this.Je=this.Je.insert(s,this.Rt(s).add(t)),r&&(this.je=this.je.insert(s,r))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let s=this.ze.get(t);return s||(s=new Qy,this.ze.set(t,s)),s}Rt(t){let s=this.Je.get(t);return s||(s=new wt(we),this.Je=this.Je.insert(t,s)),s}It(t){let s=this.He.get(t);return s||(s=new wt(we),this.He=this.He.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||ae("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Qy),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function mc(){return new st(ue.comparator)}function Xy(){return new st(ue.comparator)}const tS={asc:"ASCENDING",desc:"DESCENDING"},nS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sS={and:"AND",or:"OR"};class aS{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function kf(a,t){return a.useProto3Json||Jc(t)?t:{value:t}}function Pc(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dv(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function iS(a,t){return Pc(a,t.toTimestamp())}function Es(a){return Le(!!a,49232),me.fromTimestamp((function(s){const r=La(s);return new Je(r.seconds,r.nanos)})(a))}function ym(a,t){return Bf(a,t).canonicalString()}function Bf(a,t){const s=(function(o){return new Ke(["projects",o.projectId,"databases",o.database])})(a).child("documents");return t===void 0?s:s.child(t)}function Ov(a){const t=Ke.fromString(a);return Le(zv(t),10190,{key:t.toString()}),t}function Hf(a,t){return ym(a.databaseId,t.path)}function Af(a,t){const s=Ov(t);if(s.get(1)!==a.databaseId.projectId)throw new se(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+a.databaseId.projectId);if(s.get(3)!==a.databaseId.database)throw new se(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+a.databaseId.database);return new ue(Mv(s))}function Vv(a,t){return ym(a.databaseId,t)}function rS(a){const t=Ov(a);return t.length===4?Ke.emptyPath():Mv(t)}function Gf(a){return new Ke(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Mv(a){return Le(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Jy(a,t,s){return{name:Hf(a,t),fields:s.value.mapValue.fields}}function lS(a,t){let s;if("targetChange"in t){t.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:fe(39313,{state:v})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],d=(function(v,E){return v.useProto3Json?(Le(E===void 0||typeof E=="string",58123),kt.fromBase64String(E||"")):(Le(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),kt.fromUint8Array(E||new Uint8Array))})(a,t.targetChange.resumeToken),m=t.targetChange.cause,p=m&&(function(v){const E=v.code===void 0?Z.UNKNOWN:Rv(v.code);return new se(E,v.message||"")})(m);s=new jv(r,o,d,p||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Af(a,r.document.name),d=Es(r.document.updateTime),m=r.document.createTime?Es(r.document.createTime):me.min(),p=new ln({mapValue:{fields:r.document.fields}}),x=qt.newFoundDocument(o,d,m,p),v=r.targetIds||[],E=r.removedTargetIds||[];s=new Ic(v,E,x.key,x)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Af(a,r.document),d=r.readTime?Es(r.readTime):me.min(),m=qt.newNoDocument(o,d),p=r.removedTargetIds||[];s=new Ic([],p,m.key,m)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Af(a,r.document),d=r.removedTargetIds||[];s=new Ic([],d,o,null)}else{if(!("filter"in t))return fe(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:d}=r,m=new JN(o,d),p=r.targetId;s=new Cv(p,m)}}return s}function oS(a,t){let s;if(t instanceof Co)s={update:Jy(a,t.key,t.value)};else if(t instanceof mm)s={delete:Hf(a,t.key)};else if(t instanceof Fa)s={update:Jy(a,t.key,t.data),updateMask:yS(t.fieldMask)};else{if(!(t instanceof KN))return fe(16599,{dt:t.type});s={verify:Hf(a,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((r=>(function(d,m){const p=m.transform;if(p instanceof Lc)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof No)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof So)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof zc)return{fieldPath:m.field.canonicalString(),increment:p.Ae};throw fe(20930,{transform:m.transform})})(0,r)))),t.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:iS(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:fe(27497)})(a,t.precondition)),s}function uS(a,t){return a&&a.length>0?(Le(t!==void 0,14353),a.map((s=>(function(o,d){let m=o.updateTime?Es(o.updateTime):Es(d);return m.isEqual(me.min())&&(m=Es(d)),new FN(m,o.transformResults||[])})(s,t)))):[]}function cS(a,t){return{documents:[Vv(a,t.path)]}}function hS(a,t){const s={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=Vv(a,o);const d=(function(v){if(v.length!==0)return Lv(Jn.create(v,"and"))})(t.filters);d&&(s.structuredQuery.where=d);const m=(function(v){if(v.length!==0)return v.map((E=>(function(w){return{field:Ar(w.field),direction:mS(w.dir)}})(E)))})(t.orderBy);m&&(s.structuredQuery.orderBy=m);const p=kf(a,t.limit);return p!==null&&(s.structuredQuery.limit=p),t.startAt&&(s.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(t.endAt)),{ft:s,parent:o}}function dS(a){let t=rS(a.parent);const s=a.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){Le(r===1,65062);const E=s.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let d=[];s.where&&(d=(function(T){const w=Uv(T);return w instanceof Jn&&hv(w)?w.getFilters():[w]})(s.where));let m=[];s.orderBy&&(m=(function(T){return T.map((w=>(function(F){return new Ao(Nr(F.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(w)))})(s.orderBy));let p=null;s.limit&&(p=(function(T){let w;return w=typeof T=="object"?T.value:T,Jc(w)?null:w})(s.limit));let x=null;s.startAt&&(x=(function(T){const w=!!T.before,j=T.values||[];return new Uc(j,w)})(s.startAt));let v=null;return s.endAt&&(v=(function(T){const w=!T.before,j=T.values||[];return new Uc(j,w)})(s.endAt)),RN(t,o,m,d,p,"F",x,v)}function fS(a,t){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:o})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function Uv(a){return a.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=Nr(s.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Nr(s.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Nr(s.unaryFilter.field);return Et.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Nr(s.unaryFilter.field);return Et.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(a):a.fieldFilter!==void 0?(function(s){return Et.create(Nr(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(s){return Jn.create(s.compositeFilter.filters.map((r=>Uv(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(s.compositeFilter.op))})(a):fe(30097,{filter:a})}function mS(a){return tS[a]}function gS(a){return nS[a]}function pS(a){return sS[a]}function Ar(a){return{fieldPath:a.canonicalString()}}function Nr(a){return Pt.fromServerFormat(a.fieldPath)}function Lv(a){return a instanceof Et?(function(s){if(s.op==="=="){if(Ly(s.value))return{unaryFilter:{field:Ar(s.field),op:"IS_NAN"}};if(Uy(s.value))return{unaryFilter:{field:Ar(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Ly(s.value))return{unaryFilter:{field:Ar(s.field),op:"IS_NOT_NAN"}};if(Uy(s.value))return{unaryFilter:{field:Ar(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ar(s.field),op:gS(s.op),value:s.value}}})(a):a instanceof Jn?(function(s){const r=s.getFilters().map((o=>Lv(o)));return r.length===1?r[0]:{compositeFilter:{op:pS(s.op),filters:r}}})(a):fe(54877,{filter:a})}function yS(a){const t=[];return a.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function zv(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}function Pv(a){return!!a&&typeof a._toProto=="function"&&a._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(t,s,r,o,d=me.min(),m=me.min(),p=kt.EMPTY_BYTE_STRING,x=null){this.target=t,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=p,this.expectedCount=x}withSequenceNumber(t){return new Da(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t){this.yt=t}}function xS(a){const t=dS({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Pf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.Sn=new bS}addToCollectionParentIndex(t,s){return this.Sn.add(s),$.resolve()}getCollectionParents(t,s){return $.resolve(this.Sn.getEntries(s))}addFieldIndex(t,s){return $.resolve()}deleteFieldIndex(t,s){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,s){return $.resolve()}getDocumentsMatchingTarget(t,s){return $.resolve(null)}getIndexType(t,s){return $.resolve(0)}getFieldIndexes(t,s){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,s){return $.resolve(Ua.min())}getMinOffsetFromCollectionGroup(t,s){return $.resolve(Ua.min())}updateCollectionGroup(t,s,r){return $.resolve()}updateIndexEntries(t,s){return $.resolve()}}class bS{constructor(){this.index={}}add(t){const s=t.lastSegment(),r=t.popLast(),o=this.index[s]||new wt(Ke.comparator),d=!o.has(r);return this.index[s]=o.add(r),d}has(t){const s=t.lastSegment(),r=t.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(t){return(this.index[t]||new wt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kv=41943040;class rn{static withCacheSize(t){return new rn(t,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(kv,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new kr(0)}static ar(){return new kr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="LruGarbageCollector",ES=1048576;function Wy([a,t],[s,r]){const o=we(a,s);return o===0?we(t,r):o}class TS{constructor(t){this.Pr=t,this.buffer=new wt(Wy),this.Tr=0}Ir(){return++this.Tr}Er(t){const s=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Wy(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class AS{constructor(t,s,r){this.garbageCollector=t,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){ae($y,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Yr(s)?ae($y,"Ignoring IndexedDB error during garbage collection: ",s):await qr(s)}await this.Ar(3e5)}))}}class NS{constructor(t,s){this.Vr=t,this.params=s}calculateTargetCount(t,s){return this.Vr.dr(t).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(t,s){if(s===0)return $.resolve(Xc.ce);const r=new TS(s);return this.Vr.forEachTarget(t,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(t,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(t,s,r){return this.Vr.removeTargets(t,s,r)}removeOrphanedDocuments(t,s){return this.Vr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Zy)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zy):this.gr(t,s)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,s){let r,o,d,m,p,x,v;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,m=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(r=T,p=Date.now(),this.removeTargets(t,r,s)))).next((T=>(d=T,x=Date.now(),this.removeOrphanedDocuments(t,r)))).next((T=>(v=Date.now(),Er()<=qs.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-E}ms
	Determined least recently used ${o} in `+(p-m)+`ms
	Removed ${d} targets in `+(x-p)+`ms
	Removed ${T} documents in `+(v-x)+`ms
Total Duration: ${v-E}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:T}))))}}function SS(a,t){return new NS(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.changes=new Ii((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,qt.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?$.resolve(r):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,s,r,o){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,s){let r=null;return this.documentOverlayCache.getOverlay(t,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,s)))).next((o=>(r!==null&&po(r.mutation,o,yn.empty(),Je.now()),o)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.getLocalViewOfDocuments(t,r,Ie()).next((()=>r))))}getLocalViewOfDocuments(t,s,r=Ie()){const o=Ei();return this.populateOverlays(t,o,s).next((()=>this.computeViews(t,s,o,r).next((d=>{let m=oo();return d.forEach(((p,x)=>{m=m.insert(p,x.overlayedDocument)})),m}))))}getOverlayedDocuments(t,s){const r=Ei();return this.populateOverlays(t,r,s).next((()=>this.computeViews(t,s,r,Ie())))}populateOverlays(t,s,r){const o=[];return r.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(t,o).next((d=>{d.forEach(((m,p)=>{s.set(m,p)}))}))}computeViews(t,s,r,o){let d=Qs();const m=go(),p=(function(){return go()})();return s.forEach(((x,v)=>{const E=r.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Fa)?d=d.insert(v.key,v):E!==void 0?(m.set(v.key,E.mutation.getFieldMask()),po(E.mutation,v,E.mutation.getFieldMask(),Je.now())):m.set(v.key,yn.empty())})),this.recalculateAndSaveOverlays(t,d).next((x=>(x.forEach(((v,E)=>m.set(v,E))),s.forEach(((v,E)=>p.set(v,new IS(E,m.get(v)??null)))),p)))}recalculateAndSaveOverlays(t,s){const r=go();let o=new st(((m,p)=>m-p)),d=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((m=>{for(const p of m)p.keys().forEach((x=>{const v=s.get(x);if(v===null)return;let E=r.get(x)||yn.empty();E=p.applyToLocalView(v,E),r.set(x,E);const T=(o.get(p.batchId)||Ie()).add(x);o=o.insert(p.batchId,T)}))})).next((()=>{const m=[],p=o.getReverseIterator();for(;p.hasNext();){const x=p.getNext(),v=x.key,E=x.value,T=bv();E.forEach((w=>{if(!d.has(w)){const j=wv(s.get(w),r.get(w));j!==null&&T.set(w,j),d=d.add(w)}})),m.push(this.documentOverlayCache.saveOverlays(t,v,T))}return $.waitFor(m)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,s,r,o){return CN(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):pv(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,r,o):this.getDocumentsMatchingCollectionQuery(t,s,r,o)}getNextDocuments(t,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,r,o).next((d=>{const m=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,r.largestBatchId,o-d.size):$.resolve(Ei());let p=vo,x=d;return m.next((v=>$.forEach(v,((E,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),d.get(E)?$.resolve():this.remoteDocumentCache.getEntry(t,E).next((w=>{x=x.insert(E,w)}))))).next((()=>this.populateOverlays(t,v,d))).next((()=>this.computeViews(t,x,v,Ie()))).next((E=>({batchId:p,changes:vv(E)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new ue(s)).next((r=>{let o=oo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,s,r,o){const d=s.collectionGroup;let m=oo();return this.indexManager.getCollectionParents(t,d).next((p=>$.forEach(p,(x=>{const v=(function(T,w){return new Kr(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(s,x.child(d));return this.getDocumentsMatchingCollectionQuery(t,v,r,o).next((E=>{E.forEach(((T,w)=>{m=m.insert(T,w)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,s,r,o){let d;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,r.largestBatchId).next((m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,r,d,o)))).next((m=>{d.forEach(((x,v)=>{const E=v.getKey();m.get(E)===null&&(m=m.insert(E,qt.newInvalidDocument(E)))}));let p=oo();return m.forEach(((x,v)=>{const E=d.get(x);E!==void 0&&po(E.mutation,v,yn.empty(),Je.now()),Wc(s,v)&&(p=p.insert(x,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,s){return $.resolve(this.Nr.get(s))}saveBundleMetadata(t,s){return this.Nr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Es(o.createTime)}})(s)),$.resolve()}getNamedQuery(t,s){return $.resolve(this.Br.get(s))}saveNamedQuery(t,s){return this.Br.set(s.name,(function(o){return{name:o.name,query:xS(o.bundledQuery),readTime:Es(o.readTime)}})(s)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.overlays=new st(ue.comparator),this.Lr=new Map}getOverlay(t,s){return $.resolve(this.overlays.get(s))}getOverlays(t,s){const r=Ei();return $.forEach(s,(o=>this.getOverlay(t,o).next((d=>{d!==null&&r.set(o,d)})))).next((()=>r))}saveOverlays(t,s,r){return r.forEach(((o,d)=>{this.bt(t,s,d)})),$.resolve()}removeOverlaysForBatchId(t,s,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.Lr.delete(r)),$.resolve()}getOverlaysForCollection(t,s,r){const o=Ei(),d=s.length+1,m=new ue(s.child("")),p=this.overlays.getIteratorFrom(m);for(;p.hasNext();){const x=p.getNext().value,v=x.getKey();if(!s.isPrefixOf(v.path))break;v.path.length===d&&x.largestBatchId>r&&o.set(x.getKey(),x)}return $.resolve(o)}getOverlaysForCollectionGroup(t,s,r,o){let d=new st(((v,E)=>v-E));const m=this.overlays.getIterator();for(;m.hasNext();){const v=m.getNext().value;if(v.getKey().getCollectionGroup()===s&&v.largestBatchId>r){let E=d.get(v.largestBatchId);E===null&&(E=Ei(),d=d.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=Ei(),x=d.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return $.resolve(p)}bt(t,s,r){const o=this.overlays.get(r.key);if(o!==null){const m=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,m)}this.overlays=this.overlays.insert(r.key,new XN(s,r));let d=this.Lr.get(s);d===void 0&&(d=Ie(),this.Lr.set(s,d)),this.Lr.set(s,d.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this.kr=new wt(jt.Kr),this.qr=new wt(jt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,s){const r=new jt(t,s);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(t,s){t.forEach((r=>this.addReference(r,s)))}removeReference(t,s){this.Wr(new jt(t,s))}Qr(t,s){t.forEach((r=>this.removeReference(r,s)))}Gr(t){const s=new ue(new Ke([])),r=new jt(s,t),o=new jt(s,t+1),d=[];return this.qr.forEachInRange([r,o],(m=>{this.Wr(m),d.push(m.key)})),d}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const s=new ue(new Ke([])),r=new jt(s,t),o=new jt(s,t+1);let d=Ie();return this.qr.forEachInRange([r,o],(m=>{d=d.add(m.key)})),d}containsKey(t){const s=new jt(t,0),r=this.kr.firstAfterOrEqual(s);return r!==null&&t.isEqual(r.key)}}class jt{constructor(t,s){this.key=t,this.Hr=s}static Kr(t,s){return ue.comparator(t.key,s.key)||we(t.Hr,s.Hr)}static Ur(t,s){return we(t.Hr,s.Hr)||ue.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new wt(jt.Kr)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,r,o){const d=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new QN(d,s,r,o);this.mutationQueue.push(m);for(const p of o)this.Jr=this.Jr.add(new jt(p.key,d)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return $.resolve(m)}lookupMutationBatch(t,s){return $.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(t,s){const r=s+1,o=this.Xr(r),d=o<0?0:o;return $.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?om:this.Yn-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const r=new jt(s,0),o=new jt(s,Number.POSITIVE_INFINITY),d=[];return this.Jr.forEachInRange([r,o],(m=>{const p=this.Zr(m.Hr);d.push(p)})),$.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,s){let r=new wt(we);return s.forEach((o=>{const d=new jt(o,0),m=new jt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([d,m],(p=>{r=r.add(p.Hr)}))})),$.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(t,s){const r=s.path,o=r.length+1;let d=r;ue.isDocumentKey(d)||(d=d.child(""));const m=new jt(new ue(d),0);let p=new wt(we);return this.Jr.forEachWhile((x=>{const v=x.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(p=p.add(x.Hr)),!0)}),m),$.resolve(this.Yr(p))}Yr(t){const s=[];return t.forEach((r=>{const o=this.Zr(r);o!==null&&s.push(o)})),s}removeMutationBatch(t,s){Le(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return $.forEach(s.mutations,(o=>{const d=new jt(o.key,s.batchId);return r=r.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Jr=r}))}nr(t){}containsKey(t,s){const r=new jt(s,0),o=this.Jr.firstAfterOrEqual(r);return $.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ei(t,s){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const s=this.Xr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t){this.ti=t,this.docs=(function(){return new st(ue.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const r=s.key,o=this.docs.get(r),d=o?o.size:0,m=this.ti(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const r=this.docs.get(s);return $.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(s))}getEntries(t,s){let r=Qs();return s.forEach((o=>{const d=this.docs.get(o);r=r.insert(o,d?d.document.mutableCopy():qt.newInvalidDocument(o))})),$.resolve(r)}getDocumentsMatchingQuery(t,s,r,o){let d=Qs();const m=s.path,p=new ue(m.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(p);for(;x.hasNext();){const{key:v,value:{document:E}}=x.getNext();if(!m.isPrefixOf(v.path))break;v.path.length>m.length+1||rN(iN(E),r)<=0||(o.has(E.key)||Wc(s,E))&&(d=d.insert(E.key,E.mutableCopy()))}return $.resolve(d)}getAllFromCollectionGroup(t,s,r,o){fe(9500)}ni(t,s){return $.forEach(this.docs,(r=>s(r)))}newChangeBuffer(t){return new MS(this)}getSize(t){return $.resolve(this.size)}}class MS extends wS{constructor(t){super(),this.Mr=t}applyChanges(t){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Mr.addEntry(t,o)):this.Mr.removeEntry(r)})),$.waitFor(s)}getFromCache(t,s){return this.Mr.getEntry(t,s)}getAllFromCache(t,s){return this.Mr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t){this.persistence=t,this.ri=new Ii((s=>hm(s)),dm),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.ii=0,this.si=new _m,this.targetCount=0,this.oi=kr._r()}forEachTarget(t,s){return this.ri.forEach(((r,o)=>s(o))),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.ii&&(this.ii=s),$.resolve()}lr(t){this.ri.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.oi=new kr(s),this.highestTargetId=s),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,s){return this.lr(s),this.targetCount+=1,$.resolve()}updateTargetData(t,s){return this.lr(s),$.resolve()}removeTargetData(t,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,s,r){let o=0;const d=[];return this.ri.forEach(((m,p)=>{p.sequenceNumber<=s&&r.get(p.targetId)===null&&(this.ri.delete(m),d.push(this.removeMatchingKeysForTargetId(t,p.targetId)),o++)})),$.waitFor(d).next((()=>o))}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,s){const r=this.ri.get(s)||null;return $.resolve(r)}addMatchingKeys(t,s,r){return this.si.$r(s,r),$.resolve()}removeMatchingKeys(t,s,r){this.si.Qr(s,r);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((m=>{d.push(o.markPotentiallyOrphaned(t,m))})),$.waitFor(d)}removeMatchingKeysForTargetId(t,s){return this.si.Gr(s),$.resolve()}getMatchingKeysForTargetId(t,s){const r=this.si.jr(s);return $.resolve(r)}containsKey(t,s){return $.resolve(this.si.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,s){this._i={},this.overlays={},this.ai=new Xc(0),this.ui=!1,this.ui=!0,this.ci=new DS,this.referenceDelegate=t(this),this.li=new US(this),this.indexManager=new vS,this.remoteDocumentCache=(function(o){return new VS(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new _S(s),this.Pi=new CS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new jS,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let r=this._i[t.toKey()];return r||(r=new OS(s,this.referenceDelegate),this._i[t.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,s,r){ae("MemoryPersistence","Starting transaction:",t);const o=new LS(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((d=>this.referenceDelegate.Ii(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ei(t,s){return $.or(Object.values(this._i).map((r=>()=>r.containsKey(t,s))))}}class LS extends oN{constructor(t){super(),this.currentSequenceNumber=t}}class xm{constructor(t){this.persistence=t,this.Ri=new _m,this.Ai=null}static Vi(t){return new xm(t)}get di(){if(this.Ai)return this.Ai;throw fe(60996)}addReference(t,s,r){return this.Ri.addReference(r,s),this.di.delete(r.toString()),$.resolve()}removeReference(t,s,r){return this.Ri.removeReference(r,s),this.di.add(r.toString()),$.resolve()}markPotentiallyOrphaned(t,s){return this.di.add(s.toString()),$.resolve()}removeTarget(t,s){this.Ri.Gr(s.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,s.targetId).next((o=>{o.forEach((d=>this.di.add(d.toString())))})).next((()=>r.removeTargetData(t,s)))}Ti(){this.Ai=new Set}Ii(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.di,(r=>{const o=ue.fromPath(r);return this.mi(t,o).next((d=>{d||s.removeEntry(o,me.min())}))})).next((()=>(this.Ai=null,s.apply(t))))}updateLimboDocument(t,s){return this.mi(t,s).next((r=>{r?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(t){return 0}mi(t,s){return $.or([()=>$.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ei(t,s)])}}class kc{constructor(t,s){this.persistence=t,this.fi=new Ii((r=>hN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=SS(this,s)}static Vi(t,s){return new kc(t,s)}Ti(){}Ii(t){return $.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}dr(t){const s=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>s.next((o=>r+o))))}pr(t){let s=0;return this.mr(t,(r=>{s++})).next((()=>s))}mr(t,s){return $.forEach(this.fi,((r,o)=>this.wr(t,r,o).next((d=>d?$.resolve():s(o)))))}removeTargets(t,s,r){return this.persistence.getTargetCache().removeTargets(t,s,r)}removeOrphanedDocuments(t,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ni(t,(m=>this.wr(t,m,s).next((p=>{p||(r++,d.removeEntry(m,me.min()))})))).next((()=>d.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,s){return this.fi.set(s,t.currentSequenceNumber),$.resolve()}removeTarget(t,s){const r=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,s,r){return this.fi.set(r,t.currentSequenceNumber),$.resolve()}removeReference(t,s,r){return this.fi.set(r,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,s){return this.fi.set(s,t.currentSequenceNumber),$.resolve()}hi(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=Nc(t.data.value)),s}wr(t,s,r){return $.or([()=>this.persistence.Ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const o=this.fi.get(s);return $.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(t,s,r,o){this.targetId=t,this.fromCache=s,this.Ts=r,this.Is=o}static Es(t,s){let r=Ie(),o=Ie();for(const d of s.docChanges)switch(d.type){case 0:r=r.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new vm(t,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return NA()?8:uN(SA())>0?6:4})()}initialize(t,s){this.fs=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,r,o){const d={result:null};return this.gs(t,s).next((m=>{d.result=m})).next((()=>{if(!d.result)return this.ps(t,s,o,r).next((m=>{d.result=m}))})).next((()=>{if(d.result)return;const m=new zS;return this.ys(t,s,m).next((p=>{if(d.result=p,this.As)return this.ws(t,s,m,p.size)}))})).next((()=>d.result))}ws(t,s,r,o){return r.documentReadCount<this.Vs?(Er()<=qs.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Tr(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(Er()<=qs.DEBUG&&ae("QueryEngine","Query:",Tr(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(Er()<=qs.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Tr(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,bs(s))):$.resolve())}gs(t,s){if(By(s))return $.resolve(null);let r=bs(s);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=Pf(s,null,"F"),r=bs(s)),this.indexManager.getDocumentsMatchingTarget(t,r).next((d=>{const m=Ie(...d);return this.fs.getDocuments(t,m).next((p=>this.indexManager.getMinOffset(t,r).next((x=>{const v=this.bs(s,p);return this.Ss(s,v,m,x.readTime)?this.gs(t,Pf(s,null,"F")):this.Ds(t,v,s,x)}))))})))))}ps(t,s,r,o){return By(s)||o.isEqual(me.min())?$.resolve(null):this.fs.getDocuments(t,r).next((d=>{const m=this.bs(s,d);return this.Ss(s,m,r,o)?$.resolve(null):(Er()<=qs.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Tr(s)),this.Ds(t,m,s,aN(o,vo)).next((p=>p)))}))}bs(t,s){let r=new wt(_v(t));return s.forEach(((o,d)=>{Wc(t,d)&&(r=r.add(d))})),r}Ss(t,s,r,o){if(t.limit===null)return!1;if(r.size!==s.size)return!0;const d=t.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}ys(t,s,r){return Er()<=qs.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Tr(s)),this.fs.getDocumentsMatchingQuery(t,s,Ua.min(),r)}Ds(t,s,r,o){return this.fs.getDocumentsMatchingQuery(t,r,o).next((d=>(s.forEach((m=>{d=d.insert(m.key,m)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="LocalStore",kS=3e8;class BS{constructor(t,s,r,o){this.persistence=t,this.Cs=s,this.serializer=o,this.vs=new st(we),this.Fs=new Ii((d=>hm(d)),dm),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(r)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new RS(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.vs)))}}function HS(a,t,s,r){return new BS(a,t,s,r)}async function Hv(a,t){const s=pe(a);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((d=>(o=d,s.Os(t),s.mutationQueue.getAllMutationBatches(r)))).next((d=>{const m=[],p=[];let x=Ie();for(const v of o){m.push(v.batchId);for(const E of v.mutations)x=x.add(E.key)}for(const v of d){p.push(v.batchId);for(const E of v.mutations)x=x.add(E.key)}return s.localDocuments.getDocuments(r,x).next((v=>({Ns:v,removedBatchIds:m,addedBatchIds:p})))}))}))}function GS(a,t){const s=pe(a);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),d=s.xs.newChangeBuffer({trackRemovals:!0});return(function(p,x,v,E){const T=v.batch,w=T.keys();let j=$.resolve();return w.forEach((F=>{j=j.next((()=>E.getEntry(x,F))).next((W=>{const k=v.docVersions.get(F);Le(k!==null,48541),W.version.compareTo(k)<0&&(T.applyToRemoteDocument(W,v),W.isValidDocument()&&(W.setReadTime(v.commitVersion),E.addEntry(W)))}))})),j.next((()=>p.mutationQueue.removeMutationBatch(x,T)))})(s,r,t,d).next((()=>d.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let x=Ie();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(x=x.add(p.batch.mutations[v].key));return x})(t)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function Gv(a){const t=pe(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.li.getLastRemoteSnapshotVersion(s)))}function FS(a,t){const s=pe(a),r=t.snapshotVersion;let o=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const m=s.xs.newChangeBuffer({trackRemovals:!0});o=s.vs;const p=[];t.targetChanges.forEach(((E,T)=>{const w=o.get(T);if(!w)return;p.push(s.li.removeMatchingKeys(d,E.removedDocuments,T).next((()=>s.li.addMatchingKeys(d,E.addedDocuments,T))));let j=w.withSequenceNumber(d.currentSequenceNumber);t.targetMismatches.get(T)!==null?j=j.withResumeToken(kt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,r)),o=o.insert(T,j),(function(W,k,ne){return W.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=kS?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(w,j,E)&&p.push(s.li.updateTargetData(d,j))}));let x=Qs(),v=Ie();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,E))})),p.push(qS(d,m,t.documentUpdates).next((E=>{x=E.Bs,v=E.Ls}))),!r.isEqual(me.min())){const E=s.li.getLastRemoteSnapshotVersion(d).next((T=>s.li.setTargetsMetadata(d,d.currentSequenceNumber,r)));p.push(E)}return $.waitFor(p).next((()=>m.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,x,v))).next((()=>x))})).then((d=>(s.vs=o,d)))}function qS(a,t,s){let r=Ie(),o=Ie();return s.forEach((d=>r=r.add(d))),t.getEntries(a,r).next((d=>{let m=Qs();return s.forEach(((p,x)=>{const v=d.get(p);x.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),x.isNoDocument()&&x.version.isEqual(me.min())?(t.removeEntry(p,x.readTime),m=m.insert(p,x)):!v.isValidDocument()||x.version.compareTo(v.version)>0||x.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(x),m=m.insert(p,x)):ae(bm,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",x.version)})),{Bs:m,Ls:o}}))}function YS(a,t){const s=pe(a);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=om),s.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function KS(a,t){const s=pe(a);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.li.getTargetData(r,t).next((d=>d?(o=d,$.resolve(o)):s.li.allocateTargetId(r).next((m=>(o=new Da(t,m,"TargetPurposeListen",r.currentSequenceNumber),s.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.vs=s.vs.insert(r.targetId,r),s.Fs.set(t,r.targetId)),r}))}async function Ff(a,t,s){const r=pe(a),o=r.vs.get(t),d=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",d,(m=>r.persistence.referenceDelegate.removeTarget(m,o)))}catch(m){if(!Yr(m))throw m;ae(bm,`Failed to update sequence numbers for target ${t}: ${m}`)}r.vs=r.vs.remove(t),r.Fs.delete(o.target)}function e_(a,t,s){const r=pe(a);let o=me.min(),d=Ie();return r.persistence.runTransaction("Execute query","readwrite",(m=>(function(x,v,E){const T=pe(x),w=T.Fs.get(E);return w!==void 0?$.resolve(T.vs.get(w)):T.li.getTargetData(v,E)})(r,m,bs(t)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(m,p.targetId).next((x=>{d=x}))})).next((()=>r.Cs.getDocumentsMatchingQuery(m,t,s?o:me.min(),s?d:Ie()))).next((p=>(QS(r,ON(t),p),{documents:p,ks:d})))))}function QS(a,t,s){let r=a.Ms.get(t)||me.min();s.forEach(((o,d)=>{d.readTime.compareTo(r)>0&&(r=d.readTime)})),a.Ms.set(t,r)}class t_{constructor(){this.activeTargetIds=PN()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class XS{constructor(){this.vo=new t_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,r){}addLocalQueryTarget(t,s=!0){return s&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,s,r){this.Fo[t]=s}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new t_,Promise.resolve()}handleUserChange(t,s,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="ConnectivityMonitor";class s_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ae(n_,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){ae(n_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function qf(){return gc===null?gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="RestConnection",ZS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class $S{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+t.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Vc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(t,s,r,o,d){const m=qf(),p=this.Qo(t,s.toUriEncodedString());ae(Nf,`Sending RPC '${t}' ${m}:`,p,r);const x={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(x,o,d);const{host:v}=new URL(p),E=Bx(v);return this.zo(t,p,x,r,E).then((T=>(ae(Nf,`Received RPC '${t}' ${m}: `,T),T)),(T=>{throw Ur(Nf,`RPC '${t}' ${m} failed with error: `,T,"url: ",p,"request:",r),T}))}jo(t,s,r,o,d,m){return this.Wo(t,s,r,o,d)}Go(t,s,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>t[d]=o)),r&&r.headers.forEach(((o,d)=>t[d]=o))}Qo(t,s){const r=ZS[t];let o=`${this.qo}/v1/${s}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection",ao=(a,t,s)=>{a.listen(t,(r=>{try{s(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class jr extends $S{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!jr.c_){const t=Kx();ao(t,Yx.STAT_EVENT,(s=>{s.stat===Df.PROXY?ae(Ht,"STAT_EVENT: detected buffering proxy"):s.stat===Df.NOPROXY&&ae(Ht,"STAT_EVENT: detected no buffering proxy")})),jr.c_=!0}}zo(t,s,r,o,d){const m=qf();return new Promise(((p,x)=>{const v=new Fx;v.setWithCredentials(!0),v.listenOnce(qx.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Ac.NO_ERROR:const T=v.getResponseJson();ae(Ht,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(T)),p(T);break;case Ac.TIMEOUT:ae(Ht,`RPC '${t}' ${m} timed out`),x(new se(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:const w=v.getStatus();if(ae(Ht,`RPC '${t}' ${m} failed with status:`,w,"response text:",v.getResponseText()),w>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const F=j?.error;if(F&&F.status&&F.message){const W=(function(ne){const ce=ne.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ce)>=0?ce:Z.UNKNOWN})(F.status);x(new se(W,F.message))}else x(new se(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else x(new se(Z.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:t,streamId:m,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ae(Ht,`RPC '${t}' ${m} completed.`)}}));const E=JSON.stringify(o);ae(Ht,`RPC '${t}' ${m} sending request:`,o),v.send(s,"POST",E,r,15)}))}T_(t,s,r){const o=qf(),d=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(p.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,s,r),p.encodeInitMessageHeaders=!0;const v=d.join("");ae(Ht,`Creating RPC '${t}' stream ${o}: ${v}`,p);const E=m.createWebChannel(v,p);this.I_(E);let T=!1,w=!1;const j=new WS({Ho:F=>{w?ae(Ht,`Not sending because RPC '${t}' stream ${o} is closed:`,F):(T||(ae(Ht,`Opening RPC '${t}' stream ${o} transport.`),E.open(),T=!0),ae(Ht,`RPC '${t}' stream ${o} sending:`,F),E.send(F))},Jo:()=>E.close()});return ao(E,lo.EventType.OPEN,(()=>{w||(ae(Ht,`RPC '${t}' stream ${o} transport opened.`),j.i_())})),ao(E,lo.EventType.CLOSE,(()=>{w||(w=!0,ae(Ht,`RPC '${t}' stream ${o} transport closed`),j.o_(),this.E_(E))})),ao(E,lo.EventType.ERROR,(F=>{w||(w=!0,Ur(Ht,`RPC '${t}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),j.o_(new se(Z.UNAVAILABLE,"The operation could not be completed")))})),ao(E,lo.EventType.MESSAGE,(F=>{if(!w){const W=F.data[0];Le(!!W,16349);const k=W,ne=k?.error||k[0]?.error;if(ne){ae(Ht,`RPC '${t}' stream ${o} received error:`,ne);const ce=ne.status;let he=(function(Ee){const D=vt[Ee];if(D!==void 0)return Rv(D)})(ce),xe=ne.message;he===void 0&&(he=Z.INTERNAL,xe="Unknown error status: "+ce+" with message "+ne.message),w=!0,j.o_(new se(he,xe)),E.close()}else ae(Ht,`RPC '${t}' stream ${o} received:`,W),j.__(W)}})),jr.u_(),setTimeout((()=>{j.s_()}),0),j}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((s=>s===t))}Go(t,s,r){super.Go(t,s,r),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Qx()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(a){return new jr(a)}function Sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(a){return new aS(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr.c_=!1;class Fv{constructor(t,s,r=1e3,o=1.5,d=6e4){this.Ci=t,this.timerId=s,this.R_=r,this.A_=o,this.V_=d,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const s=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="PersistentStream";class qv{constructor(t,s,r,o,d,m,p,x){this.Ci=t,this.b_=r,this.S_=o,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=p,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fv(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===Z.RESOURCE_EXHAUSTED?(Ks(s.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(s)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{t((()=>{const o=new se(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,s){const r=this.Q_(this.D_);this.stream=this.j_(t,s),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ae(a_,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return s=>{this.Ci.enqueueAndForget((()=>this.D_===t?s():(ae(a_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tw extends qv{constructor(t,s,r,o,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,m),this.serializer=d}j_(t,s){return this.connection.T_("Listen",t,s)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=lS(this.serializer,t),r=(function(d){if(!("targetChange"in d))return me.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?me.min():m.readTime?Es(m.readTime):me.min()})(t);return this.listener.J_(s,r)}Z_(t){const s={};s.database=Gf(this.serializer),s.addTarget=(function(d,m){let p;const x=m.target;if(p=Lf(x)?{documents:cS(d,x)}:{query:hS(d,x).ft},p.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){p.resumeToken=Dv(d,m.resumeToken);const v=kf(d,m.expectedCount);v!==null&&(p.expectedCount=v)}else if(m.snapshotVersion.compareTo(me.min())>0){p.readTime=Pc(d,m.snapshotVersion.toTimestamp());const v=kf(d,m.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,t);const r=fS(this.serializer,t);r&&(s.labels=r),this.K_(s)}X_(t){const s={};s.database=Gf(this.serializer),s.removeTarget=t,this.K_(s)}}class nw extends qv{constructor(t,s,r,o,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,m),this.serializer=d}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}H_(t){return Le(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Le(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Le(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=uS(t.writeResults,t.commitTime),r=Es(t.commitTime);return this.listener.na(r,s)}ra(){const t={};t.database=Gf(this.serializer),this.K_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((r=>oS(this.serializer,r)))};this.K_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{}class aw extends sw{constructor(t,s,r,o){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Wo(t,Bf(s,r),o,d,m))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new se(Z.UNKNOWN,d.toString())}))}jo(t,s,r,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,p])=>this.connection.jo(t,Bf(s,r),o,m,p,d))).catch((m=>{throw m.name==="FirebaseError"?(m.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new se(Z.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function iw(a,t,s,r){return new aw(a,t,s,r)}class rw{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(s),this.aa=!1):ae("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="RemoteStore";class lw{constructor(t,s,r,o,d){this.localStore=t,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=d,this.Aa.Mo((m=>{r.enqueueAndForget((async()=>{Ri(this)&&(ae(Ni,"Restarting streams for network reachability change."),await(async function(x){const v=pe(x);v.Ea.add(4),await Do(v),v.Va.set("Unknown"),v.Ea.delete(4),await ah(v)})(this))}))})),this.Va=new rw(r,o)}}async function ah(a){if(Ri(a))for(const t of a.Ra)await t(!0)}async function Do(a){for(const t of a.Ra)await t(!1)}function Yv(a,t){const s=pe(a);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),Nm(s)?Am(s):Qr(s).O_()&&Tm(s,t))}function Em(a,t){const s=pe(a),r=Qr(s);s.Ia.delete(t),r.O_()&&Kv(s,t),s.Ia.size===0&&(r.O_()?r.L_():Ri(s)&&s.Va.set("Unknown"))}function Tm(a,t){if(a.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(me.min())>0){const s=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Qr(a).Z_(t)}function Kv(a,t){a.da.$e(t),Qr(a).X_(t)}function Am(a){a.da=new eS({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),At:t=>a.Ia.get(t)||null,ht:()=>a.datastore.serializer.databaseId}),Qr(a).start(),a.Va.ua()}function Nm(a){return Ri(a)&&!Qr(a).x_()&&a.Ia.size>0}function Ri(a){return pe(a).Ea.size===0}function Qv(a){a.da=void 0}async function ow(a){a.Va.set("Online")}async function uw(a){a.Ia.forEach(((t,s)=>{Tm(a,t)}))}async function cw(a,t){Qv(a),Nm(a)?(a.Va.ha(t),Am(a)):a.Va.set("Unknown")}async function hw(a,t,s){if(a.Va.set("Online"),t instanceof jv&&t.state===2&&t.cause)try{await(async function(o,d){const m=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,m),o.Ia.delete(p),o.da.removeTarget(p))})(a,t)}catch(r){ae(Ni,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Bc(a,r)}else if(t instanceof Ic?a.da.Xe(t):t instanceof Cv?a.da.st(t):a.da.tt(t),!s.isEqual(me.min()))try{const r=await Gv(a.localStore);s.compareTo(r)>=0&&await(function(d,m){const p=d.da.Tt(m);return p.targetChanges.forEach(((x,v)=>{if(x.resumeToken.approximateByteSize()>0){const E=d.Ia.get(v);E&&d.Ia.set(v,E.withResumeToken(x.resumeToken,m))}})),p.targetMismatches.forEach(((x,v)=>{const E=d.Ia.get(x);if(!E)return;d.Ia.set(x,E.withResumeToken(kt.EMPTY_BYTE_STRING,E.snapshotVersion)),Kv(d,x);const T=new Da(E.target,x,v,E.sequenceNumber);Tm(d,T)})),d.remoteSyncer.applyRemoteEvent(p)})(a,s)}catch(r){ae(Ni,"Failed to raise snapshot:",r),await Bc(a,r)}}async function Bc(a,t,s){if(!Yr(t))throw t;a.Ea.add(1),await Do(a),a.Va.set("Offline"),s||(s=()=>Gv(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{ae(Ni,"Retrying IndexedDB access"),await s(),a.Ea.delete(1),await ah(a)}))}function Xv(a,t){return t().catch((s=>Bc(a,s,t)))}async function ih(a){const t=pe(a),s=ka(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:om;for(;dw(t);)try{const o=await YS(t.localStore,r);if(o===null){t.Ta.length===0&&s.L_();break}r=o.batchId,fw(t,o)}catch(o){await Bc(t,o)}Jv(t)&&Zv(t)}function dw(a){return Ri(a)&&a.Ta.length<10}function fw(a,t){a.Ta.push(t);const s=ka(a);s.O_()&&s.Y_&&s.ea(t.mutations)}function Jv(a){return Ri(a)&&!ka(a).x_()&&a.Ta.length>0}function Zv(a){ka(a).start()}async function mw(a){ka(a).ra()}async function gw(a){const t=ka(a);for(const s of a.Ta)t.ea(s.mutations)}async function pw(a,t,s){const r=a.Ta.shift(),o=gm.from(r,t,s);await Xv(a,(()=>a.remoteSyncer.applySuccessfulWrite(o))),await ih(a)}async function yw(a,t){t&&ka(a).Y_&&await(async function(r,o){if((function(m){return ZN(m)&&m!==Z.ABORTED})(o.code)){const d=r.Ta.shift();ka(r).B_(),await Xv(r,(()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o))),await ih(r)}})(a,t),Jv(a)&&Zv(a)}async function i_(a,t){const s=pe(a);s.asyncQueue.verifyOperationInProgress(),ae(Ni,"RemoteStore received new credentials");const r=Ri(s);s.Ea.add(3),await Do(s),r&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await ah(s)}async function _w(a,t){const s=pe(a);t?(s.Ea.delete(2),await ah(s)):t||(s.Ea.add(2),await Do(s),s.Va.set("Unknown"))}function Qr(a){return a.ma||(a.ma=(function(s,r,o){const d=pe(s);return d.sa(),new tw(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(a.datastore,a.asyncQueue,{Zo:ow.bind(null,a),Yo:uw.bind(null,a),t_:cw.bind(null,a),J_:hw.bind(null,a)}),a.Ra.push((async t=>{t?(a.ma.B_(),Nm(a)?Am(a):a.Va.set("Unknown")):(await a.ma.stop(),Qv(a))}))),a.ma}function ka(a){return a.fa||(a.fa=(function(s,r,o){const d=pe(s);return d.sa(),new nw(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(a.datastore,a.asyncQueue,{Zo:()=>Promise.resolve(),Yo:mw.bind(null,a),t_:yw.bind(null,a),ta:gw.bind(null,a),na:pw.bind(null,a)}),a.Ra.push((async t=>{t?(a.fa.B_(),await ih(a)):(await a.fa.stop(),a.Ta.length>0&&(ae(Ni,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t,s,r,o,d){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=d,this.deferred=new Va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,r,o,d){const m=Date.now()+r,p=new Sm(t,s,m,o,d);return p.start(r),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wm(a,t){if(Ks("AsyncQueue",`${t}: ${a}`),Yr(a))return new se(Z.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{static emptySet(t){return new Dr(t.comparator)}constructor(t){this.comparator=t?(s,r)=>t(s,r)||ue.comparator(s.key,r.key):(s,r)=>ue.comparator(s.key,r.key),this.keyedMap=oo(),this.sortedSet=new st(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,r)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Dr)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const r=new Dr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.ga=new st(ue.comparator)}track(t){const s=t.doc.key,r=this.ga.get(s);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(s,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(s):t.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):fe(63341,{Vt:t,pa:r}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,r)=>{t.push(r)})),t}}class Br{constructor(t,s,r,o,d,m,p,x,v){this.query=t,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=p,this.excludesMetadataChanges=x,this.hasCachedResults=v}static fromInitialDocuments(t,s,r,o,d){const m=[];return s.forEach((p=>{m.push({type:0,doc:p})})),new Br(t,s,Dr.emptySet(s),m,r,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$c(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,r=t.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class vw{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=pe(s),d=o.queries;o.queries=l_(),d.forEach(((m,p)=>{for(const x of p.ba)x.onError(r)}))})(this,new se(Z.ABORTED,"Firestore shutting down"))}}function l_(){return new Ii((a=>yv(a)),$c)}async function bw(a,t){const s=pe(a);let r=3;const o=t.query;let d=s.queries.get(o);d?!d.Sa()&&t.Da()&&(r=2):(d=new xw,r=t.Da()?0:1);try{switch(r){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(m){const p=wm(m,`Initialization of query '${Tr(t.query)}' failed`);return void t.onError(p)}s.queries.set(o,d),d.ba.push(t),t.va(s.onlineState),d.wa&&t.Fa(d.wa)&&Im(s)}async function Ew(a,t){const s=pe(a),r=t.query;let o=3;const d=s.queries.get(r);if(d){const m=d.ba.indexOf(t);m>=0&&(d.ba.splice(m,1),d.ba.length===0?o=t.Da()?0:1:!d.Sa()&&t.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function Tw(a,t){const s=pe(a);let r=!1;for(const o of t){const d=o.query,m=s.queries.get(d);if(m){for(const p of m.ba)p.Fa(o)&&(r=!0);m.wa=o}}r&&Im(s)}function Aw(a,t,s){const r=pe(a),o=r.queries.get(t);if(o)for(const d of o.ba)d.onError(s);r.queries.delete(t)}function Im(a){a.Ca.forEach((t=>{t.next()}))}var Yf,o_;(o_=Yf||(Yf={})).Ma="default",o_.Cache="cache";class Nw{constructor(t,s,r){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Br(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.Ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=Br.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t){this.key=t}}class Wv{constructor(t){this.key=t}}class Sw{constructor(t,s){this.query=t,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ie(),this.mutatedKeys=Ie(),this.eu=_v(t),this.tu=new Dr(this.eu)}get nu(){return this.Za}ru(t,s){const r=s?s.iu:new r_,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,m=o,p=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const w=o.get(E),j=Wc(this.query,T)?T:null,F=!!w&&this.mutatedKeys.has(w.key),W=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let k=!1;w&&j?w.data.isEqual(j.data)?F!==W&&(r.track({type:3,doc:j}),k=!0):this.su(w,j)||(r.track({type:2,doc:j}),k=!0,(x&&this.eu(j,x)>0||v&&this.eu(j,v)<0)&&(p=!0)):!w&&j?(r.track({type:0,doc:j}),k=!0):w&&!j&&(r.track({type:1,doc:w}),k=!0,(x||v)&&(p=!0)),k&&(j?(m=m.add(j),d=W?d.add(E):d.delete(E)):(m=m.delete(E),d=d.delete(E)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const E=this.query.limitType==="F"?m.last():m.first();m=m.delete(E.key),d=d.delete(E.key),r.track({type:1,doc:E})}return{tu:m,iu:r,Ss:p,mutatedKeys:d}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,r,o){const d=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort(((E,T)=>(function(j,F){const W=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Vt:k})}};return W(j)-W(F)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(r),o=o??!1;const p=s&&!o?this._u():[],x=this.Ya.size===0&&this.current&&!o?1:0,v=x!==this.Xa;return this.Xa=x,m.length!==0||v?{snapshot:new Br(this.query,t.tu,d,m,t.mutatedKeys,x===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Ie(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const s=[];return t.forEach((r=>{this.Ya.has(r)||s.push(new Wv(r))})),this.Ya.forEach((r=>{t.has(r)||s.push(new $v(r))})),s}cu(t){this.Za=t.ks,this.Ya=Ie();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return Br.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Rm="SyncEngine";class ww{constructor(t,s,r){this.query=t,this.targetId=s,this.view=r}}class Iw{constructor(t){this.key=t,this.hu=!1}}class Rw{constructor(t,s,r,o,d,m){this.localStore=t,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Ii((p=>yv(p)),$c),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(ue.comparator),this.Au=new Map,this.Vu=new _m,this.du={},this.mu=new Map,this.fu=kr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Cw(a,t,s=!0){const r=ib(a);let o;const d=r.Tu.get(t);return d?(r.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await eb(r,t,s,!0),o}async function jw(a,t){const s=ib(a);await eb(s,t,!0,!1)}async function eb(a,t,s,r){const o=await KS(a.localStore,bs(t)),d=o.targetId,m=a.sharedClientState.addLocalQueryTarget(d,s);let p;return r&&(p=await Dw(a,t,d,m==="current",o.resumeToken)),a.isPrimaryClient&&s&&Yv(a.remoteStore,o),p}async function Dw(a,t,s,r,o){a.pu=(T,w,j)=>(async function(W,k,ne,ce){let he=k.view.ru(ne);he.Ss&&(he=await e_(W.localStore,k.query,!1).then((({documents:D})=>k.view.ru(D,he))));const xe=ce&&ce.targetChanges.get(k.targetId),Ue=ce&&ce.targetMismatches.get(k.targetId)!=null,Ee=k.view.applyChanges(he,W.isPrimaryClient,xe,Ue);return c_(W,k.targetId,Ee.au),Ee.snapshot})(a,T,w,j);const d=await e_(a.localStore,t,!0),m=new Sw(t,d.ks),p=m.ru(d.documents),x=jo.createSynthesizedTargetChangeForCurrentChange(s,r&&a.onlineState!=="Offline",o),v=m.applyChanges(p,a.isPrimaryClient,x);c_(a,s,v.au);const E=new ww(t,s,m);return a.Tu.set(t,E),a.Iu.has(s)?a.Iu.get(s).push(t):a.Iu.set(s,[t]),v.snapshot}async function Ow(a,t,s){const r=pe(a),o=r.Tu.get(t),d=r.Iu.get(o.targetId);if(d.length>1)return r.Iu.set(o.targetId,d.filter((m=>!$c(m,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ff(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&Em(r.remoteStore,o.targetId),Kf(r,o.targetId)})).catch(qr)):(Kf(r,o.targetId),await Ff(r.localStore,o.targetId,!0))}async function Vw(a,t){const s=pe(a),r=s.Tu.get(t),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Em(s.remoteStore,r.targetId))}async function Mw(a,t,s){const r=Hw(a);try{const o=await(function(m,p){const x=pe(m),v=Je.now(),E=p.reduce(((j,F)=>j.add(F.key)),Ie());let T,w;return x.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let F=Qs(),W=Ie();return x.xs.getEntries(j,E).next((k=>{F=k,F.forEach(((ne,ce)=>{ce.isValidDocument()||(W=W.add(ne))}))})).next((()=>x.localDocuments.getOverlayedDocuments(j,F))).next((k=>{T=k;const ne=[];for(const ce of p){const he=YN(ce,T.get(ce.key).overlayedDocument);he!=null&&ne.push(new Fa(ce.key,he,ov(he.value.mapValue),Qn.exists(!0)))}return x.mutationQueue.addMutationBatch(j,v,ne,p)})).next((k=>{w=k;const ne=k.applyToLocalDocumentSet(T,W);return x.documentOverlayCache.saveOverlays(j,k.batchId,ne)}))})).then((()=>({batchId:w.batchId,changes:vv(T)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(m,p,x){let v=m.du[m.currentUser.toKey()];v||(v=new st(we)),v=v.insert(p,x),m.du[m.currentUser.toKey()]=v})(r,o.batchId,s),await Oo(r,o.changes),await ih(r.remoteStore)}catch(o){const d=wm(o,"Failed to persist write");s.reject(d)}}async function tb(a,t){const s=pe(a);try{const r=await FS(s.localStore,t);t.targetChanges.forEach(((o,d)=>{const m=s.Au.get(d);m&&(Le(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?m.hu=!0:o.modifiedDocuments.size>0?Le(m.hu,14607):o.removedDocuments.size>0&&(Le(m.hu,42227),m.hu=!1))})),await Oo(s,r,t)}catch(r){await qr(r)}}function u_(a,t,s){const r=pe(a);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((d,m)=>{const p=m.view.va(t);p.snapshot&&o.push(p.snapshot)})),(function(m,p){const x=pe(m);x.onlineState=p;let v=!1;x.queries.forEach(((E,T)=>{for(const w of T.ba)w.va(p)&&(v=!0)})),v&&Im(x)})(r.eventManager,t),o.length&&r.Pu.J_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Uw(a,t,s){const r=pe(a);r.sharedClientState.updateQueryState(t,"rejected",s);const o=r.Au.get(t),d=o&&o.key;if(d){let m=new st(ue.comparator);m=m.insert(d,qt.newNoDocument(d,me.min()));const p=Ie().add(d),x=new nh(me.min(),new Map,new st(we),m,p);await tb(r,x),r.Ru=r.Ru.remove(d),r.Au.delete(t),Cm(r)}else await Ff(r.localStore,t,!1).then((()=>Kf(r,t,s))).catch(qr)}async function Lw(a,t){const s=pe(a),r=t.batch.batchId;try{const o=await GS(s.localStore,t);sb(s,r,null),nb(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Oo(s,o)}catch(o){await qr(o)}}async function zw(a,t,s){const r=pe(a);try{const o=await(function(m,p){const x=pe(m);return x.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return x.mutationQueue.lookupMutationBatch(v,p).next((T=>(Le(T!==null,37113),E=T.keys(),x.mutationQueue.removeMutationBatch(v,T)))).next((()=>x.mutationQueue.performConsistencyCheck(v))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>x.localDocuments.getDocuments(v,E)))}))})(r.localStore,t);sb(r,t,s),nb(r,t),r.sharedClientState.updateMutationState(t,"rejected",s),await Oo(r,o)}catch(o){await qr(o)}}function nb(a,t){(a.mu.get(t)||[]).forEach((s=>{s.resolve()})),a.mu.delete(t)}function sb(a,t,s){const r=pe(a);let o=r.du[r.currentUser.toKey()];if(o){const d=o.get(t);d&&(s?d.reject(s):d.resolve(),o=o.remove(t)),r.du[r.currentUser.toKey()]=o}}function Kf(a,t,s=null){a.sharedClientState.removeLocalQueryTarget(t);for(const r of a.Iu.get(t))a.Tu.delete(r),s&&a.Pu.yu(r,s);a.Iu.delete(t),a.isPrimaryClient&&a.Vu.Gr(t).forEach((r=>{a.Vu.containsKey(r)||ab(a,r)}))}function ab(a,t){a.Eu.delete(t.path.canonicalString());const s=a.Ru.get(t);s!==null&&(Em(a.remoteStore,s),a.Ru=a.Ru.remove(t),a.Au.delete(s),Cm(a))}function c_(a,t,s){for(const r of s)r instanceof $v?(a.Vu.addReference(r.key,t),Pw(a,r)):r instanceof Wv?(ae(Rm,"Document no longer in limbo: "+r.key),a.Vu.removeReference(r.key,t),a.Vu.containsKey(r.key)||ab(a,r.key)):fe(19791,{wu:r})}function Pw(a,t){const s=t.key,r=s.path.canonicalString();a.Ru.get(s)||a.Eu.has(r)||(ae(Rm,"New document in limbo: "+s),a.Eu.add(r),Cm(a))}function Cm(a){for(;a.Eu.size>0&&a.Ru.size<a.maxConcurrentLimboResolutions;){const t=a.Eu.values().next().value;a.Eu.delete(t);const s=new ue(Ke.fromString(t)),r=a.fu.next();a.Au.set(r,new Iw(s)),a.Ru=a.Ru.insert(s,r),Yv(a.remoteStore,new Da(bs(gv(s.path)),r,"TargetPurposeLimboResolution",Xc.ce))}}async function Oo(a,t,s){const r=pe(a),o=[],d=[],m=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,x)=>{m.push(r.pu(x,t,s).then((v=>{if((v||s)&&r.isPrimaryClient){const E=v?!v.fromCache:s?.targetChanges.get(x.targetId)?.current;r.sharedClientState.updateQueryState(x.targetId,E?"current":"not-current")}if(v){o.push(v);const E=vm.Es(x.targetId,v);d.push(E)}})))})),await Promise.all(m),r.Pu.J_(o),await(async function(x,v){const E=pe(x);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>$.forEach(v,(w=>$.forEach(w.Ts,(j=>E.persistence.referenceDelegate.addReference(T,w.targetId,j))).next((()=>$.forEach(w.Is,(j=>E.persistence.referenceDelegate.removeReference(T,w.targetId,j)))))))))}catch(T){if(!Yr(T))throw T;ae(bm,"Failed to update sequence numbers: "+T)}for(const T of v){const w=T.targetId;if(!T.fromCache){const j=E.vs.get(w),F=j.snapshotVersion,W=j.withLastLimboFreeSnapshotVersion(F);E.vs=E.vs.insert(w,W)}}})(r.localStore,d))}async function kw(a,t){const s=pe(a);if(!s.currentUser.isEqual(t)){ae(Rm,"User change. New user:",t.toKey());const r=await Hv(s.localStore,t);s.currentUser=t,(function(d,m){d.mu.forEach((p=>{p.forEach((x=>{x.reject(new se(Z.CANCELLED,m))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Oo(s,r.Ns)}}function Bw(a,t){const s=pe(a),r=s.Au.get(t);if(r&&r.hu)return Ie().add(r.key);{let o=Ie();const d=s.Iu.get(t);if(!d)return o;for(const m of d){const p=s.Tu.get(m);o=o.unionWith(p.view.nu)}return o}}function ib(a){const t=pe(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=tb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Uw.bind(null,t),t.Pu.J_=Tw.bind(null,t.eventManager),t.Pu.yu=Aw.bind(null,t.eventManager),t}function Hw(a){const t=pe(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zw.bind(null,t),t}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return HS(this.persistence,new PS,t.initialUser,this.serializer)}Cu(t){return new Bv(xm.Vi,this.serializer)}Du(t){return new XS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class Gw extends Hc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){Le(this.persistence.referenceDelegate instanceof kc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AS(r,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Bv((r=>kc.Vi(r,s)),this.serializer)}}class Qf{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kw.bind(null,this.syncEngine),await _w(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new vw})()}createDatastore(t){const s=sh(t.databaseInfo.databaseId),r=ew(t.databaseInfo);return iw(t.authCredentials,t.appCheckCredentials,r,s)}createRemoteStore(t){return(function(r,o,d,m,p){return new lw(r,o,d,m,p)})(this.localStore,this.datastore,t.asyncQueue,(s=>u_(this.syncEngine,s,0)),(function(){return s_.v()?new s_:new JS})())}createSyncEngine(t,s){return(function(o,d,m,p,x,v,E){const T=new Rw(o,d,m,p,x,v);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const r=pe(s);ae(Ni,"RemoteStore shutting down."),r.Ea.add(5),await Do(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qf.provider={build:()=>new Qf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ks("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="FirestoreClient";class qw{constructor(t,s,r,o,d){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=r,this._databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(r,(async m=>{ae(Ba,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(r,(m=>(ae(Ba,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const r=wm(s,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function wf(a,t){a.asyncQueue.verifyOperationInProgress(),ae(Ba,"Initializing OfflineComponentProvider");const s=a.configuration;await t.initialize(s);let r=s.initialUser;a.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Hv(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=t}async function h_(a,t){a.asyncQueue.verifyOperationInProgress();const s=await Yw(a);ae(Ba,"Initializing OnlineComponentProvider"),await t.initialize(s,a.configuration),a.setCredentialChangeListener((r=>i_(t.remoteStore,r))),a.setAppCheckTokenChangeListener(((r,o)=>i_(t.remoteStore,o))),a._onlineComponents=t}async function Yw(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ae(Ba,"Using user provided OfflineComponentProvider");try{await wf(a,a._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Ur("Error using user provided cache. Falling back to memory cache: "+s),await wf(a,new Hc)}}else ae(Ba,"Using default OfflineComponentProvider"),await wf(a,new Gw(void 0));return a._offlineComponents}async function rb(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ae(Ba,"Using user provided OnlineComponentProvider"),await h_(a,a._uninitializedComponentsProvider._online)):(ae(Ba,"Using default OnlineComponentProvider"),await h_(a,new Qf))),a._onlineComponents}function Kw(a){return rb(a).then((t=>t.syncEngine))}async function Qw(a){const t=await rb(a),s=t.eventManager;return s.onListen=Cw.bind(null,t.syncEngine),s.onUnlisten=Ow.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=jw.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=Vw.bind(null,t.syncEngine),s}function Xw(a,t,s={}){const r=new Va;return a.asyncQueue.enqueueAndForget((async()=>(function(d,m,p,x,v){const E=new Fw({next:w=>{E.Nu(),m.enqueueAndForget((()=>Ew(d,T))),w.fromCache&&x.source==="server"?v.reject(new se(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(w)},error:w=>v.reject(w)}),T=new Nw(p,E,{includeMetadataChanges:!0,Ka:!0});return bw(d,T)})(await Qw(a),a.asyncQueue,t,s,r))),r.promise}function Jw(a,t){const s=new Va;return a.asyncQueue.enqueueAndForget((async()=>Mw(await Kw(a),t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="ComponentProvider",d_=new Map;function $w(a,t,s,r,o){return new mN(a,t,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,lb(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="firestore.googleapis.com",f_=!0;class m_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new se(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ob,this.ssl=f_}else this.host=t.host,this.ssl=t.ssl??f_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=kv;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ES)throw new se(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}sN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lb(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rh{constructor(t,s,r,o){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new se(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new KA;switch(r.type){case"firstParty":return new ZA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=d_.get(s);r&&(ae(Zw,"Removing Datastore"),d_.delete(s),r.terminate())})(this),Promise.resolve()}}function Ww(a,t,s,r={}){a=Ai(a,rh);const o=Bx(t),d=a._getSettings(),m={...d,emulatorOptions:a._getEmulatorOptions()},p=`${t}:${s}`;o&&(bA(`https://${p}`),EA("Firestore",!0)),d.host!==ob&&d.host!==p&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...d,host:p,ssl:o,emulatorOptions:r};if(!TA(x,m)&&(a._setSettings(x),r.mockUserToken)){let v,E;if(typeof r.mockUserToken=="string")v=r.mockUserToken,E=Gt.MOCK_USER;else{v=AA(r.mockUserToken,a._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new se(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Gt(T)}a._authCredentials=new QA(new Jx(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ci(this.firestore,t,this._query)}}class St{constructor(t,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new St(this.firestore,t,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,r){if(Ro(s,St._jsonSchema))return new St(t,r||null,new ue(Ke.fromString(s.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Tt("string",St._jsonSchemaVersion),referencePath:Tt("string")};class Ma extends Ci{constructor(t,s,r){super(t,s,gv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new St(this.firestore,null,new ue(t))}withConverter(t){return new Ma(this.firestore,t,this._path)}}function e1(a,t,...s){if(a=Ys(a),Zx("collection","path",t),a instanceof rh){const r=Ke.fromString(t,...s);return wy(r),new Ma(a,null,r)}{if(!(a instanceof St||a instanceof Ma))throw new se(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(Ke.fromString(t,...s));return wy(r),new Ma(a.firestore,null,r)}}function jm(a,t,...s){if(a=Ys(a),arguments.length===1&&(t=lm.newId()),Zx("doc","path",t),a instanceof rh){const r=Ke.fromString(t,...s);return Sy(r),new St(a,null,new ue(r))}{if(!(a instanceof St||a instanceof Ma))throw new se(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(Ke.fromString(t,...s));return Sy(r),new St(a.firestore,a instanceof Ma?a.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="AsyncQueue";class p_{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fv(this,"async_queue_retry"),this._c=()=>{const r=Sf();r&&ae(g_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const s=Sf();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=Sf();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Va;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Yr(t))throw t;ae(g_,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ks("INTERNAL UNHANDLED ERROR: ",y_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(t,s,r){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const o=Sm.createAndSchedule(this,t,s,r,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&fe(47125,{Pc:y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function y_(a){let t=a.message||"";return a.stack&&(t=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),t}class Vo extends rh{constructor(t,s,r,o){super(t,s,r,o),this.type="firestore",this._queue=new p_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new p_(t),this._firestoreClient=void 0,await t}}}function t1(a,t){const s=typeof a=="object"?a:_A(),r=typeof a=="string"?a:Vc,o=xA(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const d=vA("firestore");d&&Ww(o,...d)}return o}function ub(a){if(a._terminated)throw new se(Z.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||n1(a),a._firestoreClient}function n1(a){const t=a._freezeSettings(),s=$w(a._databaseId,a._app?.options.appId||"",a._persistenceKey,a._app?.options.apiKey,t);a._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),a._firestoreClient=new qw(a._authCredentials,a._appCheckCredentials,a._queue,s,a._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Dn(kt.fromBase64String(t))}catch(s){throw new se(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new Dn(kt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ro(t,Dn._jsonSchema))return Dn.fromBase64String(t.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:Tt("string",Dn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new se(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new se(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new se(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return we(this._lat,t._lat)||we(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(t){if(Ro(t,Ts._jsonSchema))return new Ts(t.latitude,t.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:Tt("string",Ts._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let d=0;d<r.length;++d)if(r[d]!==o[d])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Xn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ro(t,Xn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new Xn(t.vectorValues);throw new se(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xn._jsonSchemaVersion="firestore/vectorValue/1.0",Xn._jsonSchema={type:Tt("string",Xn._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=/^__.*__$/;class a1{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return this.fieldMask!==null?new Fa(t,this.data,this.fieldMask,s,this.fieldTransforms):new Co(t,this.data,s,this.fieldTransforms)}}class cb{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return new Fa(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function hb(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{dataSource:a})}}class Vm{constructor(t,s,r,o,d,m){this.settings=t,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,d===void 0&&this.validatePath(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new Vm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const s=this.path?.child(t),r=this.contextWith({path:s,arrayElement:!1});return r.validatePathSegment(t),r}childContextForFieldPath(t){const s=this.path?.child(t),r=this.contextWith({path:s,arrayElement:!1});return r.validatePath(),r}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Gc(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(hb(this.dataSource)&&s1.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class i1{constructor(t,s,r){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=r||sh(t)}createContext(t,s,r,o=!1){return new Vm({dataSource:t,methodName:s,targetDoc:r,path:Pt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mm(a){const t=a._freezeSettings(),s=sh(a._databaseId);return new i1(a._databaseId,!!t.ignoreUndefinedProperties,s)}function r1(a,t,s,r,o,d={}){const m=a.createContext(d.merge||d.mergeFields?2:0,t,s,o);Um("Data must be an object, but it was:",m,r);const p=db(r,m);let x,v;if(d.merge)x=new yn(m.fieldMask),v=m.fieldTransforms;else if(d.mergeFields){const E=[];for(const T of d.mergeFields){const w=Si(t,T,s);if(!m.contains(w))throw new se(Z.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);gb(E,w)||E.push(w)}x=new yn(E),v=m.fieldTransforms.filter((T=>x.covers(T.field)))}else x=null,v=m.fieldTransforms;return new a1(new ln(p),x,v)}class lh extends Om{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof lh}}function l1(a,t,s,r){const o=a.createContext(1,t,s);Um("Data must be an object, but it was:",o,r);const d=[],m=ln.empty();Ga(r,((x,v)=>{const E=mb(t,x,s);v=Ys(v);const T=o.childContextForFieldPath(E);if(v instanceof lh)d.push(E);else{const w=Mo(v,T);w!=null&&(d.push(E),m.set(E,w))}}));const p=new yn(d);return new cb(m,p,o.fieldTransforms)}function o1(a,t,s,r,o,d){const m=a.createContext(1,t,s),p=[Si(t,r,s)],x=[o];if(d.length%2!=0)throw new se(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<d.length;w+=2)p.push(Si(t,d[w])),x.push(d[w+1]);const v=[],E=ln.empty();for(let w=p.length-1;w>=0;--w)if(!gb(v,p[w])){const j=p[w];let F=x[w];F=Ys(F);const W=m.childContextForFieldPath(j);if(F instanceof lh)v.push(j);else{const k=Mo(F,W);k!=null&&(v.push(j),E.set(j,k))}}const T=new yn(v);return new cb(E,T,m.fieldTransforms)}function u1(a,t,s,r=!1){return Mo(s,a.createContext(r?4:3,t))}function Mo(a,t){if(fb(a=Ys(a)))return Um("Unsupported field value:",t,a),db(a,t);if(a instanceof Om)return(function(r,o){if(!hb(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const d=r._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(r,o){const d=[];let m=0;for(const p of r){let x=Mo(p,o.childContextForArray(m));x==null&&(x={nullValue:"NULL_VALUE"}),d.push(x),m++}return{arrayValue:{values:d}}})(a,t)}return(function(r,o){if((r=Ys(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const d=Je.fromDate(r);return{timestampValue:Pc(o.serializer,d)}}if(r instanceof Je){const d=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,d)}}if(r instanceof Ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:Dv(o.serializer,r._byteString)};if(r instanceof St){const d=o.databaseId,m=r.firestore._databaseId;if(!m.isEqual(d))throw o.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:ym(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Xn)return(function(m,p){const x=m instanceof Xn?m.toArray():m;return{mapValue:{fields:{[rv]:{stringValue:lv},[Mc]:{arrayValue:{values:x.map((E=>{if(typeof E!="number")throw p.createError("VectorValues must only contain numeric values.");return fm(p.serializer,E)}))}}}}}})(r,o);if(Pv(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Qc(r)}`)})(a,t)}function db(a,t){const s={};return ev(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ga(a,((r,o)=>{const d=Mo(o,t.childContextForField(r));d!=null&&(s[r]=d)})),{mapValue:{fields:s}}}function fb(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Je||a instanceof Ts||a instanceof Dn||a instanceof St||a instanceof Om||a instanceof Xn||Pv(a))}function Um(a,t,s){if(!fb(s)||!$x(s)){const r=Qc(s);throw r==="an object"?t.createError(a+" a custom object"):t.createError(a+" "+r)}}function Si(a,t,s){if((t=Ys(t))instanceof Dm)return t._internalPath;if(typeof t=="string")return mb(a,t);throw Gc("Field path arguments must be of type string or ",a,!1,void 0,s)}const c1=new RegExp("[~\\*/\\[\\]]");function mb(a,t,s){if(t.search(c1)>=0)throw Gc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,s);try{return new Dm(...t.split("."))._internalPath}catch{throw Gc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,s)}}function Gc(a,t,s,r,o){const d=r&&!r.isEmpty(),m=o!==void 0;let p=`Function ${t}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let x="";return(d||m)&&(x+=" (found",d&&(x+=` in field ${r}`),m&&(x+=` in document ${o}`),x+=")"),new se(Z.INVALID_ARGUMENT,p+a+x)}function gb(a,t){return a.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{convertValue(t,s="none"){switch(Pa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ct(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(za(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw fe(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const r={};return Ga(t,((o,d)=>{r[o]=this.convertValue(d,s)})),r}convertVectorValue(t){const s=t.fields?.[Mc].arrayValue?.values?.map((r=>ct(r.doubleValue)));return new Xn(s)}convertGeoPoint(t){return new Ts(ct(t.latitude),ct(t.longitude))}convertArray(t,s){return(t.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const r=Zc(t);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(bo(t));default:return null}}convertTimestamp(t){const s=La(t);return new Je(s.seconds,s.nanos)}convertDocumentKey(t,s){const r=Ke.fromString(t);Le(zv(r),9688,{name:t});const o=new Eo(r.get(1),r.get(3)),d=new ue(r.popFirst(5));return o.isEqual(s)||Ks(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1 extends h1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Dn(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new St(this.firestore,null,s)}}const __="@firebase/firestore",x_="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,s,r,o,d){this._firestore=t,this._userDataWriter=s,this._key=r,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new f1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const s=this._document.data.field(Si("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class f1 extends pb{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new se(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lm{}class yb extends Lm{}function _b(a,t,...s){let r=[];t instanceof Lm&&r.push(t),r=r.concat(s),(function(d){const m=d.filter((x=>x instanceof zm)).length,p=d.filter((x=>x instanceof oh)).length;if(m>1||m>0&&p>0)throw new se(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)a=o._apply(a);return a}class oh extends yb{constructor(t,s,r){super(),this._field=t,this._op=s,this._value=r,this.type="where"}static _create(t,s,r){return new oh(t,s,r)}_apply(t){const s=this._parse(t);return vb(t._query,s),new Ci(t.firestore,t.converter,zf(t._query,s))}_parse(t){const s=Mm(t.firestore);return(function(d,m,p,x,v,E,T){let w;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new se(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){b_(T,E);const F=[];for(const W of T)F.push(v_(x,d,W));w={arrayValue:{values:F}}}else w=v_(x,d,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||b_(T,E),w=u1(p,m,T,E==="in"||E==="not-in");return Et.create(v,E,w)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}function g1(a,t,s){const r=t,o=Si("where",a);return oh._create(o,r,s)}class zm extends Lm{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new zm(t,s)}_parse(t){const s=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Jn.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(o,d){let m=o;const p=d.getFlattenedFilters();for(const x of p)vb(m,x),m=zf(m,x)})(t._query,s),new Ci(t.firestore,t.converter,zf(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pm extends yb{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new Pm(t,s)}_apply(t){const s=(function(o,d,m){if(o.startAt!==null)throw new se(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new se(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ao(d,m)})(t._query,this._field,this._direction);return new Ci(t.firestore,t.converter,DN(t._query,s))}}function xb(a,t="asc"){const s=t,r=Si("orderBy",a);return Pm._create(r,s)}function v_(a,t,s){if(typeof(s=Ys(s))=="string"){if(s==="")throw new se(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pv(t)&&s.indexOf("/")!==-1)throw new se(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=t.path.child(Ke.fromString(s));if(!ue.isDocumentKey(r))throw new se(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return My(a,new ue(r))}if(s instanceof St)return My(a,s._key);throw new se(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qc(s)}.`)}function b_(a,t){if(!Array.isArray(a)||a.length===0)throw new se(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vb(a,t){const s=(function(o,d){for(const m of o)for(const p of m.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(a.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new se(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new se(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}function p1(a,t,s){let r;return r=a?a.toFirestore(t):t,r}class pc{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Or extends pb{constructor(t,s,r,o,d,m){super(t,s,r,o,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new Rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const r=this._document.data.field(Si("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=Or._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:Tt("string",Or._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Rc extends Or{data(t={}){return super.data(t)}}class Vr{constructor(t,s,r,o){this._firestore=t,this._userDataWriter=s,this._snapshot=o,this.metadata=new pc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((r=>{t.call(s,new Rc(this._firestore,this._userDataWriter,r.key,r,new pc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new se(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map((p=>{const x=new Rc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:x,oldIndex:-1,newIndex:m++}}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const x=new Rc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=m.indexOf(p.doc.key),m=m.delete(p.doc.key)),p.type!==1&&(m=m.add(p.doc),E=m.indexOf(p.doc.key)),{type:y1(p.type),doc:x,oldIndex:v,newIndex:E}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Vr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),r.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function y1(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:a})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr._jsonSchemaVersion="firestore/querySnapshot/1.0",Vr._jsonSchema={type:Tt("string",Vr._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};function bb(a){a=Ai(a,Ci);const t=Ai(a.firestore,Vo),s=ub(t),r=new d1(t);return m1(a._query),Xw(s,a._query).then((o=>new Vr(t,r,a,o)))}function _1(a,t,s,...r){a=Ai(a,St);const o=Ai(a.firestore,Vo),d=Mm(o);let m;return m=typeof(t=Ys(t))=="string"||t instanceof Dm?o1(d,"updateDoc",a._key,t,s,r):l1(d,"updateDoc",a._key,t),km(o,[m.toMutation(a._key,Qn.exists(!0))])}function x1(a){return km(Ai(a.firestore,Vo),[new mm(a._key,Qn.none())])}function v1(a,t){const s=Ai(a.firestore,Vo),r=jm(a),o=p1(a.converter,t),d=Mm(a.firestore);return km(s,[r1(d,"addDoc",r._key,o,a.converter!==null,{}).toMutation(r._key,Qn.exists(!1))]).then((()=>r))}function km(a,t){const s=ub(a);return Jw(s,t)}(function(t,s=!0){YA(RA),wA(new IA("firestore",((r,{instanceIdentifier:o,options:d})=>{const m=r.getProvider("app").getImmediate(),p=new Vo(new XA(r.getProvider("auth-internal")),new $A(m,r.getProvider("app-check-internal")),gN(m,o),m);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),py(__,x_,t),py(__,x_,"esm2020")})();const Sr={apiKey:"AIzaSyCnFj83gRx9yQPwj20dhelL-s-MF6suLQ0",authDomain:"dthstore-aa594.firebaseapp.com",projectId:"dthstore-aa594",storageBucket:"dthstore-aa594.firebasestorage.app",messagingSenderId:"690677311601",appId:"1:690677311601:web:e80ab1279f713e406d13d0"},Xr=()=>!!(Sr.apiKey&&Sr.authDomain&&Sr.projectId&&Sr.apiKey!=="your_firebase_api_key"&&!Sr.apiKey.includes("YOUR_"));let If=null,Xs=null,wi=null,Fc=null;if(Xr())try{If=CA(Sr),Xs=jA(If),wi=t1(If),Fc=new DA,Fc.setCustomParameters({prompt:"select_account"}),console.log(" Firebase initialized successfully")}catch(a){console.warn(" Firebase initialization failed:",a)}else console.log(" Firebase not configured. Using demo mode for authentication.");const uh="/api",Ha="dthstore_leads_v2",wo="dthstore_products_v1",Eb="dthstore_user_session",Tb="dthstore_site_config_v1",Ab="dthstore_notification_config_v1",b1={emailEnabled:!1,web3formsKey:"",adminEmail:"",telegramEnabled:!1,telegramBotToken:"",telegramChatId:"",whatsappEnabled:!1,whatsappApiUrl:"",whatsappApiKey:"",whatsappSessionId:"DTHSTORE",whatsappAdminNumber:"",browserNotificationsEnabled:!0},Zn=(a,t)=>{try{const s=localStorage.getItem(a);return s?JSON.parse(s):t}catch{return t}},Js=(a,t)=>localStorage.setItem(a,JSON.stringify(t)),E1=(a,t)=>(console.warn("Demo login is disabled. Use Firebase authentication."),null),T1=()=>localStorage.removeItem(Eb),A1=()=>{const a=localStorage.getItem(Eb);return a?JSON.parse(a):null};async function ch(a,t){try{const s=await a;if(!s.ok)throw new Error("API Error");return await s.json()}catch(s){return console.warn("API Unreachable, using LocalStorage fallback",s),t()}}const Hr=wi?e1(wi,"leads"):null,Bm=async()=>{if(Hr)try{const a=_b(Hr,xb("createdAt","desc"));return(await bb(a)).docs.map(s=>({id:s.id,...s.data()}))}catch(a){console.error("Firestore getLeads failed:",a)}return Zn(Ha,Io)},N1=async a=>{if(Hr)try{const s=_b(Hr,g1("userId","==",a),xb("createdAt","desc"));return(await bb(s)).docs.map(o=>({id:o.id,...o.data()}))}catch(s){console.error("Firestore getUserLeads failed:",s)}return Zn(Ha,Io).filter(s=>s.userId===a)},S1=async a=>{if(Hr)try{const{id:r,...o}=a,d=await v1(Hr,{...o,createdAt:Date.now()});return{...a,id:d.id}}catch(r){console.error("Firestore saveLead failed:",r)}const t=Zn(Ha,Io),s=[a,...t];return Js(Ha,s),a},io=async a=>{if(wi)try{const r=jm(wi,"leads",a.id),{id:o,...d}=a;return await _1(r,d),Bm()}catch(r){console.error("Firestore updateLead failed:",r)}const s=Zn(Ha,Io).map(r=>r.id===a.id?a:r);return Js(Ha,s),s},w1=async a=>{if(wi)try{return await x1(jm(wi,"leads",a)),Bm()}catch(r){console.error("Firestore deleteLead failed:",r)}const s=Zn(Ha,Io).filter(r=>r.id!==a);return Js(Ha,s),s},Nb=()=>Zn(wo,Kc),I1=async a=>ch(fetch(`${uh}/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),()=>{const t=Zn(wo,Kc),s=[a,...t];return Js(wo,s),s}),R1=async a=>ch(fetch(`${uh}/products/${a}`,{method:"DELETE"}),()=>{const s=Zn(wo,Kc).filter(r=>r.id!==a);return Js(wo,s),s}),Sb=async()=>ch(fetch(`${uh}/config`),()=>Zn(Tb,Hx)),C1=async a=>ch(fetch(`${uh}/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),()=>(Js(Tb,a),a)),wb=()=>Zn(Ab,b1),j1=a=>(Js(Ab,a),a),Hm=()=>Zn("dthstore_media",[]),D1=a=>{const t=Hm(),s=[a,...t];return Js("dthstore_media",s),s},O1=a=>{const s=Hm().filter(r=>r.id!==a);return Js("dthstore_media",s),s};var V1={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var E_;(function(a){a.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",a.OUTCOME_OK="OUTCOME_OK",a.OUTCOME_FAILED="OUTCOME_FAILED",a.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(E_||(E_={}));var T_;(function(a){a.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",a.PYTHON="PYTHON"})(T_||(T_={}));var A_;(function(a){a.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",a.SILENT="SILENT",a.WHEN_IDLE="WHEN_IDLE",a.INTERRUPT="INTERRUPT"})(A_||(A_={}));var yo;(function(a){a.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",a.STRING="STRING",a.NUMBER="NUMBER",a.INTEGER="INTEGER",a.BOOLEAN="BOOLEAN",a.ARRAY="ARRAY",a.OBJECT="OBJECT",a.NULL="NULL"})(yo||(yo={}));var N_;(function(a){a.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",a.SIMPLE_SEARCH="SIMPLE_SEARCH",a.ELASTIC_SEARCH="ELASTIC_SEARCH"})(N_||(N_={}));var S_;(function(a){a.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",a.NO_AUTH="NO_AUTH",a.API_KEY_AUTH="API_KEY_AUTH",a.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",a.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",a.OAUTH="OAUTH",a.OIDC_AUTH="OIDC_AUTH"})(S_||(S_={}));var w_;(function(a){a.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",a.HTTP_IN_QUERY="HTTP_IN_QUERY",a.HTTP_IN_HEADER="HTTP_IN_HEADER",a.HTTP_IN_PATH="HTTP_IN_PATH",a.HTTP_IN_BODY="HTTP_IN_BODY",a.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(w_||(w_={}));var I_;(function(a){a.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",a.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",a.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",a.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(I_||(I_={}));var R_;(function(a){a.UNSPECIFIED="UNSPECIFIED",a.BLOCKING="BLOCKING",a.NON_BLOCKING="NON_BLOCKING"})(R_||(R_={}));var C_;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"})(C_||(C_={}));var j_;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE",a.VALIDATED="VALIDATED"})(j_||(j_={}));var D_;(function(a){a.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH",a.MINIMAL="MINIMAL"})(D_||(D_={}));var O_;(function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",a.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",a.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",a.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",a.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(O_||(O_={}));var V_;(function(a){a.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",a.SEVERITY="SEVERITY",a.PROBABILITY="PROBABILITY"})(V_||(V_={}));var M_;(function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE",a.OFF="OFF"})(M_||(M_={}));var U_;(function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.IMAGE_SAFETY="IMAGE_SAFETY",a.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",a.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",a.NO_IMAGE="NO_IMAGE",a.IMAGE_RECITATION="IMAGE_RECITATION",a.IMAGE_OTHER="IMAGE_OTHER"})(U_||(U_={}));var L_;(function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"})(L_||(L_={}));var z_;(function(a){a.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",a.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",a.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",a.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",a.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(z_||(z_={}));var P_;(function(a){a.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",a.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",a.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",a.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",a.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(P_||(P_={}));var k_;(function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.IMAGE_SAFETY="IMAGE_SAFETY",a.MODEL_ARMOR="MODEL_ARMOR",a.JAILBREAK="JAILBREAK"})(k_||(k_={}));var B_;(function(a){a.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",a.ON_DEMAND="ON_DEMAND",a.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(B_||(B_={}));var H_;(function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.AUDIO="AUDIO"})(H_||(H_={}));var G_;(function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(G_||(G_={}));var F_;(function(a){a.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",a.TUNING_MODE_FULL="TUNING_MODE_FULL",a.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(F_||(F_={}));var q_;(function(a){a.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",a.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",a.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",a.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",a.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",a.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",a.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(q_||(q_={}));var Y_;(function(a){a.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",a.JOB_STATE_QUEUED="JOB_STATE_QUEUED",a.JOB_STATE_PENDING="JOB_STATE_PENDING",a.JOB_STATE_RUNNING="JOB_STATE_RUNNING",a.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",a.JOB_STATE_FAILED="JOB_STATE_FAILED",a.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",a.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",a.JOB_STATE_PAUSED="JOB_STATE_PAUSED",a.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",a.JOB_STATE_UPDATING="JOB_STATE_UPDATING",a.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Y_||(Y_={}));var K_;(function(a){a.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",a.TUNING_TASK_I2V="TUNING_TASK_I2V",a.TUNING_TASK_T2V="TUNING_TASK_T2V",a.TUNING_TASK_R2V="TUNING_TASK_R2V"})(K_||(K_={}));var Q_;(function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",a.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Q_||(Q_={}));var X_;(function(a){a.COLLECTION="COLLECTION"})(X_||(X_={}));var J_;(function(a){a.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",a.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",a.BALANCED="BALANCED",a.PRIORITIZE_COST="PRIORITIZE_COST"})(J_||(J_={}));var Z_;(function(a){a.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",a.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Z_||(Z_={}));var $_;(function(a){a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"})($_||($_={}));var W_;(function(a){a.DONT_ALLOW="DONT_ALLOW",a.ALLOW_ADULT="ALLOW_ADULT",a.ALLOW_ALL="ALLOW_ALL"})(W_||(W_={}));var ex;(function(a){a.auto="auto",a.en="en",a.ja="ja",a.ko="ko",a.hi="hi",a.zh="zh",a.pt="pt",a.es="es"})(ex||(ex={}));var tx;(function(a){a.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",a.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",a.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",a.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",a.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tx||(tx={}));var nx;(function(a){a.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",a.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",a.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",a.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nx||(nx={}));var sx;(function(a){a.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",a.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",a.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",a.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(sx||(sx={}));var ax;(function(a){a.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",a.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",a.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",a.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",a.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",a.EDIT_MODE_STYLE="EDIT_MODE_STYLE",a.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",a.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ax||(ax={}));var ix;(function(a){a.FOREGROUND="FOREGROUND",a.BACKGROUND="BACKGROUND",a.PROMPT="PROMPT",a.SEMANTIC="SEMANTIC",a.INTERACTIVE="INTERACTIVE"})(ix||(ix={}));var rx;(function(a){a.ASSET="ASSET",a.STYLE="STYLE"})(rx||(rx={}));var lx;(function(a){a.INSERT="INSERT",a.REMOVE="REMOVE",a.REMOVE_STATIC="REMOVE_STATIC",a.OUTPAINT="OUTPAINT"})(lx||(lx={}));var ox;(function(a){a.OPTIMIZED="OPTIMIZED",a.LOSSLESS="LOSSLESS"})(ox||(ox={}));var ux;(function(a){a.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",a.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ux||(ux={}));var cx;(function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.STATE_PENDING="STATE_PENDING",a.STATE_ACTIVE="STATE_ACTIVE",a.STATE_FAILED="STATE_FAILED"})(cx||(cx={}));var hx;(function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.PROCESSING="PROCESSING",a.ACTIVE="ACTIVE",a.FAILED="FAILED"})(hx||(hx={}));var dx;(function(a){a.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",a.UPLOADED="UPLOADED",a.GENERATED="GENERATED",a.REGISTERED="REGISTERED"})(dx||(dx={}));var fx;(function(a){a.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.RESPONSE_REJECTED="RESPONSE_REJECTED",a.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fx||(fx={}));var mx;(function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.VIDEO="VIDEO",a.AUDIO="AUDIO",a.DOCUMENT="DOCUMENT"})(mx||(mx={}));var gx;(function(a){a.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",a.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",a.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gx||(gx={}));var px;(function(a){a.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",a.ACTIVITY_START="ACTIVITY_START",a.ACTIVITY_END="ACTIVITY_END"})(px||(px={}));var yx;(function(a){a.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",a.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",a.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yx||(yx={}));var _x;(function(a){a.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",a.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",a.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_x||(_x={}));var xx;(function(a){a.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",a.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",a.NO_INTERRUPTION="NO_INTERRUPTION"})(xx||(xx={}));var vx;(function(a){a.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",a.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",a.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vx||(vx={}));var bx;(function(a){a.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",a.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",a.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",a.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",a.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",a.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",a.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",a.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",a.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",a.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",a.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",a.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",a.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bx||(bx={}));var Ex;(function(a){a.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",a.QUALITY="QUALITY",a.DIVERSITY="DIVERSITY",a.VOCALIZATION="VOCALIZATION"})(Ex||(Ex={}));var Tx;(function(a){a.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",a.PLAY="PLAY",a.PAUSE="PAUSE",a.STOP="STOP",a.RESET_CONTEXT="RESET_CONTEXT"})(Tx||(Tx={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ax;(function(a){a.PAGED_ITEM_BATCH_JOBS="batchJobs",a.PAGED_ITEM_MODELS="models",a.PAGED_ITEM_TUNING_JOBS="tuningJobs",a.PAGED_ITEM_FILES="files",a.PAGED_ITEM_CACHED_CONTENTS="cachedContents",a.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",a.PAGED_ITEM_DOCUMENTS="documents"})(Ax||(Ax={}));function qc(a,t){var s={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&t.indexOf(r)<0&&(s[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(a);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(a,r[o])&&(s[r[o]]=a[r[o]]);return s}function Nx(a){var t=typeof Symbol=="function"&&Symbol.iterator,s=t&&a[t],r=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&r>=a.length&&(a=void 0),{value:a&&a[r++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nt(a){return this instanceof nt?(this.v=a,this):new nt(a)}function _o(a,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(a,t||[]),o,d=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",m),o[Symbol.asyncIterator]=function(){return this},o;function m(j){return function(F){return Promise.resolve(F).then(j,T)}}function p(j,F){r[j]&&(o[j]=function(W){return new Promise(function(k,ne){d.push([j,W,k,ne])>1||x(j,W)})},F&&(o[j]=F(o[j])))}function x(j,F){try{v(r[j](F))}catch(W){w(d[0][3],W)}}function v(j){j.value instanceof nt?Promise.resolve(j.value.v).then(E,T):w(d[0][2],j)}function E(j){x("next",j)}function T(j){x("throw",j)}function w(j,F){j(F),d.shift(),d.length&&x(d[0][0],d[0][1])}}function Mr(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=a[Symbol.asyncIterator],s;return t?t.call(a):(a=typeof Nx=="function"?Nx(a):a[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(d){s[d]=a[d]&&function(m){return new Promise(function(p,x){m=a[d](m),o(p,x,m.done,m.value)})}}function o(d,m,p,x){Promise.resolve(x).then(function(v){d({value:v,done:p})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ib=function(){const{crypto:a}=globalThis;if(a?.randomUUID)return Ib=a.randomUUID.bind(a),a.randomUUID();const t=new Uint8Array(1),s=a?()=>a.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^s()&15>>+r/4).toString(16))};const M1=()=>Ib();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xf(a){return typeof a=="object"&&a!==null&&("name"in a&&a.name==="AbortError"||"message"in a&&String(a.message).includes("FetchRequestCanceledException"))}const Jf=a=>{if(a instanceof Error)return a;if(typeof a=="object"&&a!==null){try{if(Object.prototype.toString.call(a)==="[object Error]"){const t=new Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(t.stack=a.stack),a.cause&&!t.cause&&(t.cause=a.cause),a.name&&(t.name=a.name),t}}catch{}try{return new Error(JSON.stringify(a))}catch{}}return new Error(a)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mn extends Error{}class Jt extends Mn{constructor(t,s,r,o){super(`${Jt.makeMessage(t,s,r)}`),this.status=t,this.headers=o,this.error=s}static makeMessage(t,s,r){const o=s?.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):r;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,s,r,o){if(!t||!o)return new hh({message:r,cause:Jf(s)});const d=s;return t===400?new Cb(t,d,r,o):t===401?new jb(t,d,r,o):t===403?new Db(t,d,r,o):t===404?new Ob(t,d,r,o):t===409?new Vb(t,d,r,o):t===422?new Mb(t,d,r,o):t===429?new Ub(t,d,r,o):t>=500?new Lb(t,d,r,o):new Jt(t,d,r,o)}}class Zf extends Jt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class hh extends Jt{constructor({message:t,cause:s}){super(void 0,void 0,t||"Connection error.",void 0),s&&(this.cause=s)}}class Rb extends hh{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Cb extends Jt{}class jb extends Jt{}class Db extends Jt{}class Ob extends Jt{}class Vb extends Jt{}class Mb extends Jt{}class Ub extends Jt{}class Lb extends Jt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U1=/^[a-z][a-z0-9+.-]*:/i,L1=a=>U1.test(a);let $f=a=>($f=Array.isArray,$f(a));const z1=$f;let P1=z1;const Sx=P1;function k1(a){if(!a)return!0;for(const t in a)return!1;return!0}function B1(a,t){return Object.prototype.hasOwnProperty.call(a,t)}const H1=(a,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Mn(`${a} must be an integer`);if(t<0)throw new Mn(`${a} must be a positive integer`);return t},G1=a=>{try{return JSON.parse(a)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F1=a=>new Promise(t=>setTimeout(t,a));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Y1=()=>{var a,t,s,r,o;const d=q1();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wr,"X-Stainless-OS":Ix(Deno.build.os),"X-Stainless-Arch":wx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(a=Deno.version)===null||a===void 0?void 0:a.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wr,"X-Stainless-OS":Ix((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":wx((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const m=K1();return m?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${m.browser}`,"X-Stainless-Runtime-Version":m.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function K1(){if(typeof navigator>"u"||!navigator)return null;const a=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:s}of a){const r=s.exec(navigator.userAgent);if(r){const o=r[1]||0,d=r[2]||0,m=r[3]||0;return{browser:t,version:`${o}.${d}.${m}`}}}return null}const wx=a=>a==="x32"?"x32":a==="x86_64"||a==="x64"?"x64":a==="arm"?"arm":a==="aarch64"||a==="arm64"?"arm64":a?`other:${a}`:"unknown",Ix=a=>(a=a.toLowerCase(),a.includes("ios")?"iOS":a==="android"?"Android":a==="darwin"?"MacOS":a==="win32"?"Windows":a==="freebsd"?"FreeBSD":a==="openbsd"?"OpenBSD":a==="linux"?"Linux":a?`Other:${a}`:"Unknown");let yc;const Q1=()=>yc??(yc=Y1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function zb(...a){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...a)}function J1(a){let t=Symbol.asyncIterator in a?a[Symbol.asyncIterator]():a[Symbol.iterator]();return zb({start(){},async pull(s){const{done:r,value:o}=await t.next();r?s.close():s.enqueue(o)},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}function Pb(a){if(a[Symbol.asyncIterator])return a;const t=a.getReader();return{async next(){try{const s=await t.read();return s?.done&&t.releaseLock(),s}catch(s){throw t.releaseLock(),s}},async return(){const s=t.cancel();return t.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Z1(a){var t,s;if(a===null||typeof a!="object")return;if(a[Symbol.asyncIterator]){await((s=(t=a[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(t));return}const r=a.getReader(),o=r.cancel();r.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $1=({headers:a,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kb=()=>{var a;if(typeof File>"u"){const{process:t}=globalThis,s=typeof((a=t?.versions)===null||a===void 0?void 0:a.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rf(a,t,s){return kb(),new File(a,t??"unknown_file",s)}function W1(a){return(typeof a=="object"&&a!==null&&("name"in a&&a.name&&String(a.name)||"url"in a&&a.url&&String(a.url)||"filename"in a&&a.filename&&String(a.filename)||"path"in a&&a.path&&String(a.path))||"").split(/[\\/]/).pop()||void 0}const eI=a=>a!=null&&typeof a=="object"&&typeof a[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bb=a=>a!=null&&typeof a=="object"&&typeof a.size=="number"&&typeof a.type=="string"&&typeof a.text=="function"&&typeof a.slice=="function"&&typeof a.arrayBuffer=="function",tI=a=>a!=null&&typeof a=="object"&&typeof a.name=="string"&&typeof a.lastModified=="number"&&Bb(a),nI=a=>a!=null&&typeof a=="object"&&typeof a.url=="string"&&typeof a.blob=="function";async function sI(a,t,s){if(kb(),a=await a,tI(a))return a instanceof File?a:Rf([await a.arrayBuffer()],a.name);if(nI(a)){const o=await a.blob();return t||(t=new URL(a.url).pathname.split(/[\\/]/).pop()),Rf(await Wf(o),t,s)}const r=await Wf(a);if(t||(t=W1(a)),!s?.type){const o=r.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof o=="string"&&(s=Object.assign(Object.assign({},s),{type:o}))}return Rf(r,t,s)}async function Wf(a){var t,s,r,o,d;let m=[];if(typeof a=="string"||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)m.push(a);else if(Bb(a))m.push(a instanceof Blob?a:await a.arrayBuffer());else if(eI(a))try{for(var p=!0,x=Mr(a),v;v=await x.next(),t=v.done,!t;p=!0){o=v.value,p=!1;const E=o;m.push(...await Wf(E))}}catch(E){s={error:E}}finally{try{!p&&!t&&(r=x.return)&&await r.call(x)}finally{if(s)throw s.error}}else{const E=(d=a?.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof a}${E?`; constructor: ${E}`:""}${aI(a)}`)}return m}function aI(a){return typeof a!="object"||a===null?"":`; props: [${Object.getOwnPropertyNames(a).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hb{constructor(t){this._client=t}}Hb._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gb(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Rx=Object.freeze(Object.create(null)),iI=(a=Gb)=>(function(s,...r){if(s.length===1)return s[0];let o=!1;const d=[],m=s.reduce((E,T,w)=>{var j,F,W;/[?#]/.test(T)&&(o=!0);const k=r[w];let ne=(o?encodeURIComponent:a)(""+k);return w!==r.length&&(k==null||typeof k=="object"&&k.toString===((W=Object.getPrototypeOf((F=Object.getPrototypeOf((j=k.hasOwnProperty)!==null&&j!==void 0?j:Rx))!==null&&F!==void 0?F:Rx))===null||W===void 0?void 0:W.toString))&&(ne=k+"",d.push({start:E.length+T.length,length:ne.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),E+T+(w===r.length?"":ne)},""),p=m.split(/[?#]/,1)[0],x=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let v;for(;(v=x.exec(p))!==null;)d.push({start:v.index,length:v[0].length,error:`Value "${v[0]}" can't be safely passed as a path parameter`});if(d.sort((E,T)=>E.start-T.start),d.length>0){let E=0;const T=d.reduce((w,j)=>{const F=" ".repeat(j.start-E),W="^".repeat(j.length);return E=j.start+j.length,w+F+W},"");throw new Mn(`Path parameters result in path with invalid segments:
${d.map(w=>w.error).join(`
`)}
${m}
${T}`)}return m}),_c=iI(Gb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fb extends Hb{create(t,s){var r;const{api_version:o=this._client.apiVersion}=t,d=qc(t,["api_version"]);if("model"in d&&"agent_config"in d)throw new Mn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new Mn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(_c`/${o}/interactions`,Object.assign(Object.assign({body:d},s),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,s={},r){const{api_version:o=this._client.apiVersion}=s??{};return this._client.delete(_c`/${o}/interactions/${t}`,r)}cancel(t,s={},r){const{api_version:o=this._client.apiVersion}=s??{};return this._client.post(_c`/${o}/interactions/${t}/cancel`,r)}get(t,s={},r){var o;const d=s??{},{api_version:m=this._client.apiVersion}=d,p=qc(d,["api_version"]);return this._client.get(_c`/${m}/interactions/${t}`,Object.assign(Object.assign({query:p},r),{stream:(o=s?.stream)!==null&&o!==void 0?o:!1}))}}Fb._key=Object.freeze(["interactions"]);class qb extends Fb{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rI(a){let t=0;for(const o of a)t+=o.length;const s=new Uint8Array(t);let r=0;for(const o of a)s.set(o,r),r+=o.length;return s}let xc;function Gm(a){let t;return(xc??(t=new globalThis.TextEncoder,xc=t.encode.bind(t)))(a)}let vc;function Cx(a){let t;return(vc??(t=new globalThis.TextDecoder,vc=t.decode.bind(t)))(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Gm(t):t;this.buffer=rI([this.buffer,s]);const r=[];let o;for(;(o=lI(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){r.push(Cx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,m=Cx(this.buffer.subarray(0,d));r.push(m),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}dh.NEWLINE_CHARS=new Set([`
`,"\r"]);dh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lI(a,t){for(let o=t??0;o<a.length;o++){if(a[o]===10)return{preceding:o,index:o+1,carriage:!1};if(a[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function oI(a){for(let r=0;r<a.length-1;r++){if(a[r]===10&&a[r+1]===10||a[r]===13&&a[r+1]===13)return r+2;if(a[r]===13&&a[r+1]===10&&r+3<a.length&&a[r+2]===13&&a[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yc={off:0,error:200,warn:300,info:400,debug:500},jx=(a,t,s)=>{if(a){if(B1(Yc,a))return a;Xt(s).warn(`${t} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(Yc))}`)}};function co(){}function bc(a,t,s){return!t||Yc[a]>Yc[s]?co:t[a].bind(t)}const uI={error:co,warn:co,info:co,debug:co};let Dx=new WeakMap;function Xt(a){var t;const s=a.logger,r=(t=a.logLevel)!==null&&t!==void 0?t:"off";if(!s)return uI;const o=Dx.get(s);if(o&&o[0]===r)return o[1];const d={error:bc("error",s,r),warn:bc("warn",s,r),info:bc("info",s,r),debug:bc("debug",s,r)};return Dx.set(s,[r,d]),d}const bi=a=>(a.options&&(a.options=Object.assign({},a.options),delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([t,s])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{constructor(t,s,r){this.iterator=t,this.controller=s,this.client=r}static fromSSEResponse(t,s,r){let o=!1;const d=r?Xt(r):console;function m(){return _o(this,arguments,function*(){var x,v,E,T;if(o)throw new Mn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let w=!1;try{try{for(var j=!0,F=Mr(cI(t,s)),W;W=yield nt(F.next()),x=W.done,!x;j=!0){T=W.value,j=!1;const k=T;if(!w)if(k.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield nt(JSON.parse(k.data))}catch(ne){throw d.error("Could not parse message into JSON:",k.data),d.error("From chunk:",k.raw),ne}}}catch(k){v={error:k}}finally{try{!j&&!x&&(E=F.return)&&(yield nt(E.call(F)))}finally{if(v)throw v.error}}w=!0}catch(k){if(Xf(k))return yield nt(void 0);throw k}finally{w||s.abort()}})}return new Rr(m,s,r)}static fromReadableStream(t,s,r){let o=!1;function d(){return _o(this,arguments,function*(){var x,v,E,T;const w=new dh,j=Pb(t);try{for(var F=!0,W=Mr(j),k;k=yield nt(W.next()),x=k.done,!x;F=!0){T=k.value,F=!1;const ne=T;for(const ce of w.decode(ne))yield yield nt(ce)}}catch(ne){v={error:ne}}finally{try{!F&&!x&&(E=W.return)&&(yield nt(E.call(W)))}finally{if(v)throw v.error}}for(const ne of w.flush())yield yield nt(ne)})}function m(){return _o(this,arguments,function*(){var x,v,E,T;if(o)throw new Mn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let w=!1;try{try{for(var j=!0,F=Mr(d()),W;W=yield nt(F.next()),x=W.done,!x;j=!0){T=W.value,j=!1;const k=T;w||k&&(yield yield nt(JSON.parse(k)))}}catch(k){v={error:k}}finally{try{!j&&!x&&(E=F.return)&&(yield nt(E.call(F)))}finally{if(v)throw v.error}}w=!0}catch(k){if(Xf(k))return yield nt(void 0);throw k}finally{w||s.abort()}})}return new Rr(m,s,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],s=[],r=this.iterator(),o=d=>({next:()=>{if(d.length===0){const m=r.next();t.push(m),s.push(m)}return d.shift()}});return[new Rr(()=>o(t),this.controller,this.client),new Rr(()=>o(s),this.controller,this.client)]}toReadableStream(){const t=this;let s;return zb({async start(){s=t[Symbol.asyncIterator]()},async pull(r){try{const{value:o,done:d}=await s.next();if(d)return r.close();const m=Gm(JSON.stringify(o)+`
`);r.enqueue(m)}catch(o){r.error(o)}},async cancel(){var r;await((r=s.return)===null||r===void 0?void 0:r.call(s))}})}}function cI(a,t){return _o(this,arguments,function*(){var r,o,d,m;if(!a.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Mn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Mn("Attempted to iterate over a response with no body");const p=new dI,x=new dh,v=Pb(a.body);try{for(var E=!0,T=Mr(hI(v)),w;w=yield nt(T.next()),r=w.done,!r;E=!0){m=w.value,E=!1;const j=m;for(const F of x.decode(j)){const W=p.decode(F);W&&(yield yield nt(W))}}}catch(j){o={error:j}}finally{try{!E&&!r&&(d=T.return)&&(yield nt(d.call(T)))}finally{if(o)throw o.error}}for(const j of x.flush()){const F=p.decode(j);F&&(yield yield nt(F))}})}function hI(a){return _o(this,arguments,function*(){var s,r,o,d;let m=new Uint8Array;try{for(var p=!0,x=Mr(a),v;v=yield nt(x.next()),s=v.done,!s;p=!0){d=v.value,p=!1;const E=d;if(E==null)continue;const T=E instanceof ArrayBuffer?new Uint8Array(E):typeof E=="string"?Gm(E):E;let w=new Uint8Array(m.length+T.length);w.set(m),w.set(T,m.length),m=w;let j;for(;(j=oI(m))!==-1;)yield yield nt(m.slice(0,j)),m=m.slice(j)}}catch(E){r={error:E}}finally{try{!p&&!s&&(o=x.return)&&(yield nt(o.call(x)))}finally{if(r)throw r.error}}m.length>0&&(yield yield nt(m))})}class dI{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(t),t.startsWith(":"))return null;let[s,r,o]=fI(t,":");return o.startsWith(" ")&&(o=o.substring(1)),s==="event"?this.event=o:s==="data"&&this.data.push(o),null}}function fI(a,t){const s=a.indexOf(t);return s!==-1?[a.substring(0,s),t,a.substring(s+t.length)]:[a,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mI(a,t){const{response:s,requestLogID:r,retryOfRequestLogID:o,startTime:d}=t,m=await(async()=>{var p;if(t.options.stream)return Xt(a).debug("response",s.status,s.url,s.headers,s.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(s,t.controller,a):Rr.fromSSEResponse(s,t.controller,a);if(s.status===204)return null;if(t.options.__binaryResponse)return s;const x=s.headers.get("content-type"),v=(p=x?.split(";")[0])===null||p===void 0?void 0:p.trim();return v?.includes("application/json")||v?.endsWith("+json")?await s.json():await s.text()})();return Xt(a).debug(`[${r}] response parsed`,bi({retryOfRequestLogID:o,url:s.url,status:s.status,body:m,durationMs:Date.now()-d})),m}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fm extends Promise{constructor(t,s,r=mI){super(o=>{o(null)}),this.responsePromise=s,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new Fm(this.client,this.responsePromise,async(s,r)=>t(await this.parseResponse(s,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,s){return this.parse().then(t,s)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yb=Symbol("brand.privateNullableHeaders");function*gI(a){if(!a)return;if(Yb in a){const{values:r,nulls:o}=a;yield*r.entries();for(const d of o)yield[d,null];return}let t=!1,s;a instanceof Headers?s=a.entries():Sx(a)?s=a:(t=!0,s=Object.entries(a??{}));for(let r of s){const o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const d=Sx(r[1])?r[1]:[r[1]];let m=!1;for(const p of d)p!==void 0&&(t&&!m&&(m=!0,yield[o,null]),yield[o,p])}}const ro=a=>{const t=new Headers,s=new Set;for(const r of a){const o=new Set;for(const[d,m]of gI(r)){const p=d.toLowerCase();o.has(p)||(t.delete(d),o.add(p)),m===null?(t.delete(d),s.add(p)):(t.append(d,m),s.delete(p))}}return{[Yb]:!0,values:t,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cf=a=>{var t,s,r,o,d,m;if(typeof globalThis.process<"u")return(r=(s=(t=V1)===null||t===void 0?void 0:t[a])===null||s===void 0?void 0:s.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(m=(d=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||d===void 0?void 0:d.call(o,a))===null||m===void 0?void 0:m.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Kb;class fh{constructor(t){var s,r,o,d,m,p,x,{baseURL:v=Cf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:E=(s=Cf("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:T="v1beta"}=t,w=qc(t,["baseURL","apiKey","apiVersion"]);const j=Object.assign(Object.assign({apiKey:E,apiVersion:T},w),{baseURL:v||"https://generativelanguage.googleapis.com"});this.baseURL=j.baseURL,this.timeout=(r=j.timeout)!==null&&r!==void 0?r:fh.DEFAULT_TIMEOUT,this.logger=(o=j.logger)!==null&&o!==void 0?o:console;const F="warn";this.logLevel=F,this.logLevel=(m=(d=jx(j.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:jx(Cf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&m!==void 0?m:F,this.fetchOptions=j.fetchOptions,this.maxRetries=(p=j.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(x=j.fetch)!==null&&x!==void 0?x:X1(),this.encoder=$1,this._options=j,this.apiKey=E,this.apiVersion=T,this.clientAdapter=j.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:s}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const s=ro([t.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return ro([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ro([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([s,r])=>typeof r<"u").map(([s,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(s)}=`;throw new Mn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${wr}`}defaultIdempotencyKey(){return`stainless-node-retry-${M1()}`}makeStatusError(t,s,r,o){return Jt.generate(t,s,r,o)}buildURL(t,s,r){const o=!this.baseURLOverridden()&&r||this.baseURL,d=L1(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),m=this.defaultQuery();return k1(m)||(s=Object.assign(Object.assign({},m),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(d.search=this.stringifyQuery(s)),d.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const s=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(t,{url:s,options:r}){}get(t,s){return this.methodRequest("get",t,s)}post(t,s){return this.methodRequest("post",t,s)}patch(t,s){return this.methodRequest("patch",t,s)}put(t,s){return this.methodRequest("put",t,s)}delete(t,s){return this.methodRequest("delete",t,s)}methodRequest(t,s,r){return this.request(Promise.resolve(r).then(o=>Object.assign({method:t,path:s},o)))}request(t,s=null){return new Fm(this,this.makeRequest(t,s,void 0))}async makeRequest(t,s,r){var o,d,m;const p=await t,x=(o=p.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s==null&&(s=x),await this.prepareOptions(p);const{req:v,url:E,timeout:T}=await this.buildRequest(p,{retryCount:x-s});await this.prepareRequest(v,{url:E,options:p});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),j=r===void 0?"":`, retryOf: ${r}`,F=Date.now();if(Xt(this).debug(`[${w}] sending request`,bi({retryOfRequestLogID:r,method:p.method,url:E,options:p,headers:v.headers})),!((d=p.signal)===null||d===void 0)&&d.aborted)throw new Zf;const W=new AbortController,k=await this.fetchWithTimeout(E,v,T,W).catch(Jf),ne=Date.now();if(k instanceof globalThis.Error){const he=`retrying, ${s} attempts remaining`;if(!((m=p.signal)===null||m===void 0)&&m.aborted)throw new Zf;const xe=Xf(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(s)return Xt(this).info(`[${w}] connection ${xe?"timed out":"failed"} - ${he}`),Xt(this).debug(`[${w}] connection ${xe?"timed out":"failed"} (${he})`,bi({retryOfRequestLogID:r,url:E,durationMs:ne-F,message:k.message})),this.retryRequest(p,s,r??w);throw Xt(this).info(`[${w}] connection ${xe?"timed out":"failed"} - error; no more retries left`),Xt(this).debug(`[${w}] connection ${xe?"timed out":"failed"} (error; no more retries left)`,bi({retryOfRequestLogID:r,url:E,durationMs:ne-F,message:k.message})),xe?new Rb:new hh({cause:k})}const ce=`[${w}${j}] ${v.method} ${E} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${ne-F}ms`;if(!k.ok){const he=await this.shouldRetry(k);if(s&&he){const N=`retrying, ${s} attempts remaining`;return await Z1(k.body),Xt(this).info(`${ce} - ${N}`),Xt(this).debug(`[${w}] response error (${N})`,bi({retryOfRequestLogID:r,url:k.url,status:k.status,headers:k.headers,durationMs:ne-F})),this.retryRequest(p,s,r??w,k.headers)}const xe=he?"error; no more retries left":"error; not retryable";Xt(this).info(`${ce} - ${xe}`);const Ue=await k.text().catch(N=>Jf(N).message),Ee=G1(Ue),D=Ee?void 0:Ue;throw Xt(this).debug(`[${w}] response error (${xe})`,bi({retryOfRequestLogID:r,url:k.url,status:k.status,headers:k.headers,message:D,durationMs:Date.now()-F})),this.makeStatusError(k.status,Ee,D,k.headers)}return Xt(this).info(ce),Xt(this).debug(`[${w}] response start`,bi({retryOfRequestLogID:r,url:k.url,status:k.status,headers:k.headers,durationMs:ne-F})),{response:k,options:p,controller:W,requestLogID:w,retryOfRequestLogID:r,startTime:F}}async fetchWithTimeout(t,s,r,o){const d=s||{},{signal:m,method:p}=d,x=qc(d,["signal","method"]);m&&m.addEventListener("abort",()=>o.abort());const v=setTimeout(()=>o.abort(),r),E=globalThis.ReadableStream&&x.body instanceof globalThis.ReadableStream||typeof x.body=="object"&&x.body!==null&&Symbol.asyncIterator in x.body,T=Object.assign(Object.assign(Object.assign({signal:o.signal},E?{duplex:"half"}:{}),{method:"GET"}),x);p&&(T.method=p.toUpperCase());try{return await this.fetch.call(void 0,t,T)}finally{clearTimeout(v)}}async shouldRetry(t){const s=t.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,s,r,o){var d;let m;const p=o?.get("retry-after-ms");if(p){const v=parseFloat(p);Number.isNaN(v)||(m=v)}const x=o?.get("retry-after");if(x&&!m){const v=parseFloat(x);Number.isNaN(v)?m=Date.parse(x)-Date.now():m=v*1e3}if(!(m&&0<=m&&m<60*1e3)){const v=(d=t.maxRetries)!==null&&d!==void 0?d:this.maxRetries;m=this.calculateDefaultRetryTimeoutMillis(s,v)}return await F1(m),this.makeRequest(t,s-1,r)}calculateDefaultRetryTimeoutMillis(t,s){const d=s-t,m=Math.min(.5*Math.pow(2,d),8),p=1-Math.random()*.25;return m*p*1e3}async buildRequest(t,{retryCount:s=0}={}){var r,o,d;const m=Object.assign({},t),{method:p,path:x,query:v,defaultBaseURL:E}=m,T=this.buildURL(x,v,E);"timeout"in m&&H1("timeout",m.timeout),m.timeout=(r=m.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:w,body:j}=this.buildBody({options:m}),F=await this.buildHeaders({options:t,method:p,bodyHeaders:w,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:F},m.signal&&{signal:m.signal}),globalThis.ReadableStream&&j instanceof globalThis.ReadableStream&&{duplex:"half"}),j&&{body:j}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(d=m.fetchOptions)!==null&&d!==void 0?d:{}),url:T,timeout:m.timeout}}async buildHeaders({options:t,method:s,bodyHeaders:r,retryCount:o}){let d={};this.idempotencyHeader&&s!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=t.idempotencyKey);const m=await this.authHeaders(t);let p=ro([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Q1()),this._options.defaultHeaders,r,t.headers,m]);return this.validateHeaders(p),p.values}buildBody({options:{body:t,headers:s}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=ro([s]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:J1(t)}:this.encoder({body:t,headers:r})}}fh.DEFAULT_TIMEOUT=6e4;class Bt extends fh{constructor(){super(...arguments),this.interactions=new qb(this)}}Kb=Bt;Bt.GeminiNextGenAPIClient=Kb;Bt.GeminiNextGenAPIClientError=Mn;Bt.APIError=Jt;Bt.APIConnectionError=hh;Bt.APIConnectionTimeoutError=Rb;Bt.APIUserAbortError=Zf;Bt.NotFoundError=Ob;Bt.ConflictError=Vb;Bt.RateLimitError=Ub;Bt.BadRequestError=Cb;Bt.AuthenticationError=jb;Bt.InternalServerError=Lb;Bt.PermissionDeniedError=Db;Bt.UnprocessableEntityError=Mb;Bt.toFile=sI;Bt.Interactions=qb;const pI=()=>null,yI=async a=>{const t=pI();if(!t)return console.warn("Gemini API Key missing"),null;const s=`
    You are an expert sales agent for "DTH Store", a reseller of DTH and Broadband services.
    Generate a personalized sales pitch for a lead with the following details:
    Name: ${a.name}
    Service Interested: ${a.serviceType}
    Operator: ${a.operator}
    Location: ${a.location}
    
    Goal: Convince them to book the installation today. Mention "Fast Installation" and "Best Offer".
    
    Return the response in JSON format with two fields:
    1. 'whatsapp': A short, emoji-rich, friendly WhatsApp message (max 50 words).
    2. 'script': A professional phone call opening script (max 100 words).
  `;try{const o=(await t.models.generateContent({model:"gemini-3-flash-preview",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:yo.OBJECT,properties:{whatsapp:{type:yo.STRING},script:{type:yo.STRING}},required:["whatsapp","script"]}}})).text;return o?JSON.parse(o):null}catch(r){return console.error("Error generating sales script:",r),null}},_I=({leads:a})=>{const t={total:a.length,new:a.filter(r=>r.status===bt.NEW).length,contacted:a.filter(r=>r.status===bt.CONTACTED).length,interested:a.filter(r=>r.status===bt.INTERESTED).length,installed:a.filter(r=>r.status===bt.INSTALLED).length,cancelled:a.filter(r=>r.status===bt.CANCELLED).length,dth:a.filter(r=>r.serviceType===Ft.DTH).length,broadband:a.filter(r=>r.serviceType===Ft.BROADBAND).length,todayLeads:a.filter(r=>{const o=new Date;return new Date(r.createdAt).toDateString()===o.toDateString()}).length,weekLeads:a.filter(r=>{const o=Date.now()-6048e5;return r.createdAt>o}).length,conversionRate:a.length>0?Math.round(a.filter(r=>r.status===bt.INSTALLED).length/a.length*100):0},s=a.filter(r=>{if(!r.followUpDate)return!1;const o=new Date;return new Date(r.followUpDate).toDateString()===o.toDateString()}).length;return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[c.jsx(BT,{size:20,className:"mr-2 text-blue-600"})," Lead Analytics"]}),c.jsx("span",{className:"text-sm text-gray-500",children:"Last 30 days"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[c.jsx(am,{size:24,className:"mb-2 opacity-80"}),c.jsx("p",{className:"text-3xl font-bold",children:t.total}),c.jsx("p",{className:"text-sm opacity-80",children:"Total Leads"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[c.jsx(HT,{size:24,className:"mb-2 opacity-80"}),c.jsxs("p",{className:"text-3xl font-bold",children:[t.conversionRate,"%"]}),c.jsx("p",{className:"text-sm opacity-80",children:"Conversion Rate"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-4 text-white",children:[c.jsx(zx,{size:24,className:"mb-2 opacity-80"}),c.jsx("p",{className:"text-3xl font-bold",children:t.todayLeads}),c.jsx("p",{className:"text-sm opacity-80",children:"Today's Leads"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white",children:[c.jsx(xo,{size:24,className:"mb-2 opacity-80"}),c.jsx("p",{className:"text-3xl font-bold",children:s}),c.jsx("p",{className:"text-sm opacity-80",children:"Follow-ups Today"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[c.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-blue-700",children:t.new}),c.jsx("p",{className:"text-xs text-blue-600",children:"New"})]}),c.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:t.contacted}),c.jsx("p",{className:"text-xs text-yellow-600",children:"Contacted"})]}),c.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-purple-700",children:t.interested}),c.jsx("p",{className:"text-xs text-purple-600",children:"Interested"})]}),c.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-green-700",children:t.installed}),c.jsx("p",{className:"text-xs text-green-600",children:"Installed"})]}),c.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[c.jsx("p",{className:"text-2xl font-bold text-red-700",children:t.cancelled}),c.jsx("p",{className:"text-xs text-red-600",children:"Cancelled"})]})]}),c.jsxs("div",{className:"mt-4 flex space-x-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"DTH Connections"}),c.jsx("span",{className:"font-bold text-gray-900",children:t.dth})]}),c.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-pink-500 rounded-full",style:{width:`${t.total>0?t.dth/t.total*100:0}%`}})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Broadband"}),c.jsx("span",{className:"font-bold text-gray-900",children:t.broadband})]}),c.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${t.total>0?t.broadband/t.total*100:0}%`}})})]})]})]})},xI=({lead:a,onSave:t,onClose:s})=>{const[r,o]=re.useState(a),d=p=>{p.preventDefault(),t(r)},m=r.serviceType===Ft.DTH?Ir:Dc;return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[c.jsxs("div",{className:"bg-blue-600 text-white p-4 flex justify-between items-center",children:[c.jsxs("h3",{className:"font-bold flex items-center",children:[c.jsx(Lx,{size:18,className:"mr-2"})," Edit Lead"]}),c.jsx("button",{onClick:s,className:"hover:bg-blue-700 p-1 rounded",children:c.jsx(Gr,{size:20})})]}),c.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),c.jsx("input",{type:"text",value:r.name,onChange:p=>o({...r,name:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),c.jsx("input",{type:"tel",value:r.mobile,onChange:p=>o({...r,mobile:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",pattern:"[0-9]{10}",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),c.jsx("select",{value:r.location,onChange:p=>o({...r,location:p.target.value}),className:"w-full p-2 border rounded-lg",children:Tc.map(p=>c.jsx("option",{value:p,children:p},p))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),c.jsxs("select",{value:r.serviceType,onChange:p=>{const x=p.target.value,v=x===Ft.DTH?Ir[0]:Dc[0];o({...r,serviceType:x,operator:v})},className:"w-full p-2 border rounded-lg",children:[c.jsx("option",{value:Ft.DTH,children:"DTH TV"}),c.jsx("option",{value:Ft.BROADBAND,children:"WiFi / Fiber"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator"}),c.jsx("select",{value:r.operator,onChange:p=>o({...r,operator:p.target.value}),className:"w-full p-2 border rounded-lg",children:m.map(p=>c.jsx("option",{value:p,children:p},p))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),c.jsxs("select",{value:r.source,onChange:p=>o({...r,source:p.target.value}),className:"w-full p-2 border rounded-lg",children:[c.jsx("option",{value:"Website",children:"Website"}),c.jsx("option",{value:"WhatsApp",children:"WhatsApp"}),c.jsx("option",{value:"Manual",children:"Manual"})]})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:s,className:"flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),c.jsxs("button",{type:"submit",className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center",children:[c.jsx(jc,{size:16,className:"mr-2"})," Save Changes"]})]})]})]})})},vI=({user:a})=>{const[t,s]=re.useState([]),[r,o]=re.useState("All"),[d,m]=re.useState(""),[p,x]=re.useState(null),[v,E]=re.useState(!1),[T,w]=re.useState(null),[j,F]=re.useState(!0),[W,k]=re.useState(!1),[ne,ce]=re.useState(""),[he,xe]=re.useState("");re.useEffect(()=>{Ue(),Ee()},[]);const Ue=async()=>{const q=await Bm();s(q)},Ee=()=>{const q=new Date().toDateString(),H=t.filter(te=>te.followUpDate?new Date(te.followUpDate).toDateString()===q:!1);H.length>0&&"Notification"in window&&Notification.requestPermission().then(te=>{te==="granted"&&new Notification("DTH Store - Follow-up Reminder",{body:`You have ${H.length} follow-up(s) scheduled for today!`,icon:"/favicon.ico"})})},D=async(q,H)=>{const te={...q,status:H};H===bt.INSTALLED&&!te.orderId&&(te.orderId=`ORD-${Date.now().toString().slice(-6)}`);const ge=await io(te);s(ge),p?.id===q.id&&x(te)},S=async q=>{if(window.confirm("Delete this lead?")){const H=await w1(q);s(H),p?.id===q&&x(null)}},N=async q=>{E(!0),w(null);const H=await yI(q);H&&w(H),E(!1)},V=async q=>{const H=await io(q);s(H),x(q),k(!1)},C=async()=>{if(!p||!ne.trim())return;const q={id:Date.now().toString(),text:ne.trim(),createdAt:Date.now(),createdBy:a.name},H={...p,notes:[...p.notes||[],q]},te=await io(H);s(te),x(H),ce("")},U=async()=>{if(!p||!he)return;const q={...p,followUpDate:new Date(he).getTime()},H=await io(q);s(H),x(q),xe("")},I=async()=>{if(!p)return;const q={...p,followUpDate:void 0},H=await io(q);s(H),x(q)},Ze=()=>{const q=["Name","Mobile","Location","Service Type","Operator","Status","Source","Created At","Order ID","Follow-up Date"],H=t.map(be=>[be.name,be.mobile,be.location,be.serviceType,be.operator,be.status,be.source,new Date(be.createdAt).toLocaleString(),be.orderId||"",be.followUpDate?new Date(be.followUpDate).toLocaleDateString():""]),te=[q,...H].map(be=>be.map(Re=>`"${Re}"`).join(",")).join(`
`),ge=new Blob([te],{type:"text/csv;charset=utf-8;"}),Ye=document.createElement("a");Ye.href=URL.createObjectURL(ge),Ye.download=`leads_export_${new Date().toISOString().split("T")[0]}.csv`,Ye.click()},$e=t.filter(q=>{const H=r==="All"||q.status===r,te=q.name.toLowerCase().includes(d.toLowerCase())||q.mobile.includes(d);return H&&te}),Q=q=>{switch(q){case bt.NEW:return"bg-blue-100 text-blue-800";case bt.CONTACTED:return"bg-yellow-100 text-yellow-800";case bt.INTERESTED:return"bg-purple-100 text-purple-800";case bt.INSTALLED:return"bg-green-100 text-green-800";case bt.CANCELLED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return c.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>F(!j),className:"flex items-center text-sm text-gray-600 hover:text-blue-600 mb-2",children:[j?c.jsx(DT,{size:16,className:"mr-1"}):c.jsx(OT,{size:16,className:"mr-1"}),j?"Hide Analytics":"Show Analytics"]}),j&&c.jsx(_I,{leads:t})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow flex flex-col sm:flex-row gap-4 justify-between items-center",children:[c.jsxs("div",{className:"relative w-full",children:[c.jsx(VT,{size:18,className:"absolute left-3 top-3 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Search leads...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:d,onChange:q=>m(q.target.value)})]}),c.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[c.jsx(MT,{size:18,className:"text-gray-500"}),c.jsxs("select",{className:"block w-full border-gray-300 rounded-md py-2 px-3 focus:outline-none",value:r,onChange:q=>o(q.target.value),children:[c.jsx("option",{value:"All",children:"All Status"}),Object.values(bt).map(q=>c.jsx("option",{value:q,children:q},q))]}),c.jsx("button",{onClick:Ue,className:"p-2 text-gray-500 hover:text-blue-600 bg-gray-50 rounded-md",title:"Refresh",children:c.jsx(Cc,{size:18})}),c.jsx("button",{onClick:Ze,className:"p-2 text-gray-500 hover:text-green-600 bg-gray-50 rounded-md",title:"Export to CSV",children:c.jsx(UT,{size:18})})]})]}),c.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:c.jsx("ul",{className:"divide-y divide-gray-200",children:$e.length===0?c.jsxs("li",{className:"px-4 py-8 text-center text-gray-500",children:[c.jsx(LT,{size:40,className:"mx-auto mb-2 text-gray-300"}),"No leads found"]}):$e.map(q=>c.jsx("li",{onClick:()=>x(q),className:`cursor-pointer hover:bg-gray-50 ${p?.id===q.id?"bg-blue-50":""}`,children:c.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("p",{className:"text-sm font-medium text-blue-600",children:q.name}),q.followUpDate&&new Date(q.followUpDate).toDateString()===new Date().toDateString()&&c.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full flex items-center",children:[c.jsx(xo,{size:10,className:"mr-1"})," Follow-up Today"]})]}),c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Q(q.status)}`,children:q.status})]}),c.jsxs("div",{className:"mt-2 sm:flex sm:justify-between text-sm text-gray-500",children:[c.jsxs("p",{children:[q.serviceType," - ",q.operator]}),c.jsxs("p",{className:"flex items-center",children:[c.jsx(tm,{size:14,className:"mr-1"})," ",new Date(q.createdAt).toLocaleDateString()]})]})]})},q.id))})})]}),c.jsx("div",{className:"lg:col-span-1",children:p?c.jsxs("div",{className:"bg-white shadow rounded-lg sticky top-36",children:[c.jsxs("div",{className:"px-4 py-5 border-b border-gray-200 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Details"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>k(!0),className:"text-blue-500 hover:bg-blue-50 p-2 rounded-full",title:"Edit",children:c.jsx(Lx,{size:18})}),a.role==="ADMIN"&&c.jsx("button",{onClick:()=>S(p.id),className:"text-red-500 hover:bg-red-50 p-2 rounded-full",title:"Delete",children:c.jsx(nm,{size:18})})]})]}),c.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.name}),c.jsx("p",{className:"text-gray-500",children:p.location}),c.jsxs("div",{className:"flex space-x-3 mt-3",children:[c.jsxs("a",{href:`tel:${p.mobile}`,className:"flex items-center text-blue-600 bg-blue-50 px-3 py-1 rounded-full text-sm hover:bg-blue-100",children:[c.jsx(em,{size:14,className:"mr-2"})," Call"]}),c.jsxs("a",{href:`https://wa.me/91${p.mobile}`,target:"_blank",className:"flex items-center text-green-600 bg-green-50 px-3 py-1 rounded-full text-sm hover:bg-green-100",children:[c.jsx(sm,{size:14,className:"mr-2"})," WhatsApp"]})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Pipeline Status"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Object.values(bt).map(q=>c.jsx("button",{onClick:()=>D(p,q),className:`px-3 py-1 rounded-full text-xs border ${p.status===q?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 hover:bg-gray-50"}`,children:q},q))})]}),p.status===bt.INSTALLED&&c.jsxs("div",{className:"bg-green-50 p-3 rounded-md border border-green-200 flex items-start",children:[c.jsx(On,{className:"text-green-600 mt-0.5 mr-2",size:16}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-green-800",children:"Installation Completed"}),c.jsxs("p",{className:"text-xs text-green-700",children:["Order ID: ",p.orderId]})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[c.jsx(zx,{size:14,className:"mr-1"})," Follow-up Reminder"]}),p.followUpDate?c.jsxs("div",{className:"flex items-center justify-between bg-orange-50 p-3 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-orange-800",children:new Date(p.followUpDate).toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})}),c.jsx("p",{className:"text-xs text-orange-600",children:"Scheduled Follow-up"})]}),c.jsx("button",{onClick:I,className:"text-orange-600 hover:text-orange-800",title:"Clear reminder",children:c.jsx(Gr,{size:18})})]}):c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"date",value:he,onChange:q=>xe(q.target.value),min:new Date().toISOString().split("T")[0],className:"flex-1 p-2 border rounded-lg text-sm"}),c.jsx("button",{onClick:U,disabled:!he,className:"px-3 py-2 bg-orange-500 text-white rounded-lg text-sm hover:bg-orange-600 disabled:opacity-50",children:"Set"})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 flex items-center",children:[c.jsx(zT,{size:14,className:"mr-1"})," Notes (",p.notes?.length||0,")"]}),c.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto mb-3",children:[p.notes?.map(q=>c.jsxs("div",{className:"bg-gray-50 p-2 rounded text-sm",children:[c.jsx("p",{className:"text-gray-800",children:q.text}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[q.createdBy,"  ",new Date(q.createdAt).toLocaleDateString()]})]},q.id)),(!p.notes||p.notes.length===0)&&c.jsx("p",{className:"text-sm text-gray-400 italic",children:"No notes yet"})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"text",value:ne,onChange:q=>ce(q.target.value),placeholder:"Add a note...",className:"flex-1 p-2 border rounded-lg text-sm",onKeyPress:q=>q.key==="Enter"&&C()}),c.jsx("button",{onClick:C,disabled:!ne.trim(),className:"px-3 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 disabled:opacity-50",children:c.jsx(PT,{size:16})})]})]}),c.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("h4",{className:"text-sm font-bold text-purple-900 flex items-center",children:[c.jsx(kT,{size:16,className:"mr-2"})," AI Sales Assistant"]})}),T?c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"bg-white p-2 rounded border border-purple-100",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 mb-1",children:"WHATSAPP"}),c.jsx("p",{className:"text-gray-800",children:T.whatsapp})]}),c.jsxs("div",{className:"bg-white p-2 rounded border border-purple-100",children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 mb-1",children:"CALL SCRIPT"}),c.jsx("p",{className:"text-gray-800",children:T.script})]}),c.jsx("button",{onClick:()=>w(null),className:"text-xs text-purple-600 underline w-full text-center",children:"Reset"})]}):c.jsx("button",{onClick:()=>N(p),disabled:v,className:"w-full py-2 bg-white text-purple-700 border border-purple-200 rounded-md text-sm font-medium hover:bg-purple-100",children:v?"Thinking...":"Generate Pitch"})]})]})]}):c.jsxs("div",{className:"bg-white rounded-lg p-8 text-center text-gray-400 shadow",children:[c.jsx(am,{size:48,className:"mx-auto mb-3 text-gray-300"}),c.jsx("p",{children:"Select a lead to view details"})]})})]}),W&&p&&c.jsx(xI,{lead:p,onSave:V,onClose:()=>k(!1)})]})},bI=a=>new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(a),r.onload=o=>{const d=new Image;d.src=o.target?.result,d.onload=()=>{const m=document.createElement("canvas"),p=1e3,x=1e3;let v=d.width,E=d.height;v>E?v>p&&(E*=p/v,v=p):E>x&&(v*=x/E,E=x),m.width=v,m.height=E;const T=m.getContext("2d");if(!T){s(new Error("Could not get canvas context"));return}T.drawImage(d,0,0,v,E);const w=m.toDataURL("image/jpeg",.7);t(w)},d.onerror=m=>s(m)},r.onerror=o=>s(o)}),ho=({label:a,value:t,onChange:s})=>{const[r,o]=re.useState(!1),[d,m]=re.useState("catalog"),[p,x]=re.useState([]),[v,E]=re.useState(""),[T,w]=re.useState(!1);re.useEffect(()=>{r&&x(Hm())},[r]);const j=async k=>{const ne=k.target.files?.[0];if(ne){w(!0);try{const ce=await bI(ne),he={id:Date.now().toString(),data:ce,name:ne.name,createdAt:Date.now()},xe=D1(he);x(xe),s(ce),m("catalog")}catch(ce){console.error("Image processing failed",ce),alert("Failed to process image. Try a smaller file.")}finally{w(!1)}}},F=(k,ne)=>{if(k.stopPropagation(),confirm("Delete this image from catalog?")){const ce=O1(ne);x(ce)}},W=()=>{v&&(s(v),o(!1))};return c.jsxs("div",{className:"w-full",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:a}),c.jsxs("div",{className:"flex gap-4 items-start",children:[c.jsxs("div",{className:"relative group w-32 h-20 bg-gray-100 rounded-lg border border-gray-200 overflow-hidden cursor-pointer hover:border-blue-500 transition",onClick:()=>o(!0),children:[t?c.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover"}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:c.jsx(Ec,{size:24})}),c.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:c.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-2 py-1 rounded",children:"Change"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("input",{type:"text",value:t,readOnly:!0,className:"w-full text-xs text-gray-500 bg-gray-50 border border-gray-200 rounded p-2 mb-2 truncate"}),c.jsxs("button",{type:"button",onClick:()=>o(!0),className:"text-sm text-blue-600 font-medium hover:text-blue-800 flex items-center",children:[c.jsx(Ec,{size:16,className:"mr-1"})," Open Media Library"]})]})]}),r&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl h-[600px] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Media Library"}),c.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:bg-gray-100 p-2 rounded-full",children:c.jsx(Gr,{size:20})})]}),c.jsxs("div",{className:"flex border-b bg-gray-50",children:[c.jsxs("button",{onClick:()=>m("catalog"),className:`flex items-center px-6 py-3 text-sm font-medium border-b-2 transition ${d==="catalog"?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[c.jsx(GT,{size:16,className:"mr-2"})," My Catalog"]}),c.jsxs("button",{onClick:()=>m("upload"),className:`flex items-center px-6 py-3 text-sm font-medium border-b-2 transition ${d==="upload"?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[c.jsx(mf,{size:16,className:"mr-2"})," Upload New"]}),c.jsxs("button",{onClick:()=>m("url"),className:`flex items-center px-6 py-3 text-sm font-medium border-b-2 transition ${d==="url"?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[c.jsx(FT,{size:16,className:"mr-2"})," Insert from URL"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50",children:[d==="catalog"&&c.jsx("div",{className:"space-y-4",children:p.length===0?c.jsxs("div",{className:"text-center py-20 text-gray-400",children:[c.jsx(Ec,{size:48,className:"mx-auto mb-4 opacity-30"}),c.jsx("p",{children:"No images in catalog."}),c.jsx("button",{onClick:()=>m("upload"),className:"text-blue-600 hover:underline mt-2",children:"Upload one now"})]}):c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:p.map(k=>c.jsxs("div",{className:`group relative aspect-video bg-gray-200 rounded-lg overflow-hidden border-2 cursor-pointer transition ${t===k.data?"border-blue-600 ring-2 ring-blue-100":"border-transparent hover:border-gray-300"}`,onClick:()=>{s(k.data),o(!1)},children:[c.jsx("img",{src:k.data,alt:k.name,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition flex items-center justify-center",children:t===k.data&&c.jsx("div",{className:"bg-blue-600 text-white p-1 rounded-full shadow-lg",children:c.jsx(im,{size:16})})}),c.jsx("button",{onClick:ne=>F(ne,k.id),className:"absolute top-2 right-2 p-1.5 bg-red-600 text-white rounded opacity-0 group-hover:opacity-100 hover:bg-red-700 transition",title:"Delete",children:c.jsx(nm,{size:12})}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[10px] p-1 truncate px-2",children:k.name})]},k.id))})}),d==="upload"&&c.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:c.jsxs("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow border border-dashed border-gray-300 text-center",children:[c.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mb-4",children:T?c.jsx(mf,{className:"animate-bounce"}):c.jsx(mf,{size:32})}),c.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:T?"Optimizing Image...":"Click to Upload"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"JPG, PNG supported. Images will be optimized automatically."}),c.jsx("input",{type:"file",accept:"image/*",onChange:j,disabled:T,className:`block w-full text-sm text-slate-500
                                                file:mr-4 file:py-2 file:px-4
                                                file:rounded-full file:border-0
                                                file:text-sm file:font-semibold
                                                file:bg-blue-50 file:text-blue-700
                                                hover:file:bg-blue-100
                                            `})]})}),d==="url"&&c.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:c.jsxs("div",{className:"w-full max-w-md space-y-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL"}),c.jsx("input",{type:"text",placeholder:"https://example.com/image.jpg",value:v,onChange:k=>E(k.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}),c.jsx("button",{onClick:W,className:"w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition",children:"Use this Image"}),c.jsxs("div",{className:"mt-8 pt-6 border-t",children:[c.jsx("p",{className:"text-xs text-gray-500 text-center mb-4",children:"Or pick a demo image"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["https://images.unsplash.com/photo-1593784991095-a205069470b6?q=80&w=2070","https://images.unsplash.com/photo-1544197150-b99a580bbcbf?q=80&w=2071","https://images.unsplash.com/photo-1621944626154-7128148b8159?q=80&w=2070"].map((k,ne)=>c.jsx("img",{src:k,className:"w-full h-20 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>{s(k),o(!1)}},ne))})]})]})})]})]})})]})},EI=({user:a})=>{const[t,s]=re.useState([]),[r,o]=re.useState(!1),[d,m]=re.useState({title:"",price:"",originalPrice:"",type:"DTH",features:[""],image:"https://placehold.co/600x400",color:"bg-blue-600"});re.useEffect(()=>{(async()=>s(await Nb()))()},[]);const p=async T=>{if(T.preventDefault(),!d.title||!d.price)return;const w={id:`prod-${Date.now()}`,title:d.title||"",price:d.price||"",originalPrice:d.originalPrice||"",type:d.type,features:d.features||[],image:d.image||"",color:d.color||"bg-blue-600",isBestSeller:!0},j=await I1(w);s(j),o(!1),m({title:"",price:"",originalPrice:"",type:"DTH",features:[""],image:"https://placehold.co/600x400",color:"bg-blue-600"})},x=async T=>{if(window.confirm("Are you sure? This will remove the product from the public page.")){const w=await R1(T);s(w)}},v=(T,w)=>{const j=[...d.features||[]];j[T]=w,m({...d,features:j})},E=()=>{m({...d,features:[...d.features||[],""]})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Product Inventory"}),c.jsxs("button",{onClick:()=>o(!0),className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:[c.jsx(qT,{size:18,className:"mr-2"})," Add Plan"]})]}),r&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-blue-100 animate-in slide-in-from-top-4",children:[c.jsxs("div",{className:"flex justify-between mb-4",children:[c.jsx("h4",{className:"text-lg font-bold",children:"Add New Product"}),c.jsx("button",{onClick:()=>o(!1),children:c.jsx(Gr,{size:20,className:"text-gray-400"})})]}),c.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("input",{required:!0,placeholder:"Plan Title (e.g. Jio Fiber Gold)",value:d.title,onChange:T=>m({...d,title:T.target.value}),className:"p-2 border rounded"}),c.jsx("input",{required:!0,placeholder:"Price (e.g. 999)",value:d.price,onChange:T=>m({...d,price:T.target.value}),className:"p-2 border rounded"}),c.jsx("input",{placeholder:"Original Price (e.g. 1499)",value:d.originalPrice,onChange:T=>m({...d,originalPrice:T.target.value}),className:"p-2 border rounded"}),c.jsxs("select",{value:d.type,onChange:T=>m({...d,type:T.target.value}),className:"p-2 border rounded",children:[c.jsx("option",{value:"DTH",children:"DTH"}),c.jsx("option",{value:"Broadband",children:"Broadband"})]}),c.jsx("div",{className:"md:col-span-2",children:c.jsx(ho,{label:"Product Image",value:d.image||"",onChange:T=>m({...d,image:T})})}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),d.features?.map((T,w)=>c.jsx("input",{value:T,onChange:j=>v(w,j.target.value),className:"p-2 border rounded w-full mb-2",placeholder:"Feature (e.g. Free Router)"},w)),c.jsx("button",{type:"button",onClick:E,className:"text-sm text-blue-600 hover:underline",children:"+ Add Feature"})]}),c.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-3 mt-4",children:[c.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Product"})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(T=>c.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden shadow-sm hover:shadow-md transition",children:[c.jsxs("div",{className:"h-40 bg-gray-100 relative",children:[c.jsx("img",{src:T.image,alt:T.title,className:"w-full h-full object-cover"}),c.jsx("button",{onClick:()=>x(T.id),className:"absolute top-2 right-2 bg-white/90 p-2 rounded-full text-red-500 hover:text-red-700 shadow-sm",children:c.jsx(nm,{size:16})})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-gray-900",children:T.title}),c.jsx("p",{className:"text-sm text-gray-500",children:T.type})]}),c.jsx("p",{className:"font-bold text-blue-600",children:T.price})]}),c.jsx("ul",{className:"mt-3 space-y-1 text-sm text-gray-600",children:T.features.slice(0,3).map((w,j)=>c.jsxs("li",{children:[" ",w]},j))})]})]},T.id))})]})},TI=({user:a})=>{const[t,s]=re.useState(null),[r,o]=re.useState("idle");re.useEffect(()=>{(async()=>s(await Sb()))()},[]);const d=async()=>{t&&(o("saving"),await C1(t),o("saved"),setTimeout(()=>o("idle"),2e3))},m=(x,v,E)=>{if(!t)return;const T=[...t.heroSlides];T[x]={...T[x],[v]:E},s({...t,heroSlides:T})},p=(x,v)=>{if(!t)return;const E=[...t.navLinks];E[x]={...E[x],label:v},s({...t,navLinks:E})};return t?c.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center border-b pb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Site Configuration"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Manage site logo, navigation, and images."})]}),c.jsxs("button",{onClick:d,className:`flex items-center px-6 py-2 rounded-lg text-white font-medium transition ${r==="saved"?"bg-green-600":"bg-blue-600 hover:bg-blue-700"}`,disabled:r==="saving",children:[r==="saving"?c.jsx(Cc,{className:"animate-spin mr-2"}):r==="saved"?c.jsx(On,{className:"mr-2"}):c.jsx(jc,{className:"mr-2"}),r==="saving"?"Saving...":r==="saved"?"Saved!":"Save Changes"]})]}),c.jsxs("section",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[c.jsxs("h4",{className:"flex items-center text-md font-bold text-gray-800 mb-4",children:[c.jsx(Px,{size:18,className:"mr-2 text-blue-600"})," Branding & Navigation"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo Text"}),c.jsx("input",{type:"text",value:t.logoText,onChange:x=>s({...t,logoText:x.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo Color (Tailwind Class)"}),c.jsx("input",{type:"text",value:t.logoColorClass,onChange:x=>s({...t,logoColorClass:x.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",placeholder:"text-blue-600"})]}),c.jsx("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:c.jsx(ho,{label:"Upload Logo (Replaces Text)",value:t.logoImage||"",onChange:x=>s({...t,logoImage:x})})})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Navigation Links (Rename)"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.navLinks.map((x,v)=>c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500 uppercase",children:x.target}),c.jsx("input",{value:x.label,onChange:E=>p(v,E.target.value),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border text-sm"})]},x.id))})]})]}),c.jsxs("section",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[c.jsxs("h4",{className:"flex items-center text-md font-bold text-gray-800 mb-4",children:[c.jsx(YT,{size:18,className:"mr-2 text-purple-600"})," Hero Slider Content"]}),c.jsx("div",{className:"space-y-6",children:t.heroSlides.map((x,v)=>c.jsxs("div",{className:"border p-4 rounded-lg bg-gray-50",children:[c.jsx("div",{className:"flex justify-between mb-2",children:c.jsxs("h5",{className:"font-bold text-sm text-gray-600",children:["Slide ",v+1]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"md:col-span-1 space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Title"}),c.jsx("input",{value:x.title,onChange:E=>m(v,"title",E.target.value),className:"w-full border p-2 rounded text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Subtitle"}),c.jsx("input",{value:x.subtitle,onChange:E=>m(v,"subtitle",E.target.value),className:"w-full border p-2 rounded text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"CTA Text"}),c.jsx("input",{value:x.cta,onChange:E=>m(v,"cta",E.target.value),className:"w-full border p-2 rounded text-sm"})]})]}),c.jsx("div",{className:"md:col-span-1",children:c.jsx(ho,{label:"Slide Image",value:x.image,onChange:E=>m(v,"image",E)})})]})]},x.id))})]}),c.jsxs("section",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[c.jsxs("h4",{className:"flex items-center text-md font-bold text-gray-800 mb-4",children:[c.jsx(Ec,{size:18,className:"mr-2 text-orange-600"})," Special Offer Page Images"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx("div",{children:c.jsx(ho,{label:"Hero Background",value:t.specialOfferImages.heroBackground,onChange:x=>s({...t,specialOfferImages:{...t.specialOfferImages,heroBackground:x}})})}),c.jsx("div",{children:c.jsx(ho,{label:"Side Promo Image",value:t.specialOfferImages.sideImage,onChange:x=>s({...t,specialOfferImages:{...t.specialOfferImages,sideImage:x}})})})]})]})]}):c.jsx("div",{children:"Loading..."})},AI=()=>{const[a,t]=re.useState({emailEnabled:!1,web3formsKey:"",adminEmail:"",telegramEnabled:!1,telegramBotToken:"",telegramChatId:"",whatsappEnabled:!1,whatsappApiUrl:"",whatsappApiKey:"",whatsappSessionId:"DTHSTORE",whatsappAdminNumber:"",browserNotificationsEnabled:!0}),[s,r]=re.useState(!1),[o,d]=re.useState({}),[m,p]=re.useState(null),[x,v]=re.useState(null),[E,T]=re.useState("unknown"),[w,j]=re.useState(null),[F,W]=re.useState(!1),[k,ne]=re.useState(null),[ce,he]=re.useState({facebookVerifyToken:"dthstore_fb_token",facebookPageAccessToken:""}),[xe,Ue]=re.useState(!1),Ee=()=>{j1(a),r(!0),setTimeout(()=>r(!1),3e3)},D=H=>{d(te=>({...te,[H]:!te[H]}))},S=re.useCallback(()=>{const H={"Content-Type":"application/json"};return a.whatsappApiKey&&(H["x-api-key"]=a.whatsappApiKey),H},[a.whatsappApiKey]),N=async()=>{if(a.whatsappApiUrl){T("checking");try{const te=await(await fetch(`${a.whatsappApiUrl}/session/status/${a.whatsappSessionId}`,{headers:S()})).json();te.success&&te.state==="CONNECTED"?(T("connected"),j(null)):T("disconnected")}catch(H){console.error("Status check failed:",H),T("disconnected")}}},V=async()=>{if(a.whatsappApiUrl){ne("starting"),T("initializing");try{const te=await(await fetch(`${a.whatsappApiUrl}/session/start/${a.whatsappSessionId}`,{method:"GET",headers:S()})).json();te.success?setTimeout(()=>U(),2e3):v({channel:"whatsapp",success:!1,message:te.message||"Failed to start session"})}catch(H){v({channel:"whatsapp",success:!1,message:H.message})}ne(null)}},C=async()=>{if(a.whatsappApiUrl){ne("stopping");try{(await(await fetch(`${a.whatsappApiUrl}/session/terminate/${a.whatsappSessionId}`,{method:"GET",headers:S()})).json()).success&&(T("disconnected"),j(null),v({channel:"whatsapp",success:!0,message:"Session terminated"}))}catch(H){v({channel:"whatsapp",success:!1,message:H.message})}ne(null)}},U=async()=>{if(a.whatsappApiUrl){W(!0);try{const te=await(await fetch(`${a.whatsappApiUrl}/session/qr/${a.whatsappSessionId}`,{headers:S()})).json();if(te.success&&te.qr)j(te.qr),T("disconnected");else{const ge=`${a.whatsappApiUrl}/session/qr/${a.whatsappSessionId}/image`;j(ge)}}catch(H){console.error("QR fetch failed:",H);const te=`${a.whatsappApiUrl}/session/qr/${a.whatsappSessionId}/image`;j(te)}W(!1)}},I=async()=>{if(a.whatsappApiUrl)try{const te=await(await fetch(`${a.whatsappApiUrl}/settings`,{headers:S()})).json();te.success&&te.settings&&he(ge=>({...ge,...te.settings}))}catch(H){console.error("Failed to fetch FB settings",H)}},Ze=async()=>{if(a.whatsappApiUrl){Ue(!0);try{const te=await(await fetch(`${a.whatsappApiUrl}/settings`,{method:"POST",headers:S(),body:JSON.stringify(ce)})).json();te.success?v({channel:"facebook",success:!0,message:"Facebook settings saved to server!"}):v({channel:"facebook",success:!1,message:"Failed to save: "+te.message})}catch(H){v({channel:"facebook",success:!1,message:H.message||"Error saving settings"})}Ue(!1)}};re.useEffect(()=>{const H=wb();t(H),H.whatsappApiUrl&&H.whatsappEnabled&&(N(),I())},[]),re.useEffect(()=>{a.whatsappApiUrl&&a.whatsappEnabled&&(N(),I())},[a.whatsappApiUrl,a.whatsappEnabled]);const $e=async H=>{p(H),v(null);try{if(H==="email"&&a.emailEnabled&&a.web3formsKey){const ge=await(await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:a.web3formsKey,subject:" Test Notification - DTH Store",from_name:"DTH Store Website",message:"This is a test notification. Your email integration is working!"})})).json();v({channel:H,success:ge.success,message:ge.success?"Email sent successfully!":ge.message})}else if(H==="telegram"&&a.telegramEnabled&&a.telegramBotToken&&a.telegramChatId){const Ye=await(await fetch(`https://api.telegram.org/bot${a.telegramBotToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:a.telegramChatId,text:` *Test Notification*

Your Telegram integration is working!

_From DTH Store CMS_`,parse_mode:"Markdown"})})).json();v({channel:H,success:Ye.ok,message:Ye.ok?"Telegram message sent!":Ye.description})}else if(H==="whatsapp"&&a.whatsappEnabled&&a.whatsappApiUrl&&a.whatsappAdminNumber){const te=await fetch(`${a.whatsappApiUrl}/client/sendMessage/${a.whatsappSessionId}`,{method:"POST",headers:S(),body:JSON.stringify({chatId:`${a.whatsappAdminNumber}@c.us`,message:` *Test Notification*

Your WhatsApp integration is working!

_From DTH Store CMS_`})}),ge=await te.json();v({channel:H,success:te.ok,message:te.ok?"WhatsApp message sent!":ge.message||"Failed to send"})}else v({channel:H,success:!1,message:"Please enable and configure this channel first"})}catch(te){v({channel:H,success:!1,message:te.message||"Test failed"})}p(null)},Q=()=>{"Notification"in window&&Notification.requestPermission().then(H=>{H==="granted"?(new Notification("DTH Store Notifications Enabled!",{body:"You will now receive alerts for new leads.",icon:"/favicon.ico"}),v({channel:"browser",success:!0,message:"Browser notifications enabled!"})):v({channel:"browser",success:!1,message:"Permission denied"})})},q=({status:H})=>{const te={connected:"bg-green-100 text-green-800 border-green-200",disconnected:"bg-red-100 text-red-800 border-red-200",checking:"bg-yellow-100 text-yellow-800 border-yellow-200",initializing:"bg-blue-100 text-blue-800 border-blue-200",unknown:"bg-gray-100 text-gray-800 border-gray-200"},ge={connected:" Connected",disconnected:" Disconnected",checking:" Checking...",initializing:" Initializing...",unknown:" Unknown"};return c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${te[H]}`,children:ge[H]})};return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 text-white",children:c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[c.jsx(xo,{className:"mr-3",size:28})," Notification Settings"]}),c.jsx("p",{className:"mt-2 opacity-90",children:"Configure how you receive alerts when new leads are submitted"})]}),c.jsx("button",{onClick:Ee,className:`px-6 py-3 rounded-xl font-bold flex items-center transition ${s?"bg-green-500 text-white":"bg-white text-blue-600 hover:bg-blue-50"}`,children:s?c.jsxs(c.Fragment,{children:[c.jsx(On,{size:20,className:"mr-2"})," Saved!"]}):c.jsxs(c.Fragment,{children:[c.jsx(jc,{size:20,className:"mr-2"})," Save Settings"]})})]})}),x&&c.jsxs("div",{className:`p-4 rounded-xl flex items-center ${x.success?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[x.success?c.jsx(On,{size:20,className:"mr-3"}):c.jsx(KT,{size:20,className:"mr-3"}),c.jsxs("span",{className:"font-medium",children:[x.channel.toUpperCase(),":"]}),c.jsx("span",{className:"ml-2",children:x.message}),c.jsx("button",{onClick:()=>v(null),className:"ml-auto text-gray-500 hover:text-gray-700 text-xl",children:""})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-green-50 to-emerald-50",children:c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-14 h-14 bg-green-500 rounded-2xl flex items-center justify-center mr-4 shadow-lg",children:c.jsx(sm,{className:"text-white",size:28})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"WhatsApp Business"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Self-hosted WhatsApp API on AWS EC2"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(q,{status:E}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a.whatsappEnabled,onChange:H=>t({...a,whatsappEnabled:H.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-500"})]})]})]})}),a.whatsappEnabled&&c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[c.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center",children:[c.jsx(QT,{size:18,className:"mr-2"})," Server Configuration"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Server URL"}),c.jsx("input",{type:"text",value:a.whatsappApiUrl,onChange:H=>t({...a,whatsappApiUrl:H.target.value}),placeholder:"http://ec2-13-221-113-50.compute-1.amazonaws.com:3000",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:o.whatsapp?"text":"password",value:a.whatsappApiKey,onChange:H=>t({...a,whatsappApiKey:H.target.value}),placeholder:"dthstore2024secure",className:"w-full p-3 pr-12 border rounded-lg focus:ring-2 focus:ring-green-500"}),c.jsx("button",{onClick:()=>D("whatsapp"),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:o.whatsapp?c.jsx(gf,{size:20}):c.jsx(pf,{size:20})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session ID"}),c.jsx("input",{type:"text",value:a.whatsappSessionId,onChange:H=>t({...a,whatsappSessionId:H.target.value}),placeholder:"DTHSTORE",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin WhatsApp Number"}),c.jsx("input",{type:"text",value:a.whatsappAdminNumber,onChange:H=>t({...a,whatsappAdminNumber:H.target.value}),placeholder:"919311252564",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Include country code (91 for India)"})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-5 space-y-4",children:[c.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center",children:[c.jsx(XT,{size:18,className:"mr-2"})," Session Management"]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsxs("button",{onClick:N,disabled:!a.whatsappApiUrl||E==="checking",className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 flex items-center",children:[E==="checking"?c.jsx(to,{size:16,className:"mr-2 animate-spin"}):c.jsx(Cc,{size:16,className:"mr-2"}),"Check Status"]}),c.jsxs("button",{onClick:V,disabled:!a.whatsappApiUrl||k==="starting",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center",children:[k==="starting"?c.jsx(to,{size:16,className:"mr-2 animate-spin"}):c.jsx(JT,{size:16,className:"mr-2"}),"Start Session"]}),c.jsxs("button",{onClick:C,disabled:!a.whatsappApiUrl||k==="stopping",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center",children:[k==="stopping"?c.jsx(to,{size:16,className:"mr-2 animate-spin"}):c.jsx(ZT,{size:16,className:"mr-2"}),"Stop Session"]}),c.jsxs("button",{onClick:U,disabled:!a.whatsappApiUrl||F,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center",children:[F?c.jsx(to,{size:16,className:"mr-2 animate-spin"}):c.jsx($T,{size:16,className:"mr-2"}),"Get QR Code"]})]}),w&&E!=="connected"&&c.jsxs("div",{className:"mt-4 p-6 bg-white rounded-xl border-2 border-dashed border-green-300 text-center",children:[c.jsx("h5",{className:"font-semibold text-gray-700 mb-4",children:"Scan QR Code with WhatsApp"}),c.jsx("div",{className:"inline-block bg-white p-4 rounded-lg shadow-lg",children:w.startsWith("http")?c.jsx("img",{src:`${w}?t=${Date.now()}`,alt:"WhatsApp QR Code",className:"w-64 h-64 object-contain",onError:H=>{H.target.style.display="none"}}):c.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(w)}`,alt:"WhatsApp QR Code",className:"w-64 h-64"})}),c.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[c.jsx("p",{children:"1. Open WhatsApp on your phone"}),c.jsx("p",{children:"2. Go to Settings  Linked Devices"}),c.jsx("p",{children:'3. Tap "Link a Device" and scan this QR code'})]}),c.jsxs("button",{onClick:U,className:"mt-4 text-green-600 hover:text-green-800 text-sm font-medium flex items-center justify-center mx-auto",children:[c.jsx(Cc,{size:14,className:"mr-1"})," Refresh QR Code"]})]}),E==="connected"&&c.jsxs("div",{className:"mt-4 p-6 bg-green-50 rounded-xl border border-green-200 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(On,{className:"text-white",size:32})}),c.jsx("h5",{className:"font-semibold text-green-800 text-lg",children:"WhatsApp Connected!"}),c.jsx("p",{className:"text-green-600 mt-2",children:"Your WhatsApp session is active and ready to send notifications."})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{onClick:()=>$e("whatsapp"),disabled:m==="whatsapp"||!a.whatsappApiUrl||!a.whatsappAdminNumber||E!=="connected",className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center font-medium",children:[c.jsx(yf,{size:18,className:"mr-2"}),m==="whatsapp"?"Sending...":"Send Test Message"]})})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:c.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg",children:c.jsx(kx,{className:"text-white",size:28})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Facebook Lead Ads"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Integrate Leads from Facebook & Instagram"})]})]})})}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5",children:[c.jsxs("h4",{className:"font-semibold text-blue-900 flex items-center mb-3",children:[c.jsx(Px,{size:18,className:"mr-2"})," Webhook Configuration"]}),c.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Enter this URL in your Facebook App > Webhooks > Page:"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{readOnly:!0,value:a.whatsappApiUrl?`${a.whatsappApiUrl}/leads/webhook`:"Configure API URL first",className:"flex-1 p-3 bg-white border border-blue-200 rounded-lg text-gray-600 font-mono text-sm"}),c.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${a.whatsappApiUrl}/leads/webhook`),className:"p-3 bg-white border border-blue-200 rounded-lg hover:bg-blue-100 text-blue-600",title:"Copy URL",children:c.jsx(On,{size:18})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verify Token"}),c.jsxs("div",{className:"relative",children:[c.jsx(WT,{className:"absolute left-3 top-3 text-gray-400",size:18}),c.jsx("input",{type:"text",value:ce.facebookVerifyToken,onChange:H=>he({...ce,facebookVerifyToken:H.target.value}),className:"w-full pl-10 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"dthstore_fb_token"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must match the token entered in Facebook."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Page Access Token"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"password",value:ce.facebookPageAccessToken,onChange:H=>he({...ce,facebookPageAccessToken:H.target.value}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"EAAG..."})}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Required to fetch Lead Name & Phone Number automatically."})]})]}),c.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:c.jsxs("button",{onClick:Ze,disabled:xe||!a.whatsappApiUrl,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center font-medium",children:[xe?c.jsx(to,{size:18,className:"mr-2 animate-spin"}):c.jsx(jc,{size:18,className:"mr-2"}),"Update Facebook Settings"]})})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-gray-100",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mr-4",children:c.jsx(Cr,{className:"text-blue-600",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Email Notifications"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Receive leads via email using Web3Forms"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a.emailEnabled,onChange:H=>t({...a,emailEnabled:H.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]})}),a.emailEnabled&&c.jsxs("div",{className:"p-6 bg-gray-50 space-y-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[c.jsx(fy,{size:20,className:"text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("p",{className:"font-medium",children:"How to get Web3Forms Access Key:"}),c.jsxs("ol",{className:"mt-2 list-decimal list-inside space-y-1",children:[c.jsxs("li",{children:["Go to ",c.jsx("a",{href:"https://web3forms.com",target:"_blank",className:"underline",children:"web3forms.com"})]}),c.jsx("li",{children:"Enter your email address"}),c.jsx("li",{children:"Copy the Access Key sent to your email"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Web3Forms Access Key"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:o.web3forms?"text":"password",value:a.web3formsKey,onChange:H=>t({...a,web3formsKey:H.target.value}),placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",className:"w-full p-3 pr-12 border rounded-lg focus:ring-2 focus:ring-blue-500"}),c.jsx("button",{onClick:()=>D("web3forms"),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:o.web3forms?c.jsx(gf,{size:20}):c.jsx(pf,{size:20})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Email Address"}),c.jsx("input",{type:"email",value:a.adminEmail,onChange:H=>t({...a,adminEmail:H.target.value}),placeholder:"your@email.com",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),c.jsxs("button",{onClick:()=>$e("email"),disabled:m==="email"||!a.web3formsKey,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[c.jsx(yf,{size:16,className:"mr-2"}),m==="email"?"Sending...":"Test Email"]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-gray-100",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center mr-4",children:c.jsx(eA,{className:"text-sky-600",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Telegram Notifications"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Instant alerts via Telegram bot"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a.telegramEnabled,onChange:H=>t({...a,telegramEnabled:H.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:ring-4 peer-focus:ring-sky-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-sky-500"})]})]})}),a.telegramEnabled&&c.jsxs("div",{className:"p-6 bg-gray-50 space-y-4",children:[c.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 flex items-start",children:[c.jsx(fy,{size:20,className:"text-sky-600 mr-3 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-sky-800",children:[c.jsx("p",{className:"font-medium",children:"How to setup Telegram Bot:"}),c.jsxs("ol",{className:"mt-2 list-decimal list-inside space-y-1",children:[c.jsxs("li",{children:["Message ",c.jsx("a",{href:"https://t.me/BotFather",target:"_blank",className:"underline",children:"@BotFather"})," on Telegram"]}),c.jsx("li",{children:"Send /newbot and follow instructions"}),c.jsx("li",{children:"Copy the Bot Token"}),c.jsx("li",{children:"Message your bot, then visit API to get Chat ID"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bot Token"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:o.telegram?"text":"password",value:a.telegramBotToken,onChange:H=>t({...a,telegramBotToken:H.target.value}),placeholder:"123456789:ABCdefGHIjklMNOpqrsTUVwxyz",className:"w-full p-3 pr-12 border rounded-lg focus:ring-2 focus:ring-sky-500"}),c.jsx("button",{onClick:()=>D("telegram"),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:o.telegram?c.jsx(gf,{size:20}):c.jsx(pf,{size:20})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chat ID"}),c.jsx("input",{type:"text",value:a.telegramChatId,onChange:H=>t({...a,telegramChatId:H.target.value}),placeholder:"123456789",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-sky-500"})]})]}),c.jsxs("button",{onClick:()=>$e("telegram"),disabled:m==="telegram"||!a.telegramBotToken||!a.telegramChatId,className:"px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 disabled:opacity-50 flex items-center",children:[c.jsx(yf,{size:16,className:"mr-2"}),m==="telegram"?"Sending...":"Test Telegram"]})]})]}),c.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mr-4",children:c.jsx(xo,{className:"text-purple-600",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Browser Notifications"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Desktop alerts when logged in"})]})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:Q,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200",children:"Enable"}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a.browserNotificationsEnabled,onChange:H=>t({...a,browserNotificationsEnabled:H.target.checked}),className:"sr-only peer"}),c.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-purple-600"})]})]})]})})}),a.whatsappApiUrl&&c.jsx("div",{className:"text-center text-sm text-gray-500",children:c.jsxs("a",{href:`${a.whatsappApiUrl}/api-docs`,target:"_blank",className:"inline-flex items-center hover:text-blue-600",children:[c.jsx(tA,{size:14,className:"mr-1"})," View WhatsApp API Documentation"]})})]})},NI=({user:a})=>{const[t,s]=re.useState("leads");return c.jsxs("div",{className:"min-h-screen bg-gray-100 pb-10",children:[c.jsx("div",{className:"bg-white shadow px-4 py-5 sm:px-6 sticky top-16 z-30",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row justify-between items-center",children:[c.jsxs("div",{className:"flex items-center mb-4 sm:mb-0",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3",children:a.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Dashboard"}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Welcome, ",a.name," (",a.role,")"]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 bg-gray-100 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>s("leads"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${t==="leads"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-900"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(am,{size:16,className:"mr-2"})," Leads"]})}),a.role==="ADMIN"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>s("products"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${t==="products"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-900"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ux,{size:16,className:"mr-2"})," Products"]})}),c.jsx("button",{onClick:()=>s("notifications"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${t==="notifications"?"bg-white text-orange-600 shadow-sm":"text-gray-500 hover:text-gray-900"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(xo,{size:16,className:"mr-2"})," Notifications"]})}),c.jsx("button",{onClick:()=>s("settings"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${t==="settings"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-900"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(nA,{size:16,className:"mr-2"})," Settings"]})})]})]})]})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:[t==="leads"&&c.jsx(vI,{user:a}),t==="products"&&a.role==="ADMIN"&&c.jsx(EI,{user:a}),t==="notifications"&&a.role==="ADMIN"&&c.jsx(AI,{}),t==="settings"&&a.role==="ADMIN"&&c.jsx(TI,{user:a})]})]})},SI=({user:a,onLogout:t})=>{const[s,r]=re.useState([]),[o,d]=re.useState(!0);re.useEffect(()=>{(async()=>{if(a.id){const x=await N1(a.id);r(x.sort((v,E)=>E.createdAt-v.createdAt))}d(!1)})()},[a.id]);const m=p=>{switch(p){case"New":return"bg-blue-100 text-blue-800";case"Contacted":return"bg-yellow-100 text-yellow-800";case"Interested":return"bg-purple-100 text-purple-800";case"Installed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return c.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[c.jsx("header",{className:"bg-white shadow-sm",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold",children:a.name.charAt(0).toUpperCase()}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"My Account"}),c.jsx("p",{className:"text-sm text-gray-500",children:a.username})]})]}),c.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-red-600 hover:bg-red-50 rounded-lg transition",children:[c.jsx(Mx,{size:18}),c.jsx("span",{children:"Logout"})]})]})})}),c.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Requests"}),c.jsx("p",{className:"text-gray-600",children:"Track status of your installation requests"})]}),o?c.jsx("div",{className:"flex justify-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.length===0?c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(sA,{size:32,className:"text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No requests found"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"You haven't placed any installation requests yet."}),c.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Browse Plans"})]}):c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(p=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100 hover:shadow-md transition",children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${m(p.status)}`,children:p.status}),c.jsxs("span",{className:"text-sm text-gray-400 flex items-center gap-1",children:[c.jsx(tm,{size:14}),new Date(p.createdAt).toLocaleDateString()]})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:p.serviceType}),c.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["Operator: ",p.operator]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-500 border-t pt-4",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Request ID:"}),c.jsxs("span",{className:"font-mono text-gray-700",children:["#",p.id.slice(-6).toUpperCase()]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"City:"}),c.jsx("span",{className:"text-gray-700",children:p.location})]})]})]}),c.jsx("div",{className:"bg-gray-50 px-6 py-3 text-xs text-gray-500 flex justify-between items-center",children:p.status==="Installed"?c.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[c.jsx(On,{size:14})," Completed"]}):p.status==="Cancelled"?c.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[c.jsx(aA,{size:14})," Cancelled"]}):c.jsx("span",{className:"text-blue-600",children:"In Progress"})})]},p.id))})]})]})},wI=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Qb=({onSubmit:a,hideHeader:t=!1})=>{const[s,r]=re.useState({name:"",mobile:"",location:Tc[0],serviceType:Ft.DTH,operator:Ir[0]}),[o,d]=re.useState(!1),[m,p]=re.useState(!1),x=T=>{const{name:w,value:j}=T.target;if(w==="serviceType"){const F=j,W=F===Ft.DTH?Ir[0]:Dc[0];r(k=>({...k,serviceType:F,operator:W}))}else r(F=>({...F,[w]:j}))},v=async T=>{T.preventDefault(),d(!0);const w={id:wI(),...s,status:bt.NEW,source:"Website",createdAt:Date.now()},j=a(w);j instanceof Promise&&await j,d(!1),p(!0),setTimeout(()=>{p(!1),r({name:"",mobile:"",location:Tc[0],serviceType:Ft.DTH,operator:Ir[0]})},3e3)},E=s.serviceType===Ft.DTH?Ir:Dc;return c.jsx("div",{className:`bg-white rounded-xl ${t?"":"shadow-xl p-6 md:p-8"}`,children:m?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:c.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Request Received!"}),c.jsxs("p",{className:"text-gray-600",children:["Our expert will call you shortly on ",s.mobile,"."]})]}):c.jsxs(c.Fragment,{children:[!t&&c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2 text-center",children:"Get Best Deal Today"}),c.jsx("p",{className:"text-gray-500 text-center mb-6",children:"Fill form to get a callback within 5 mins"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),c.jsx("input",{type:"text",name:"name",required:!0,value:s.name,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),c.jsx("input",{type:"tel",name:"mobile",required:!0,pattern:"[0-9]{10}",title:"10 digit mobile number",value:s.mobile,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"9876543210"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),c.jsx("select",{name:"location",value:s.location,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:Tc.map(T=>c.jsx("option",{value:T,children:T},T))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),c.jsxs("select",{name:"serviceType",value:s.serviceType,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:[c.jsx("option",{value:Ft.DTH,children:"DTH TV"}),c.jsx("option",{value:Ft.BROADBAND,children:"WiFi / Fiber"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Operator"}),c.jsx("select",{name:"operator",value:s.operator,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:E.map(T=>c.jsx("option",{value:T,children:T},T))})]}),c.jsx("button",{type:"submit",disabled:o,className:`w-full py-3 px-4 bg-orange-600 hover:bg-orange-700 text-white font-bold rounded-lg shadow-md transition duration-300 transform hover:-translate-y-1 ${o?"opacity-70 cursor-not-allowed":""}`,children:o?"Submitting...":"Request Callback"}),c.jsx("p",{className:"text-xs text-center text-gray-400 mt-4",children:"Authorized Partner. Your data is secure."})]})]})})},II=({slides:a,onLeadSubmit:t})=>{const[s,r]=re.useState(0),o=()=>{r(s===a.length-1?0:s+1)},d=()=>{r(s===0?a.length-1:s-1)};return re.useEffect(()=>{const m=setInterval(()=>{o()},5e3);return()=>clearInterval(m)},[s,a.length]),!a||a.length===0?null:c.jsxs("div",{className:"relative bg-gray-900 overflow-hidden",children:[c.jsxs("div",{className:"relative h-[650px] md:h-[600px]",children:[a.map((m,p)=>c.jsxs("div",{className:`absolute inset-0 transition-opacity duration-1000 ease-in-out ${p===s?"opacity-100":"opacity-0"}`,children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${m.image})`}}),c.jsx("div",{className:"absolute inset-0 bg-black/60 bg-gradient-to-r from-black/80 to-transparent"})]},m.id)),c.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full",children:c.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center h-full pt-16 md:pt-0",children:[c.jsxs("div",{className:"text-white space-y-6 z-10 hidden md:block",children:[c.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-orange-500 text-sm font-semibold mb-2",children:"Limited Time Offer"}),c.jsx("h1",{className:"text-4xl md:text-6xl font-bold leading-tight transition-all duration-500 transform translate-y-0 opacity-100",children:a[s].title}),c.jsx("p",{className:"text-xl text-gray-200 max-w-lg",children:a[s].subtitle}),c.jsx("button",{onClick:()=>document.getElementById("book-now")?.scrollIntoView({behavior:"smooth"}),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full transition-all",children:a[s].cta})]}),c.jsxs("div",{className:"text-white z-10 md:hidden text-center absolute top-10 left-0 right-0 px-4",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:a[s].title}),c.jsx("p",{className:"text-sm text-gray-200",children:a[s].subtitle})]}),c.jsx("div",{id:"book-now",className:"w-full max-w-md mx-auto z-20 mt-20 md:mt-0",children:c.jsx(Qb,{onSubmit:t})})]})})]}),c.jsx("button",{onClick:d,className:"hidden md:block absolute left-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full backdrop-blur-sm transition",children:c.jsx(iA,{size:32})}),c.jsx("button",{onClick:o,className:"hidden md:block absolute right-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full backdrop-blur-sm transition",children:c.jsx(rA,{size:32})}),c.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex space-x-2",children:a.map((m,p)=>c.jsx("button",{onClick:()=>r(p),className:`w-3 h-3 rounded-full transition-all ${p===s?"bg-orange-500 w-8":"bg-white/50 hover:bg-white"}`},p))})]})},RI=({onBookNow:a})=>{const[t,s]=re.useState([]),[r,o]=re.useState("ALL");re.useEffect(()=>{s(Nb())},[]);const d=t.filter(m=>r==="ALL"||m.type===r);return c.jsx("div",{className:"bg-gray-50 min-h-screen py-12",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:"Explore Our Plans"}),c.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Whether you need lightning fast internet or endless entertainment, we have the perfect plan for you."})]}),c.jsx("div",{className:"flex justify-center mb-12",children:c.jsx("div",{className:"inline-flex bg-white rounded-full p-1 shadow-md border border-gray-200",children:["ALL","DTH","Broadband"].map(m=>c.jsx("button",{onClick:()=>o(m),className:`px-6 py-2 rounded-full text-sm font-medium transition-all duration-200 ${r===m?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:m==="ALL"?"All Plans":m},m))})}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(m=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 flex flex-col h-full",children:[c.jsxs("div",{className:"relative h-56 overflow-hidden bg-gray-200",children:[c.jsx("img",{src:m.image,alt:m.title,className:"w-full h-full object-cover"}),m.isBestSeller&&c.jsx("div",{className:"absolute top-4 right-4 bg-yellow-400 text-black text-xs font-bold px-3 py-1 rounded-full shadow-sm",children:"BEST SELLER"}),c.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 ${m.color||"bg-blue-500"}`})]}),c.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[c.jsx("div",{className:"flex justify-between items-start mb-2",children:c.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded bg-gray-100 text-gray-600 uppercase tracking-wide",children:m.type})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:m.title}),c.jsxs("div",{className:"flex items-baseline mb-4",children:[c.jsx("span",{className:"text-3xl font-extrabold text-gray-900",children:m.price}),c.jsx("span",{className:"ml-2 text-sm text-gray-400 line-through",children:m.originalPrice})]}),c.jsx("ul",{className:"space-y-3 mb-8 flex-grow",children:m.features.map((p,x)=>c.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[c.jsx(im,{size:16,className:"text-green-500 mr-2 flex-shrink-0 mt-0.5"}),c.jsx("span",{children:p})]},x))}),c.jsxs("button",{onClick:a,className:`w-full py-3 rounded-xl text-white font-bold flex items-center justify-center transition-colors shadow-lg ${m.type==="DTH"?"bg-gray-800 hover:bg-gray-900":"bg-blue-600 hover:bg-blue-700"}`,children:["Book Now ",c.jsx(br,{size:18,className:"ml-2"})]})]})]},m.id))}),d.length===0&&c.jsx("div",{className:"text-center py-20",children:c.jsx("p",{className:"text-gray-500 text-lg",children:"No plans found in this category."})})]})})},CI=({config:a,onLeadSubmit:t})=>c.jsxs("div",{className:"bg-white",children:[c.jsxs("div",{className:"relative bg-gray-900 min-h-[600px] flex items-center",children:[c.jsxs("div",{className:"absolute inset-0 z-0",children:[c.jsx("img",{src:a.specialOfferImages.heroBackground,alt:"TV Entertainment",className:"w-full h-full object-cover opacity-30"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent"})]}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 z-10 grid md:grid-cols-2 gap-12 items-center py-12",children:[c.jsxs("div",{className:"text-white space-y-6",children:[c.jsx("div",{className:"inline-block bg-yellow-500 text-black font-bold px-4 py-1 rounded-full text-sm animate-pulse shadow-lg",children:"Limited Time Deal"}),c.jsxs("h1",{className:"text-4xl md:text-6xl font-bold leading-tight",children:["HD Services With ",c.jsx("span",{className:"text-orange-500",children:a.logoText}),c.jsx("br",{}),"Hassle Free,",c.jsx("br",{}),"Har Ghar Tak"]}),c.jsx("p",{className:"text-2xl font-light text-gray-300 border-l-4 border-orange-500 pl-4",children:"3600 Cashback | Free Installation | Book Now"}),c.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full backdrop-blur-sm",children:[c.jsx(jf,{className:"text-green-400"})," Authorized Partner"]}),c.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full backdrop-blur-sm",children:[c.jsx(tm,{className:"text-blue-400"})," 24hr Installation"]})]})]}),c.jsx("div",{className:"bg-white/10 backdrop-blur-md p-1 rounded-2xl border border-white/20 shadow-2xl max-w-md mx-auto w-full",children:c.jsxs("div",{className:"bg-white rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"bg-orange-600 text-white p-4 text-center",children:[c.jsx("h3",{className:"text-xl font-bold",children:"Register & Get Cashback 3600"}),c.jsx("p",{className:"text-sm opacity-90",children:"Fill form to unlock this special offer"})]}),c.jsx("div",{className:"p-6",children:c.jsx(Qb,{onSubmit:t,hideHeader:!0})})]})})]})]}),c.jsx("div",{className:"py-16 bg-gradient-to-b from-gray-50 to-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[c.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:["About ",c.jsx("span",{className:"text-orange-500",children:"Special Cashback Offer"})]}),c.jsxs("p",{className:"text-gray-600 text-lg",children:["Enjoy premium entertainment with ",a.logoText,"  Pay & Enjoy. Why wait? Connect with us today!"]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-start",children:[c.jsxs("div",{className:"order-2 md:order-1 space-y-8",children:[c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border-l-4 border-orange-500 relative overflow-hidden group hover:-translate-y-1 transition duration-300",children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:c.jsx(my,{size:100,className:"text-orange-500"})}),c.jsxs("h3",{className:"text-2xl font-bold mb-6 flex items-center text-gray-900",children:[c.jsx("span",{className:"bg-orange-100 text-orange-600 p-2 rounded-lg mr-3",children:c.jsx(my,{})}),"The 3600 Dhamaka Offer"]}),c.jsxs("ul",{className:"space-y-4 text-gray-700",children:[c.jsxs("li",{className:"flex items-start",children:[c.jsx(On,{className:"text-green-500 mr-3 mt-1 shrink-0",size:20}),c.jsxs("span",{children:[c.jsx("strong",{children:"3600 Balance:"})," Get account balance worth 3600 instantly."]})]}),c.jsxs("li",{className:"flex items-start",children:[c.jsx(On,{className:"text-green-500 mr-3 mt-1 shrink-0",size:20}),c.jsxs("span",{children:[c.jsx("strong",{children:"Pay Only 3300:"})," Save 300 instantly + Free HD Set Top Box."]})]}),c.jsxs("li",{className:"flex items-start",children:[c.jsx(On,{className:"text-green-500 mr-3 mt-1 shrink-0",size:20}),c.jsxs("span",{children:[c.jsx("strong",{children:"Complete Kit:"})," Includes Remote, Adaptor, 10m Wire & Installation."]})]}),c.jsxs("li",{className:"flex items-start",children:[c.jsx(On,{className:"text-green-500 mr-3 mt-1 shrink-0",size:20}),c.jsxs("span",{children:[c.jsx("strong",{children:"1 Year Warranty:"})," Full onsite warranty & 24/7 Support included."]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl text-center border border-blue-100 hover:shadow-md transition",children:[c.jsx("h4",{className:"font-bold text-blue-900 text-lg mb-2",children:"Vision"}),c.jsx("p",{className:"text-sm text-blue-700",children:"To be the most trusted DTH partner in India delivering innovative solutions."})]}),c.jsxs("div",{className:"bg-green-50 p-6 rounded-xl text-center border border-green-100 hover:shadow-md transition",children:[c.jsx("h4",{className:"font-bold text-green-900 text-lg mb-2",children:"Mission"}),c.jsx("p",{className:"text-sm text-green-700",children:"Provide reliable, affordable services with exceptional support."})]})]})]}),c.jsx("div",{className:"order-1 md:order-2",children:c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-pink-500 rounded-2xl rotate-3 opacity-20 transform group-hover:rotate-1 transition duration-500"}),c.jsx("img",{src:a.specialOfferImages.sideImage,alt:"DTH Setup",className:"relative rounded-2xl shadow-2xl w-full object-cover h-[500px]"}),c.jsx("div",{className:"absolute bottom-6 left-6 right-6 bg-white/95 backdrop-blur p-6 rounded-xl shadow-lg border border-white/50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Effective Price"}),c.jsxs("div",{className:"flex items-baseline",children:[c.jsx("span",{className:"text-3xl font-extrabold text-gray-900",children:"3,300"}),c.jsx("span",{className:"ml-2 text-sm text-red-500 line-through",children:"5,000"})]})]}),c.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"bg-gray-900 text-white px-6 py-3 rounded-lg font-bold hover:bg-black transition shadow-lg",children:"Claim Now"})]})})]})})]})]})}),c.jsx("div",{className:"py-20 bg-white border-t border-gray-100",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-center mb-16 text-gray-800",children:"How It Works"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-12 relative",children:[c.jsx("div",{className:"hidden md:block absolute top-12 left-1/6 right-1/6 h-0.5 bg-gray-200 -z-0"}),c.jsxs("div",{className:"relative text-center z-10 bg-white p-4",children:[c.jsx("div",{className:"w-24 h-24 bg-orange-50 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600 shadow-sm border border-orange-100",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2"}),c.jsx("path",{d:"M12 18h.01"})]})}),c.jsx("h3",{className:"font-bold text-xl mb-3 text-gray-900",children:"1. Book Online"}),c.jsx("p",{className:"text-gray-500",children:"Fill the simple form above with your basic details."})]}),c.jsxs("div",{className:"relative text-center z-10 bg-white p-4",children:[c.jsx("div",{className:"w-24 h-24 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-600 shadow-sm border border-blue-100",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})}),c.jsx("h3",{className:"font-bold text-xl mb-3 text-gray-900",children:"2. Technician Visits"}),c.jsx("p",{className:"text-gray-500",children:"Our expert technician installs the setup at your home."})]}),c.jsxs("div",{className:"relative text-center z-10 bg-white p-4",children:[c.jsx("div",{className:"w-24 h-24 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600 shadow-sm border border-green-100",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}),c.jsx("path",{d:"M12 18V6"})]})}),c.jsx("h3",{className:"font-bold text-xl mb-3 text-gray-900",children:"3. Receive Cashback"}),c.jsx("p",{className:"text-gray-500",children:"Get the full cashback amount credited to your account."})]})]})]})})]}),jI="dthstore_user_session",DI=()=>{const t="admin@dthstore.shop".split(",").map(s=>s.trim().toLowerCase()).filter(Boolean);return t.length===0?["admin@dthstore.shop"]:t},OI=async(a,t)=>{if(!Xr()||!Xs)throw new Error("Firebase not configured. Use demo login.");try{const s=await VA(Xs,a,t),r=qm(s.user);return Ym(r),r}catch(s){throw new Error(mh(s.code))}},VI=async(a,t,s)=>{if(!Xr()||!Xs)throw new Error("Firebase not configured. Sign up is disabled in demo mode.");try{const r=await MA(Xs,a,t),o=qm(r.user,s);return Ym(o),o}catch(r){throw new Error(mh(r.code))}},MI=async()=>{if(!Xr()||!Xs||!Fc)throw new Error("Firebase not configured. Google sign-in is disabled in demo mode.");try{const a=await OA(Xs,Fc),t=qm(a.user);return Ym(t),t}catch(a){throw new Error(mh(a.code))}},UI=async a=>{if(!Xr()||!Xs)throw new Error("Firebase not configured. Password reset is disabled in demo mode.");try{await UA(Xs,a)}catch(t){throw new Error(mh(t.code))}},qm=(a,t)=>{const s=LI(a.email||"")?"ADMIN":"CUSTOMER";return{id:a.uid,username:a.email||a.uid,name:t||a.displayName||a.email?.split("@")[0]||"User",role:s}},LI=a=>DI().includes(a.toLowerCase()),Ym=a=>{localStorage.setItem(jI,JSON.stringify(a))},mh=a=>{switch(a){case"auth/invalid-email":return"Invalid email address format.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account already exists with this email.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/popup-closed-by-user":return"Sign-in popup was closed before completing.";case"auth/cancelled-popup-request":return"Sign-in was cancelled.";case"auth/popup-blocked":return"Pop-up was blocked by your browser. Please allow pop-ups.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/operation-not-allowed":return"This sign-in method is not enabled. Please contact support.";default:return console.error("Auth error code:",a),"Authentication failed. Please try again."}},Ox=()=>c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),c.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),c.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),c.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),zI=({onClose:a,onLoginSuccess:t})=>{const[s,r]=re.useState(""),[o,d]=re.useState(""),[m,p]=re.useState(""),[x,v]=re.useState(""),[E,T]=re.useState(!1),[w,j]=re.useState("login"),F=Xr(),W=async N=>{N.preventDefault(),v(""),T(!0);try{if(F){const C=await OI(s,o);t(C),a();return}}catch{console.log("Firebase auth failed, trying demo login")}const V=E1();V?(t(V),a()):v("Invalid email or password. Try demo credentials below."),T(!1)},k=async()=>{if(!F){v("Google sign-in requires Firebase configuration.");return}v(""),T(!0);try{const N=await MI();t(N),a()}catch(N){const V=N instanceof Error?N.message:"Google sign-in failed";v(V)}finally{T(!1)}},ne=async N=>{if(N.preventDefault(),!F){v("Sign up requires Firebase configuration. Use demo login for testing.");return}v(""),T(!0);try{const V=await VI(s,o,m);t(V),a()}catch(V){const C=V instanceof Error?V.message:"Sign up failed";v(C)}finally{T(!1)}},ce=async N=>{if(N.preventDefault(),!F){v("Password reset requires Firebase configuration.");return}v(""),T(!0);try{await UI(s),j("reset-sent")}catch(V){const C=V instanceof Error?V.message:"Failed to send reset email";v(C)}finally{T(!1)}},he=()=>{const N={login:"Staff Login",signup:"Create Account","forgot-password":"Reset Password","reset-sent":"Email Sent"};return c.jsxs("div",{className:"bg-blue-600 p-6 flex justify-between items-center text-white",children:[c.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[w!=="login"&&c.jsx("button",{onClick:()=>j("login"),className:"mr-2 p-1 hover:bg-blue-700 rounded-full transition","aria-label":"Go back",children:c.jsx(lA,{size:20})}),c.jsx(_f,{className:"mr-2",size:20}),N[w]]}),c.jsx("button",{onClick:a,className:"hover:bg-blue-700 p-1 rounded-full transition","aria-label":"Close",children:c.jsx(Gr,{size:24})})]})},xe=()=>F?null:c.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start",children:[c.jsx(uA,{size:18,className:"text-amber-600 mr-2 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-sm text-amber-800",children:[c.jsx("p",{className:"font-medium",children:"Demo Mode Active"}),c.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Firebase is not configured. Only demo login is available."})]})]}),Ue=()=>c.jsxs("div",{className:"p-8 space-y-5",children:[x&&c.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm text-center border border-red-200",children:x}),xe(),F&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{type:"button",onClick:k,disabled:E,className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-lg shadow-sm transition duration-200 disabled:opacity-50",children:[c.jsx(Ox,{}),"Continue with Google"]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-200"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 bg-white text-gray-500",children:"or sign in with email"})})]})]}),c.jsxs("form",{onSubmit:W,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email / Username"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:c.jsx(Cr,{size:18})}),c.jsx("input",{type:"text",value:s,onChange:N=>r(N.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Enter email or username",required:!0,autoComplete:"username"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:c.jsx(_f,{size:18})}),c.jsx("input",{type:"password",value:o,onChange:N=>d(N.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"",required:!0,autoComplete:"current-password"})]})]}),F&&c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",onClick:()=>{j("forgot-password"),v("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Forgot password?"})}),c.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Signing in...":"Sign In"})]}),F&&c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Don't have an account? "}),c.jsx("button",{type:"button",onClick:()=>{j("signup"),v("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Create one"})]}),!F&&c.jsxs("div",{className:"text-center text-xs text-gray-400 mt-4 pt-4 border-t",children:[c.jsx("p",{className:"font-medium text-gray-500 mb-1",children:"Demo Credentials"}),c.jsxs("p",{children:["Admin: ",c.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"admin"})," / ",c.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"admin123"})]}),c.jsxs("p",{children:["Staff: ",c.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"staff"})," / ",c.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"staff123"})]})]})]}),Ee=()=>c.jsxs("div",{className:"p-8 space-y-5",children:[x&&c.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm text-center border border-red-200",children:x}),!F&&xe(),F&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{type:"button",onClick:k,disabled:E,className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-lg shadow-sm transition duration-200 disabled:opacity-50",children:[c.jsx(Ox,{}),"Sign up with Google"]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-200"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 bg-white text-gray-500",children:"or sign up with email"})})]}),c.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:c.jsx(oA,{size:18})}),c.jsx("input",{type:"text",value:m,onChange:N=>p(N.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Enter your name",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:c.jsx(Cr,{size:18})}),c.jsx("input",{type:"email",value:s,onChange:N=>r(N.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Enter your email",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:c.jsx(_f,{size:18})}),c.jsx("input",{type:"password",value:o,onChange:N=>d(N.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Min. 6 characters",minLength:6,required:!0})]})]}),c.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Creating Account...":"Create Account"})]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Already have an account? "}),c.jsx("button",{type:"button",onClick:()=>{j("login"),v("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Sign in"})]})]}),D=()=>c.jsxs("div",{className:"p-8 space-y-5",children:[x&&c.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm text-center border border-red-200",children:x}),!F&&xe(),F&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-center text-gray-600 mb-4",children:c.jsx("p",{children:"Enter your email address and we'll send you a link to reset your password."})}),c.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:c.jsx(Cr,{size:18})}),c.jsx("input",{type:"email",value:s,onChange:N=>r(N.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Enter your email",required:!0})]})]}),c.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Sending...":"Send Reset Link"})]})]}),c.jsx("div",{className:"text-center",children:c.jsx("button",{type:"button",onClick:()=>{j("login"),v("")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Back to Sign In"})})]}),S=()=>c.jsxs("div",{className:"p-8 text-center space-y-5",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"bg-green-100 p-4 rounded-full",children:c.jsx(On,{size:48,className:"text-green-600"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Check Your Email"}),c.jsx("p",{className:"text-gray-600",children:"We've sent a password reset link to:"}),c.jsx("p",{className:"font-medium text-gray-900 mt-1",children:s})]}),c.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{children:"Didn't receive the email? Check your spam folder or"}),c.jsx("button",{type:"button",onClick:()=>j("forgot-password"),className:"text-blue-600 hover:text-blue-800 font-medium",children:"try again"})]}),c.jsx("button",{onClick:()=>{j("login"),v("")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow transition duration-200",children:"Back to Sign In"})]});return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-300",children:[he(),w==="login"&&Ue(),w==="signup"&&Ee(),w==="forgot-password"&&D(),w==="reset-sent"&&S()]})})},PI=async(a,t)=>{if(!t.emailEnabled||!t.web3formsKey)return console.log("[Email] Not enabled or not configured"),!1;try{const r=await(await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:t.web3formsKey,subject:` New Lead: ${a.name} - ${a.serviceType}`,from_name:"DTH Store Website",to_email:t.adminEmail,name:a.name,mobile:a.mobile,service:a.serviceType,operator:a.operator,location:a.location,source:a.source,time:new Date().toLocaleString("en-IN")})})).json();if(r.success)return console.log(" [Email] Notification sent successfully"),!0;throw new Error(r.message)}catch(s){return console.error(" [Email] Failed:",s),!1}},kI=async(a,t)=>{if(!t.telegramEnabled||!t.telegramBotToken||!t.telegramChatId)return console.log("[Telegram] Not enabled or not configured"),!1;const s=`
 *New Lead Alert!*

 *Name:* ${a.name}
 *Mobile:* ${a.mobile}
 *Location:* ${a.location}
 *Service:* ${a.serviceType}
 *Operator:* ${a.operator}
 *Source:* ${a.source}
 *Time:* ${new Date().toLocaleString("en-IN")}

[ Call Now](tel:+91${a.mobile})
[ WhatsApp](https://wa.me/91${a.mobile})
`;try{const o=await(await fetch(`https://api.telegram.org/bot${t.telegramBotToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:t.telegramChatId,text:s,parse_mode:"Markdown",disable_web_page_preview:!0})})).json();if(o.ok)return console.log(" [Telegram] Notification sent successfully"),!0;throw new Error(o.description)}catch(r){return console.error(" [Telegram] Failed to send:",r),!1}},BI=async(a,t)=>{if(!t.whatsappEnabled||!t.whatsappApiUrl||!t.whatsappAdminNumber)return console.log("[WhatsApp] Not enabled or not configured"),!1;const s=` *New Lead - DTH Store*

 *Name:* ${a.name}
 *Mobile:* ${a.mobile}
 *Location:* ${a.location}
 *Service:* ${a.serviceType} - ${a.operator}
 *Source:* ${a.source}
 *Time:* ${new Date().toLocaleString("en-IN")}

 Call: tel:+91${a.mobile}
 WhatsApp: https://wa.me/91${a.mobile}`,r=`${t.whatsappAdminNumber}@c.us`;try{const o={"Content-Type":"application/json"};t.whatsappApiKey&&(o["x-api-key"]=t.whatsappApiKey);const d=await fetch(`${t.whatsappApiUrl}/client/sendMessage/${t.whatsappSessionId}`,{method:"POST",headers:o,body:JSON.stringify({chatId:r,message:s})}),m=await d.json();if(d.ok)return console.log(" [WhatsApp] Notification sent successfully"),!0;throw new Error(m.message||"WhatsApp send failed")}catch(o){return console.error(" [WhatsApp] Failed to send:",o),!1}},HI=(a,t)=>{t.browserNotificationsEnabled&&"Notification"in window&&Notification.permission==="granted"&&new Notification(" New Lead Received!",{body:`${a.name} - ${a.mobile}
${a.serviceType} | ${a.location}`,icon:"/favicon.ico",tag:"new-lead"})},GI=async a=>{console.log(`[NotificationService] Processing notifications for lead: ${a.name}`);const t=wb(),s=await Promise.allSettled([PI(a,t),kI(a,t),BI(a,t)]);HI(a,t);const r=s.filter(d=>d.status==="fulfilled"&&d.value===!0).length,o=s.length;return console.log(`[NotificationService] Sent ${r}/${o} notifications`),r>0||o===0},FI=()=>{const[a,t]=re.useState("home"),[s,r]=re.useState(null),[o,d]=re.useState(!1),[m,p]=re.useState(Hx);re.useEffect(()=>{(async()=>{const j=A1();j&&r(j);const F=await Sb();p(F)})()},[a]);const x=async w=>{s&&s.id&&(w.userId=s.id),S1(w);try{await GI(w)}catch(j){console.error("Failed to send notification:",j)}},v=()=>{a!=="home"?(t("home"),setTimeout(()=>document.getElementById("book-now")?.scrollIntoView({behavior:"smooth"}),100)):document.getElementById("book-now")?.scrollIntoView({behavior:"smooth"})},E=w=>{r(w),w.role==="ADMIN"?t("admin"):t("account"),d(!1)},T=()=>{T1(),r(null),t("home")};return c.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-gray-900",children:[c.jsx(qA,{user:s,config:m,onLoginClick:()=>d(!0),onLogoutClick:T,onNavigate:w=>t(w)}),o&&c.jsx(zI,{onClose:()=>d(!1),onLoginSuccess:E}),c.jsx("main",{className:"flex-grow",children:a==="admin"&&s?.role==="ADMIN"?c.jsx(NI,{user:s}):a==="account"&&s?c.jsx(SI,{user:s,onLogout:T}):a==="products"?c.jsx(RI,{onBookNow:v}):a==="offers"?c.jsx(CI,{config:m,onLeadSubmit:x}):c.jsxs(c.Fragment,{children:[c.jsx(II,{slides:m.heroSlides,onLeadSubmit:x}),c.jsx("div",{id:"services",className:"py-16 bg-gray-50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Best Selling Plans"}),c.jsx("p",{className:"mt-4 text-xl text-gray-500",children:"Popular choices from our customers"})]}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:Kc.slice(0,3).map((w,j)=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 card-hover",style:{animationDelay:`${j*.1}s`},children:[c.jsxs("div",{className:"relative h-48 img-zoom bg-gray-100",children:[c.jsx("img",{src:w.image,alt:w.title,className:"w-full h-full object-cover"}),c.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 ${w.color}`})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded bg-gray-100 text-gray-600",children:w.type}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 mt-2",children:w.title}),c.jsx("div",{className:"flex items-baseline mb-4",children:c.jsx("span",{className:"text-2xl font-extrabold text-gray-900",children:w.price})}),c.jsx("button",{onClick:v,className:"w-full py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 btn-premium",children:"Book Now"})]})]},w.id))}),c.jsx("div",{className:"text-center mt-12",children:c.jsxs("button",{onClick:()=>t("products"),className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-full text-blue-700 bg-blue-100 hover:bg-blue-200 transition",children:["View All Plans ",c.jsx(br,{size:18,className:"ml-2"})]})})]})}),c.jsx("div",{className:"bg-white py-16 border-t border-gray-100",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Why Choose Us?"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[c.jsxs("div",{className:"p-6 rounded-xl bg-blue-50",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(jf,{size:24})}),c.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"5000+"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Happy Customers"})]}),c.jsxs("div",{className:"p-6 rounded-xl bg-orange-50",children:[c.jsx("div",{className:"w-12 h-12 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(gy,{size:24})}),c.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"4.8/5"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Google Rating"})]}),c.jsxs("div",{className:"p-6 rounded-xl bg-green-50",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(im,{size:24})}),c.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"24h"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Fast Installation"})]}),c.jsxs("div",{className:"p-6 rounded-xl bg-purple-50",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(jf,{size:24})}),c.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"100%"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Support Assurance"})]})]})]})}),c.jsx("div",{className:"py-16 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-extrabold text-white",children:"What Our Customers Say"}),c.jsx("p",{className:"mt-4 text-xl text-blue-100",children:"Join 5000+ happy customers across India"})]}),c.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{name:"Rahul Sharma",location:"Mumbai",rating:5,review:"Excellent service! Got my Tata Play installed within 24 hours. The technician was professional and the picture quality is amazing.",avatar:"RS"},{name:"Priya Verma",location:"Delhi",rating:5,review:"Best prices for Jio Fiber! The team was very helpful and the installation was seamless. Highly recommend DTH Store!",avatar:"PV"},{name:"Amit Kumar",location:"Bangalore",rating:5,review:"Great experience! The 3600 cashback offer was genuine. Now enjoying HD channels with my family. Thank you DTH Store!",avatar:"AK"}].map((w,j)=>c.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 card-hover",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-pink-500 flex items-center justify-center text-white font-bold text-lg",children:w.avatar}),c.jsxs("div",{className:"ml-4",children:[c.jsx("h4",{className:"font-bold text-white",children:w.name}),c.jsx("p",{className:"text-sm text-blue-200",children:w.location})]})]}),c.jsx("div",{className:"flex mb-3",children:[...Array(w.rating)].map((F,W)=>c.jsx(gy,{size:16,className:"text-yellow-400 fill-current"},W))}),c.jsxs("p",{className:"text-blue-100 text-sm leading-relaxed",children:['"',w.review,'"']})]},j))})]})})]})}),c.jsx("footer",{className:"bg-gray-900 text-white pt-16 pb-8",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[c.jsxs("div",{className:"col-span-1 md:col-span-2",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:m.logoText}),c.jsx("p",{className:"text-gray-400 text-sm max-w-sm mb-6",children:"India's leading DTH and Broadband service partner. Bringing entertainment and connectivity to every home since 2020."}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-blue-600 rounded-full flex items-center justify-center transition-colors",children:c.jsx(kx,{size:18})}),c.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-gradient-to-br hover:from-purple-600 hover:to-pink-500 rounded-full flex items-center justify-center transition-colors",children:c.jsx(cA,{size:18})}),c.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-red-600 rounded-full flex items-center justify-center transition-colors",children:c.jsx(hA,{size:18})}),c.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 hover:bg-sky-500 rounded-full flex items-center justify-center transition-colors",children:c.jsx(dA,{size:18})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-500",children:"Quick Links"}),c.jsxs("ul",{className:"space-y-3 text-sm text-gray-300",children:[c.jsxs("li",{onClick:()=>t("home"),className:"cursor-pointer hover:text-white flex items-center",children:[c.jsx(br,{size:14,className:"mr-2 text-orange-500"}),"Home"]}),c.jsxs("li",{onClick:()=>t("products"),className:"cursor-pointer hover:text-white flex items-center",children:[c.jsx(br,{size:14,className:"mr-2 text-orange-500"}),"All Plans"]}),c.jsxs("li",{onClick:()=>t("offers"),className:"cursor-pointer hover:text-white flex items-center",children:[c.jsx(br,{size:14,className:"mr-2 text-orange-500"}),"Special Offers"]}),c.jsxs("li",{onClick:v,className:"cursor-pointer hover:text-white flex items-center",children:[c.jsx(br,{size:14,className:"mr-2 text-orange-500"}),"Contact Us"]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-500",children:"Contact Us"}),c.jsxs("ul",{className:"space-y-3 text-sm text-gray-300",children:[c.jsxs("li",{className:"flex items-center",children:[c.jsx(em,{size:16,className:"mr-3 text-blue-400"}),c.jsx("a",{href:"tel:+919311252564",className:"hover:text-white",children:"+91 93112 52564"})]}),c.jsxs("li",{className:"flex items-center",children:[c.jsx(Cr,{size:16,className:"mr-3 text-blue-400"}),c.jsx("a",{href:"mailto:support@dthstore.shop",className:"hover:text-white",children:"support@dthstore.shop"})]}),c.jsxs("li",{className:"flex items-start",children:[c.jsx(fA,{size:16,className:"mr-3 mt-0.5 text-blue-400 flex-shrink-0"}),c.jsx("span",{children:"Mumbai, Delhi, Bangalore & 10+ cities"})]})]})]})]}),c.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center text-sm text-gray-500",children:[c.jsxs("p",{children:[" ",new Date().getFullYear()," ",m.logoText,". All rights reserved."]}),c.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[c.jsx("button",{className:"hover:text-white transition",children:"Privacy Policy"}),c.jsx("button",{className:"hover:text-white transition",children:"Terms of Service"}),c.jsx("button",{onClick:()=>d(!0),className:"hover:text-white transition",children:"Staff Login"})]})]})]})}),c.jsx("a",{href:"https://wa.me/919311252564?text=Hi! I'm interested in DTH/Broadband connection.",target:"_blank",rel:"noopener noreferrer",className:"whatsapp-float","aria-label":"Chat on WhatsApp",children:c.jsx(sm,{size:28,strokeWidth:2})})]})},Xb=document.getElementById("root");if(!Xb)throw new Error("Could not find root element to mount to");const qI=FA.createRoot(Xb);qI.render(c.jsx(Vx.StrictMode,{children:c.jsx(FI,{})}));
